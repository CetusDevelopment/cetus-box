import{j as e,B as t,e as n,I as a}from"./index-ybds6jRs.js";import{a as s,f as o,H as i,c as r,S as l,b as p,E as c,d as x,C as d,e as u,t as g,g as h,B as b,h as m,i as f,j,k as S,l as w,m as y,n as D,o as v,p as C,q as _,r as U,F as k,M as z,R as T,s as P,u as L}from"./index-DVzFqQOD.js";import{z as B,u as A,Z as I,R as $,b as R,D as E,G as W,S as O,a as F}from"./suiClient-flJkUD6N.js";import{H as M,u as V,C as N}from"./useSize-Dvc3rk6B.js";import{V as H,T as Y,S as G}from"./v-stack-BY_1ISyr.js";import{a as q,b as X,u as Z}from"./usePerformance-Blqb2nez.js";import"./toaster-D3S-FEJL.js";import"./button-CYzPHx_C.js";function J({tabs:n,activeTab:a,onChange:s,wrapStyle:o={},tabStyle:i={}}){const r=e=>"string"==typeof a?a===e.value:a?.value===e.value;return e.jsx(M,{gap:{base:"20px",lg:"40px"},...o,children:n.map(n=>e.jsxs(H,{flex:"1",cursor:"pointer",align:"center",onClick:()=>s(n),gap:"12px",...i,children:[e.jsx(Y,{whiteSpace:"nowrap",fontSize:"12px",fontWeight:"500",textShadow:r(n)?"0px 0px 10px rgba(103,255,164,0.3)":"none",color:r(n)?"primary_text":"second_text",children:n.label}),e.jsx(t,{w:"40px",h:"2px",borderRadius:"4px",bg:r(n)?"primary":"transparent"})]},n?.key||n?.value))})}function K({total:t,currentPage:n,pageSize:a,onPageChange:s}){const o=Math.ceil(t/a);return e.jsxs(M,{gap:"8px",w:"100%",justifyContent:"center",children:[e.jsx(i,{w:"40px",h:"28px",borderRadius:"0px",onClick:()=>s(1),disabled:1===n,children:e.jsx(N,{name:"icon-icon_download",boxSize:"14px",rotate:"90deg",_hover:{fill:1===n?"second_text":"primary"}})}),e.jsx(i,{w:"40px",h:"28px",borderRadius:"0px",onClick:()=>s(n-1),disabled:1===n,children:e.jsx(N,{name:"icon-icon_arrow",boxSize:"16px",rotate:"225deg",_hover:{fill:1===n?"second_text":"primary"}})}),e.jsxs(Y,{fontSize:"12px",color:"primary_text",children:["1-",o," of ",n]}),e.jsx(i,{w:"40px",h:"28px",borderRadius:"0px",onClick:()=>s(n+1),disabled:n===o,children:e.jsx(N,{name:"icon-icon_arrow",boxSize:"16px",rotate:"45deg",_hover:{fill:n===o?"second_text":"primary"}})}),e.jsx(i,{w:"40px",h:"28px",borderRadius:"0px",onClick:()=>s(o),disabled:n===o,children:e.jsx(N,{name:"icon-icon_download",boxSize:"14px",rotate:"270deg",_hover:{fill:n===o?"second_text":"primary"}})})]})}function Q(){return{getExplorerUrl:(e,t="account",n="SuiVision")=>{let a;return a="SuiVision"==n?`https://suivision.xyz/${te(t)}/${e}`:`https://suiscan.xyz/mainnet/${ee(t)}/${e}`,a}}}const ee=e=>{switch(e){case"account":return"address";case"token":case"poolAddress":case"nftAddress":case"package":default:return"object";case"tx":return"tx";case"coin":return"coin"}},te=e=>{switch(e){case"account":return"account";case"token":case"poolAddress":case"nftAddress":default:return"object";case"tx":return"txblock";case"coin":return"coin";case"package":return"package"}};function ne(){const{suiClient:e}=A(),{addTokens:t,getToken:n}=X();return{getToken:async a=>{try{if(!a)return;const s=n(a);if(s)return s;const o=I(a,!1),i=await(async n=>{try{const a=await e.fetchCoinMetadata(n);if(a){$.isSuiCoin(n)&&(a.iconUrl="https://archive.cetus.zone/assets/image/sui/sui.png");const e=r(a,n);return t([e]),e}}catch(a){}})(o);return i}catch(s){return}}}}function ae(){const{searchLoading:t,getPositionLoading:a}=q(),{total:s,currentPage:o,handlePageChange:i,pageSize:r,data:l}=function(){const{fetchByApi:e}=R(),{positionData:t,setGetPositionLoading:a}=q(),{addTokens:s}=X(),[o,i]=n.useState(),[r,l]=n.useState(0),[p,c]=n.useState(1),x=n.useRef(5),d=n.useEffectEvent(async(t,n=1)=>{a(!0);try{const o=await e(E,"GET",{position_id:t,offset:(n-1)*x?.current,limit:x?.current});if(o&&o?.pool){const e=o?.showReverse?o?.coinB:o?.coinA,t=o?.showReverse?o?.coinA:o?.coinB,n=n=>n.coinType===e?.coinType?0:n.coinType===t?.coinType?1:2,a={...o,history:o?.history?.map(e=>({...e,eventData:e?.eventData?.sort((e,t)=>n(e)-n(t))??[]}))};i(a),l(o.totalEvent),s([o?.coinA,o?.coinB])}else i(void 0);a(!1)}catch(o){i(void 0),a(!1)}});n.useEffect(()=>{d(t?.positionID||"",p)},[t?.positionID,p]);const u=o?.history?.filter(e=>!["OpenPosition","ClosePosition"].includes(e?.eventType));return{total:r,eventRecord:o,currentPage:p,handlePageChange:e=>{c(e)},pageSize:x.current,data:u}}();return e.jsxs(H,{w:"100%",alignItems:"start",gap:"0px",mt:{base:"8px",lg:"0px"},children:[e.jsx(Y,{color:"primary_text",fontSize:"14px",children:"Events"}),t||a?e.jsx(se,{}):l?.map((t,n)=>e.jsx(oe,{item:t,showBorder:n!==l.length-1},`${t?.tx}-${t?.eventType}`)),!t&&!!s&&s>0&&s>r&&e.jsx(K,{total:s??0,currentPage:o,pageSize:r,onPageChange:i})]})}function se(){return e.jsx(H,{w:"100%",alignItems:"start",gap:"0px",children:[1,2,3,4,5].map(n=>e.jsxs(H,{pt:"16px",pb:"16px",w:"100%",gap:"12px",borderBottom:"1px solid",borderColor:"primary.10",children:[e.jsxs(M,{w:"100%",justifyContent:"space-between",children:[e.jsx(l,{h:"20px",noOfLines:1,w:"100px"}),e.jsx(M,{gap:"2px",children:e.jsx(l,{h:"20px",noOfLines:1,w:"100px"})})]}),e.jsx(M,{w:"100%",children:e.jsxs(M,{gap:"16px",children:[e.jsxs(M,{children:[e.jsx(p,{size:"24px"}),e.jsx(l,{h:"32px",noOfLines:1,w:"60px"})]}),e.jsx(t,{w:"1px",h:"32px",bg:"primary.10"}),e.jsxs(M,{children:[e.jsx(p,{size:"24px"}),e.jsx(l,{h:"32px",noOfLines:1,w:"60px"})]})]})})]},n))})}function oe(n){const{item:a,showBorder:s}=n,{getExplorerUrl:o}=Q(),r=a.eventData?.filter(e=>e&&B(e?.rewardAmount).gt(0));return e.jsxs(H,{pt:"16px",pb:"16px",w:"100%",gap:"12px",borderBottom:s?"1px solid":"none",borderColor:"primary.20",children:[e.jsxs(M,{w:"100%",justifyContent:"space-between",children:[e.jsx(Y,{bg:"second_text.10",pl:"8px",pr:"8px",h:"20px",lineHeight:"20px",color:"primary",fontSize:"12px",children:c[a?.eventType]}),e.jsx(W,{children:e.jsxs(i,{gap:"2px",onClick:()=>{window.open(o(a.tx,"tx"),"_blank")},bg:"transparent",h:"20px",_hover:{bg:"transparent","& p":{color:"primary"},"& svg":{fill:"primary"}},children:[e.jsx(Y,{color:"second_text",fontSize:"12px",children:x(a.timestamp)}),e.jsx(N,{name:"icon-icon_arrow",boxSize:"12px",_groupHover:{fill:"primary"}})]})})]}),e.jsx(M,{w:"100%",gap:"16px",children:r?.map((n,a)=>e.jsx(ie,{rewardItem:n,children:r&&r.length-1!==a&&e.jsx(t,{w:"1px",h:"32px",bg:"primary.10"})},n.coinType))})]})}const ie=({rewardItem:t,children:a})=>{const{getToken:s}=ne(),[o,i]=n.useState(),r=n.useEffectEvent(async e=>{try{const t=await s(e);t&&i(t)}catch(t){}});return n.useEffect(()=>{r(t?.coinType)},[t?.coinType]),e.jsxs(e.Fragment,{children:[e.jsxs(M,{gap:"8px",pb:"4px",children:[e.jsx(d,{src:o?.logoURL,size:"24px"}),e.jsxs(H,{alignItems:"start",gap:"4px",children:[e.jsxs(Y,{fontSize:"12px",color:"primary_text",children:[u(t?.rewardAmount)," ",g(o?.symbol)]}),e.jsxs(Y,{fontSize:"12px",color:"second_text",children:["(~$",u(t?.rewardUSD),")"]})]})]}),a]})};function re({totalDepositUSD:s,pnlUSD:o,pnlPercentage:i}){const{searchLoading:r,performanceData:l,positionData:p}=q(),[c,x]=n.useState("pnl"),[d,g]=n.useState(["Total Deposit","BaseFee & BinStep","Duration","pnl & amount"]),[_,U]=n.useState(),k=d.includes("BaseFee & BinStep"),z=[{label:"Total Deposit",value:"Total Deposit"},{label:"BaseFee & BinStep",value:"BaseFee & BinStep"},{label:"Duration",value:"Duration"},{label:"amount"===c?"$Amount":"%PnL",value:"pnl & amount"}],T=p?.showReverse?p?.coinB:p?.coinA,P=p?.showReverse?p?.coinA:p?.coinB,L=B(p?.pnlUSD).gte(0)?"primary":"primary_red",A=h(B(p?.roi).mul(100).toNumber()),I=[`/images/share/${A}_1.png`,`/images/share/${A}_2.png`,`/images/share/${A}_3.png`];return n.useEffect(()=>{U(`/images/share/${A}_1.png`)},[A]),e.jsx(b,{p:{base:"0px",lg:"22px 20px 20px"},border:{base:"none",lg:"1px solid"},flex:"1",children:e.jsxs(H,{gap:"0px",w:"100%",children:[e.jsx(m,{w:"100%",aspectRatio:"16 / 9",h:{base:"auto",lg:"280px"},loading:r,children:e.jsxs(H,{id:"performance_card",w:"100%",p:{base:"8px",lg:"20px"},h:{base:"auto",lg:"280px"},aspectRatio:"16 / 9",alignItems:"start",gap:"0px",justifyContent:"start",bg:{base:`center / contain no-repeat url(${_})`,lg:`center / 100% 100% no-repeat url(${_})`},pos:"relative",zIndex:"-11",children:[e.jsx(t,{zIndex:"-10",pos:"absolute",top:"0",left:"0",w:"100%",h:"100%",bg:"center / 100% 100% no-repeat url('/images/share/icon_mask.png')"}),e.jsxs(M,{w:"100%",justifyContent:"space-between",mb:{base:"6px",lg:"24px"},children:[e.jsxs(M,{justifyContent:"start",gap:"8px",children:[e.jsx(a,{src:"/images/icon_logo.png",w:"20px",h:"23px"}),e.jsx(Y,{color:"primary_text",fontSize:"14px",fontWeight:"500",children:"CETUS DLMM"})]}),e.jsxs(H,{alignItems:"end",justifyContent:"start",gap:"0px",children:[e.jsx(Y,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:"Snapshot on"}),e.jsx(Y,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:f()})]})]}),d.includes("Duration")?e.jsxs(M,{justifyContent:"start",gap:"8px",mb:{base:"6px",lg:"20px"},children:[e.jsx(Y,{color:"card_text",fontWeight:"500",fontSize:"12px",children:"Duration"}),e.jsx(Y,{color:"primary_text",fontSize:"12px",fontWeight:"500",children:j(p?.openPositionTimestamp||0,p?.closePositionTimestamp)})]}):e.jsx(t,{h:"12px",mb:{base:"6px",lg:"20px"}}),e.jsx(S,{tokenA:T,tokenB:P,symbolStyle:{fontSize:"24px",ml:"8px",fontWeight:"600"}}),e.jsx(Y,{fontSize:"12px",color:"card_text",mt:{base:"8px",lg:"28px"},fontWeight:"500",children:"amount"===c?"Profit (USD)":"Profit (%)"}),e.jsx(Y,{fontWeight:"700",fontSize:{base:"32px",lg:"46px"},color:L,mt:{base:"4px",lg:"8px"},children:"amount"===c?o:i}),e.jsxs(M,{flexWrap:"wrap",w:"100%",justifyContent:"space-between",position:"absolute",bottom:"0",left:"0",p:{base:"0 8px 8px",lg:"0 20px 20px"},children:[d.includes("Total Deposit")&&e.jsx(w,{label:"Deposit",value:`$${u(s)}`,wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),k&&e.jsx(w,{label:"Base fee",value:y(B(p?.baseFeeRate).mul(100).toNumber()),wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),k&&e.jsx(w,{label:"Bin Step",value:p?.binStep||0,wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),d.includes("pnl & amount")&&"amount"===c&&e.jsx(w,{label:"PNL",value:i,wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),d.includes("pnl & amount")&&"pnl"===c&&e.jsx(w,{label:"Amount",value:o,wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}})]})]})}),e.jsxs(H,{w:"100%",mt:"20px",gap:"16px",children:[e.jsx(le,{currType:c,handleMainDisplayChange:x}),e.jsx(D,{data:z,selected:d,handleSelectedChange:e=>{g(e)}}),_&&e.jsx(v,{imageUrls:I,currImageUrl:_,handleSelectedChange:U,loading:r})]}),e.jsx(C,{style:{mt:"28px"},card_id:"performance_card",filename:`dlmm_${T?.symbol}_${P?.symbol}`})]})})}function le(t){const{currType:n,handleMainDisplayChange:a}=t;return e.jsxs(M,{w:"100%",justifyContent:"space-between",children:[e.jsx(Y,{fontSize:"12px",color:"second_text",children:"Main Display"}),e.jsxs(M,{justifyContent:"end",children:[e.jsx(Y,{cursor:"pointer",fontSize:"12px",color:"amount"===n?"primary":"second_text",onClick:()=>a("amount"),children:"$Amount"}),e.jsx(_,{orientation:"vertical",height:"8px",borderColor:"second_text.50"}),e.jsx(Y,{cursor:"pointer",fontSize:"12px",color:"pnl"===n?"primary":"second_text",onClick:()=>a("pnl"),children:"%PnL"})]})]})}function pe(t){const{isCancelBubble:n=!0,address:a,hasUnderline:o=!0,onClickLink:i,addressAbridgeStyle:r,subStringLengthStart:l=6,subStringLengthEnd:p=4,...c}=t;return e.jsx(Y,{cursor:"pointer",color:"primary_text",fontSize:"12px",_hover:{textDecoration:o?"underline":"none"},onClick:e=>{n&&U(e),i()},...c,children:s(a,r,l,p)})}function ce({label:t,value:n,wrapStyle:a={},labelStyle:s={},valueStyle:o={},skeletonStyle:i={},isLoading:r,onClickLink:p}){return e.jsxs(H,{gap:"8px",alignItems:"end",...a,children:[e.jsx(Y,{fontSize:"12px",color:"second_text",...s,children:t}),r?e.jsx(l,{h:"20px",noOfLines:1,w:"48px",...i}):p?e.jsx(pe,{address:n??"",onClickLink:p,hasUnderline:!0,fontSize:"12px",color:"primary_text",fontWeight:"600",...o}):e.jsx(Y,{fontSize:"12px",color:"primary_text",fontWeight:"600",...o,children:n})]})}function xe(){const{positionData:e}=q(),{suiClient:t}=A(),[a,s]=n.useState("");n.useEffect(()=>{(async e=>{try{const n=await t._client.getObject({id:e,options:{showOwner:!0}});n&&n?.data&&s(n.data.owner?.AddressOwner||"")}catch(n){}})(e?.positionID||"")},[e?.positionID]);const o=void 0!==e?.openActivateID&&void 0!==e?.binStep&&void 0!==e?.coinA?.decimals&&void 0!==e?.coinB?.decimals?k.getPriceFromBinId(e.openActivateID,e.binStep,e.coinA.decimals,e.coinB.decimals):void 0,i=e?.showReverse?e?.coinB:e?.coinA,r=e?.showReverse?e?.coinA:e?.coinB;return{addressOwner:a,openPrice:void 0!==o?e?.showReverse?k?.getReversePrice(o):o:void 0,displayTokenA:i,displayTokenB:r,positionData:e}}function de(){const{searchLoading:t,performanceData:n}=q(),{getExplorerUrl:a}=Q(),{addressOwner:s,openPrice:o,displayTokenA:i,displayTokenB:r,positionData:l}=xe();return t?e.jsx(ue,{}):e.jsxs(G,{flexDir:{base:"column",lg:"row"},gap:"16px",w:"100%",justifyContent:"space-between",alignItems:{base:"start",lg:"end"},children:[e.jsxs(H,{alignItems:"start",gap:{base:"8px",lg:"12px"},children:[e.jsxs(Y,{color:"second_text",fontSize:"12px",children:["Open in:"," ",l?.openPositionTimestamp?x(l.openPositionTimestamp):"-"]}),e.jsx(S,{tokenA:i,tokenB:r,feeDisplay:y(B(l?.baseFeeRate).mul(100).toNumber()),bps:l?.binStep})]}),e.jsxs(G,{gap:{base:"12px",lg:"32px"},flexDir:{base:"column",lg:"row"},w:{base:"100%",lg:"auto"},children:[e.jsx(ce,{wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},label:"Open Price",value:`${u(o||0)} ${g(r?.symbol)} per ${g(i?.symbol)}`}),e.jsx(ce,{wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},label:"Duration",value:j(l?.openPositionTimestamp||0,l?.closePositionTimestamp)}),e.jsx(ce,{wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},label:"NFT Address",value:l?.positionID||"-",onClickLink:()=>{window.open(a(l?.positionID,"nftAddress"),"_blank")}}),s&&e.jsx(ce,{wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},label:"Owned By",value:s,onClickLink:()=>{window.open(a(s,"account"),"_blank")}})]})]})}function ue(){return e.jsxs(G,{flexDir:{base:"column",lg:"row"},gap:"16px",w:"100%",justifyContent:"space-between",alignItems:{base:"start",lg:"end"},children:[e.jsxs(H,{alignItems:"start",gap:{base:"8px",lg:"12px"},children:[e.jsx(l,{h:"20px",noOfLines:1,w:"100px"}),e.jsx(S,{tokenA:z.SUI,tokenB:z.USDC,feeDisplay:"0.1%",bps:25,isLoading:!0})]}),e.jsxs(G,{gap:{base:"12px",lg:"32px"},flexDir:{base:"column",lg:"row"},w:{base:"100%",lg:"auto"},children:[e.jsx(ce,{label:"Open Price",value:"2.4931 USDC per SUl",wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},isLoading:!0}),e.jsx(ce,{label:"Duration",value:"10d 23h 12m",isLoading:!0,wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}}}),e.jsx(ce,{label:"NFT Address",value:"0x12…34YTGu",isLoading:!0,wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}}}),e.jsx(ce,{label:"Owned By",value:"0x12…34YTGu",isLoading:!0,wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}}})]})]})}function ge({totalDepositUSD:t,totalYieldUSD:n,totalWithdrawUSD:a,currentPositionUSD:s,pnlUSD:o,pnlPercentage:i}){const{searchLoading:r,positionData:l}=q(),p=B(l?.pnlUSD).gte(0)?"primary":"primary_red";return e.jsx(b,{p:{base:"16px",lg:"20px"},children:e.jsxs(H,{w:"100%",alignItems:"start",gap:"10px",children:[e.jsx(Y,{color:"primary_text",fontSize:"14px",children:"Profit and Loss"}),e.jsx(b,{p:"0px",mt:"4px",bg:"secondary_background.10",borderColor:"transparent",children:e.jsxs(M,{h:"76px",w:"100%",justifyContent:"space-between",children:[e.jsx(M,{justifyContent:"center",w:"50%",children:e.jsx(ce,{label:"$Amount",value:o,wrapStyle:{alignItems:"center",gap:"4px"},valueStyle:{fontSize:"16px",color:p},isLoading:r})}),e.jsx(M,{justifyContent:"center",w:"50%",children:e.jsx(ce,{label:"%PnL",value:i,wrapStyle:{alignItems:"center",gap:"4px"},valueStyle:{fontSize:"16px",color:p},isLoading:r})})]})}),e.jsx(w,{label:"Current Position",value:`$${u(s)}`,wrapStyle:{mt:"6px"},isLoading:r}),e.jsx(w,{label:"Total Deposit",value:`$${u(t)}`,isLoading:r}),e.jsx(w,{label:"Total Yield",value:`$${u(n)}`,isLoading:r}),e.jsx(w,{label:"Total Withdrawal",value:`$${u(a)}`,isLoading:r})]})})}function he(){const{totalDepositUSD:t,totalYieldUSD:n,totalWithdrawUSD:a,currentPositionUSD:s,pnlUSD:i,pnlPercentage:r}=function(){const{positionData:e}=q(),t=B(e?.historicalData?.totalDepositAUSD).plus(e?.historicalData?.totalDepositBUSD).toString(),n=B(e?.historicalData?.totalClaimedFeeAUSD).plus(e?.historicalData?.totalClaimedFeeBUSD).plus(e?.historicalData?.totalClaimedRewards?.reduce((e,t)=>e.plus(t?.rewardUSD),B(0))).plus(e?.currentData?.unclaimedFeeAUSD)?.plus(e?.currentData?.unclaimedFeeBUSD)?.plus(e?.currentData?.unclaimedRewardsUSD?.reduce((e,t)=>e.plus(t?.uUnClaimedUSD),B(0))).toString();return{totalDepositUSD:t,totalYieldUSD:n,totalWithdrawUSD:B(e?.historicalData?.totalWithdrawAUSD).plus(e?.historicalData?.totalWithdrawBUSD).toString(),currentPositionUSD:B(e?.currentData?.coinAUSD).plus(e?.currentData?.coinBUSD).toString(),pnlUSD:o(e?.pnlUSD),pnlPercentage:o(B(e?.pnlUSD).div(t).times(100).toNumber(),"percentage")}}(),{isApp:l}=V();return e.jsxs(H,{gap:"0px",w:"100%",mt:"20px",children:[e.jsx(de,{}),e.jsxs(G,{flexDir:{base:"column",lg:"row"},mt:{base:"28px",lg:"18px"},gap:{base:"16px",lg:"20px"},w:"100%",justifyContent:{base:"center",lg:"space-between"},alignItems:{base:"center",lg:"start"},children:[e.jsxs(H,{w:{base:"100%",lg:"380px"},minW:{base:"100%",lg:"380px"},gap:"20px",children:[e.jsx(ge,{totalDepositUSD:t,totalYieldUSD:n,totalWithdrawUSD:a,currentPositionUSD:s,pnlUSD:i,pnlPercentage:r}),!l&&e.jsx(ae,{})]}),e.jsx(re,{totalDepositUSD:t,pnlUSD:i,pnlPercentage:r}),l&&e.jsx(ae,{})]})]})}function be(){const{activeTab:a,tabs:o,handleTabChange:i}=function(){const{performanceData:e,setPositionData:t}=q(),[a,o]=n.useState(),{isApp:i}=V(),r=e,l=r?.list?.map(e=>({label:i?`#${s(e?.positionID)}`:`Position #${s(e?.positionID)}`,value:e?.positionID}));return n.useEffect(()=>{l&&l.length>0&&!a&&(o(l[0]),t(r.list[0]))},[l]),{activeTab:a,tabs:l,handleTabChange:e=>{o(e);const n=r?.list.find(t=>t.positionID===e.value);n&&t(n)}}}();return a&&e.jsxs(H,{w:"100%",mt:{base:"4px",lg:"16px"},children:[o&&o?.length>1?e.jsx(t,{w:"100%",borderBottom:"1px solid",borderColor:"primary.10",children:e.jsx(J,{tabs:o,activeTab:a,onChange:i,wrapStyle:{w:"fit-content",overflowX:"auto",scrollbarGutter:"stable",scrollbarWidth:"thin"}})}):e.jsx(t,{w:"100%",borderBottom:"1px solid",borderColor:"primary.10"}),e.jsx(he,{},a?.value)]})}function me(){const{searchValue:t,setSearchValue:a,handleSearch:s,inputErrorString:o,searchLoading:i,handleValueClick:r,hasPerformanceData:l}=Z(),{performanceData:p,recentSearchValues:c,clearRecentSearchValues:x,removeRecentSearchValue:d,resetInput:u}=q();n.useEffect(()=>()=>{u()},[u]);const{isApp:g}=V();return e.jsxs(H,{gap:"12px",w:{base:"100%",lg:l?"940px":"520px"},mt:{base:l?"40px":"100px",lg:l?"20px":"147px"},children:[e.jsx(Y,{alignSelf:l?"start":"center",color:"primary_text",fontSize:"20px",fontWeight:"500",children:"DLMM Performance"}),e.jsx(Y,{mb:"8px",color:"second_text",fontSize:"12px",lineHeight:"20px",children:"Track your Cetus DLMM profits in style. Enter an NFT address, or any related transaction such as deposit, remove, or claim to view and share your performance."}),e.jsx(O,{errorSting:o,placeholder:"DLMM position or transaction address here…",value:t,onEnter:()=>s(t),onInputChange:a,isLoading:i}),e.jsx(T,{style:{mt:l?"0px":"16px"},direction:g?"column":l?"row":"column",values:c,handleClearAll:x,handleValueClick:r,handleDeleteValue:d}),i&&e.jsx(P,{h:"138px",children:e.jsx(F,{w:"16px",h:"16px",color:"primary",_hover:{"& svg":{fill:"primary"}}})}),l&&!i&&e.jsx(be,{}),p&&"error_message"in p&&!i&&e.jsx(L,{style:{mt:"16px"},type:"performance"})]})}export{me as default};
