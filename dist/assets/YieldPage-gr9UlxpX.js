import{r as e,j as t,I as i,B as n}from"./index-CXNoQfxr.js";import{b as o,H as a,u as s,G as l,a as r,Y as p}from"./usePositionYield-DImbcF0N.js";import{H as c,u as d}from"./Icon-cdQY_hih.js";import{b as u,S as m,C as x,a as f,c as g,J as h,d as y,B as b,e as S,f as j,g as _,h as D,m as v,n as w,R as Y,k as L,M as T,F as k,P as C,j as U}from"./PositionHeader-BuK_mp9k.js";import{u as A,z,e as F,t as R,g as B,f as I,i as P,a as O,b as $,j as M,U as N,w as E,S as W}from"./suiClient-BTB45MoP.js";import{V,T as H,S as G}from"./v-stack-2OAqoJZH.js";import"./button-CS7Uwb_6.js";import"./toaster-BDWjbpf3.js";var J="object"==typeof global&&global&&global.Object===Object&&global,q="object"==typeof self&&self&&self.Object===Object&&self,K=J||q||Function("return this")(),Q=K.Symbol,X=Object.prototype,Z=X.hasOwnProperty,ee=X.toString,te=Q?Q.toStringTag:void 0;var ie=Object.prototype.toString;var ne=Q?Q.toStringTag:void 0;function oe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ne&&ne in Object(e)?function(e){var t=Z.call(e,te),i=e[te];try{e[te]=void 0;var n=!0}catch(a){}var o=ee.call(e);return n&&(t?e[te]=i:delete e[te]),o}(e):function(e){return ie.call(e)}(e)}function ae(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var se,le=K["__core-js_shared__"],re=(se=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||""))?"Symbol(src)_1."+se:"";var pe=Function.prototype.toString;var ce=/^\[object .+?Constructor\]$/,de=Function.prototype,ue=Object.prototype,me=de.toString,xe=ue.hasOwnProperty,fe=RegExp("^"+me.call(xe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ge(e){if(!ae(e)||(t=e,re&&re in t))return!1;var t,i=function(e){if(!ae(e))return!1;var t=oe(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)?fe:ce;return i.test(function(e){if(null!=e){try{return pe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function he(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return ge(i)?i:void 0}function ye(e){return e!=e}function be(e,t){return!!(null==e?0:e.length)&&function(e,t,i){return t==t?function(e,t,i){for(var n=i-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t,i):function(e,t,i){for(var n=e.length,o=i+-1;++o<n;)if(t(e[o],o,e))return o;return-1}(e,ye,i)}(e,t,0)>-1}function Se(e,t){return e===t||e!=e&&t!=t}var je=he(Object,"create");var _e=Object.prototype.hasOwnProperty;var De=Object.prototype.hasOwnProperty;function ve(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function we(e,t){for(var i=e.length;i--;)if(Se(e[i][0],t))return i;return-1}ve.prototype.clear=function(){this.__data__=je?je(null):{},this.size=0},ve.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ve.prototype.get=function(e){var t=this.__data__;if(je){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return _e.call(t,e)?t[e]:void 0},ve.prototype.has=function(e){var t=this.__data__;return je?void 0!==t[e]:De.call(t,e)},ve.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=je&&void 0===t?"__lodash_hash_undefined__":t,this};var Ye=Array.prototype.splice;function Le(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Le.prototype.clear=function(){this.__data__=[],this.size=0},Le.prototype.delete=function(e){var t=this.__data__,i=we(t,e);return!(i<0)&&(i==t.length-1?t.pop():Ye.call(t,i,1),--this.size,!0)},Le.prototype.get=function(e){var t=this.__data__,i=we(t,e);return i<0?void 0:t[i][1]},Le.prototype.has=function(e){return we(this.__data__,e)>-1},Le.prototype.set=function(e,t){var i=this.__data__,n=we(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this};var Te=he(K,"Map");function ke(e,t){var i,n,o=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?o["string"==typeof t?"string":"hash"]:o.map}function Ce(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Ce.prototype.clear=function(){this.size=0,this.__data__={hash:new ve,map:new(Te||Le),string:new ve}},Ce.prototype.delete=function(e){var t=ke(this,e).delete(e);return this.size-=t?1:0,t},Ce.prototype.get=function(e){return ke(this,e).get(e)},Ce.prototype.has=function(e){return ke(this,e).has(e)},Ce.prototype.set=function(e,t){var i=ke(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this};var Ue=he(K,"Set");function Ae(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Ce;++t<i;)this.add(e[t])}function ze(e,t){return e.has(t)}function Fe(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}Ae.prototype.add=Ae.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ae.prototype.has=function(e){return this.__data__.has(e)};var Re=Ue&&1/Fe(new Ue([,-0]))[1]==1/0?function(e){return new Ue(e)}:function(){};function Be(e){return e&&e.length?function(e,t,i){var n=-1,o=be,a=e.length,s=!0,l=[],r=l;if(a>=200){var p=Re(e);if(p)return Fe(p);s=!1,o=ze,r=new Ae}else r=l;e:for(;++n<a;){var c=e[n],d=c;if(c=0!==c?c:0,s&&d==d){for(var u=r.length;u--;)if(r[u]===d)continue e;l.push(c)}else o(r,d,i)||(r!==l&&r.push(d),l.push(c))}return l}(e):[]}function Ie(t){const{getToken:i}=u(),{getToken:n}=A(),o=t?.positions?.reduce((e,t)=>e.plus(t?.currentData?.unclaimedFeeAUSD??0).plus(t?.currentData?.unclaimedFeeBUSD??0).plus(t?.currentData?.unclaimedRewardsUSD?.reduce((e,t)=>e.plus(t?.unClaimedUSD),z(0))??0).plus(t?.currentData?.unclaimedFarmingUSD?.reduce((e,t)=>e.plus(t?.unClaimedUSD),z(0))??0).plus(t?.historicalData?.totalClaimedFeeAUSD).plus(t?.historicalData?.totalClaimedFeeBUSD).plus(t?.historicalData?.totalClaimedRewards?.reduce((e,t)=>e.plus(t?.rewardUSD),z(0))).plus(t?.historicalData?.totalClaimedFarming?.reduce((e,t)=>e.plus(t?.rewardUSD),z(0))??0),z(0)).toNumber(),a=[{token:t?.coinA,amount:t?.positions?.reduce((e,t)=>e.plus(t?.historicalData?.totalClaimedFeeAAmount)?.plus(t?.currentData?.unclaimedFeeAAmount??0),z(0)).toNumber(),amountUSD:t?.positions?.reduce((e,t)=>e.plus(t?.historicalData?.totalClaimedFeeAUSD)?.plus(t?.currentData?.unclaimedFeeAUSD??0),z(0)).toNumber()},{token:t?.coinB,amount:t?.positions?.reduce((e,t)=>e.plus(t?.historicalData?.totalClaimedFeeBAmount)?.plus(t?.currentData?.unclaimedFeeBAmount??0),z(0)).toNumber(),amountUSD:t?.positions?.reduce((e,t)=>e.plus(t?.historicalData?.totalClaimedFeeBUSD)?.plus(t?.currentData?.unclaimedFeeBUSD??0),z(0)).toNumber()}],s=t?.coinRewards?.map(e=>{const i=t?.positions?.reduce((t,i)=>t.plus(i?.historicalData?.totalClaimedRewards?.filter(t=>t?.coinType===e?.coinType)?.reduce((e,t)=>e.plus(t?.rewardAmount),z(0)))?.plus(i?.currentData?.unclaimedRewardsUSD?.filter(t=>t?.coinType===e?.coinType)?.reduce((e,t)=>e.plus(t?.unClaimedAmount),z(0))??0),z(0)).toNumber(),n=t?.positions?.reduce((t,i)=>t.plus(i?.historicalData?.totalClaimedRewards?.filter(t=>t?.coinType===e?.coinType)?.reduce((e,t)=>e.plus(t?.rewardUSD),z(0)))?.plus(i?.currentData?.unclaimedRewardsUSD?.filter(t=>t?.coinType===e?.coinType)?.reduce((e,t)=>e?.plus(t?.unClaimedUSD),z(0))??0),z(0)).toNumber();return i&&z(i).gt(0)?{token:e,amount:i,amountUSD:n}:null}).filter(e=>null!==e),l=Be(t?.positions?.flatMap(e=>(e?.currentData?.unclaimedFarmingUSD?.map(e=>e?.coinType)||[]).concat(e?.historicalData?.totalClaimedFarming?.map(e=>e?.coinType)||[]).flat()));e.useEffect(()=>{l?.map(async e=>{await i(e)})},[l]);const r=l?.map(e=>{const i=n(e),o=t?.positions?.reduce((e,t)=>e.plus(t?.currentData?.unclaimedFarmingUSD?.filter(e=>e?.coinType===i?.coinType)?.reduce((e,t)=>e.plus(t?.unClaimedAmount),z(0))??0).plus(t?.historicalData?.totalClaimedFarming?.filter(e=>e?.coinType===i?.coinType)?.reduce((e,t)=>e.plus(t?.rewardAmount),z(0))??0),z(0)).toNumber(),a=t?.positions?.reduce((e,t)=>e.plus(t?.currentData?.unclaimedFarmingUSD?.filter(e=>e?.coinType===i?.coinType)?.reduce((e,t)=>e.plus(t?.unClaimedUSD),z(0))??0).plus(t?.historicalData?.totalClaimedFarming?.filter(e=>e?.coinType===i?.coinType)?.reduce((e,t)=>e.plus(t?.rewardUSD),z(0))??0),z(0)).toNumber();return o&&z(o).gt(0)?{token:i,amount:o,amountUSD:a}:null}).filter(e=>null!==e);return{totalYield:o,feeYieldList:a,miningYieldList:s,farmingYieldList:r}}function Pe({totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:o,loading:s}){return t.jsxs(V,{p:{base:"16px",lg:"20px"},gap:{base:"8px",lg:"12px"},w:{base:"100%",lg:"380px"},minW:{base:"100%",lg:"380px"},bg:"input_bg",border:"1px solid",borderColor:"primary.10",children:[t.jsxs(c,{w:"100%",justify:"space-between",children:[t.jsx(a,{fontSize:"14px",color:"primary_text",fontWeight:"500",children:"Total Yield"}),s?t.jsx(m,{loading:s,ml:"12px",noOfLines:1,rootProps:{h:"14px",flex:"0 0 100px"}}):t.jsx(H,{fontSize:"14px",color:"primary",fontWeight:"500",children:e&&Number(e)>0?`+$${F(e)}`:"$0"})]}),t.jsx(Oe,{title:"Total fees you earn",yieldList:i,loading:s}),n&&n?.length>0&&t.jsx(Oe,{title:"Total mining rewards you earn",yieldList:n,loading:s}),o&&o?.length>0&&t.jsx(Oe,{title:"Total farming rewards you earn",yieldList:o,loading:s}),t.jsx(H,{fontSize:"12px",lineHeight:"16px",color:"second_text",children:"For closed positions, only those closed within the past 3 months are tracked."})]})}const Oe=({title:e,yieldList:i,loading:n})=>t.jsxs(V,{w:"100%",p:{base:"8px",lg:"16px"},align:"flex-start",bg:"secondary_background.10",children:[t.jsx(H,{fontSize:"12px",color:"second_text",children:e}),n?(i&&0!==i?.length?i:[1,2])?.map((e,i)=>t.jsx($e,{},"object"==typeof e?e?.token?.coinType:i)):i?.map(e=>t.jsxs(c,{gap:"4px",children:[t.jsx(x,{src:e?.token?.logoURL,size:"16px"}),t.jsx(H,{fontSize:"12px",color:"primary_text",children:`${F(e?.amount||0)} ${R(e?.token?.symbol)}`}),t.jsxs(H,{fontSize:"12px",color:"second_text",children:["(~$",F(e?.amountUSD),")"]})]},e?.token?.coinType))]}),$e=()=>t.jsxs(c,{gap:"4px",children:[t.jsx(f,{size:"16px"}),t.jsx(m,{noOfLines:1,h:"12px",w:"60px"}),t.jsx(m,{noOfLines:1,h:"12px",w:"60px"})]});function Me({totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:a}){const{poolSearchLoading:s}=o();return t.jsx(Pe,{loading:s,totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:a})}function Ne({bgImageUrl:e,poolType:n,displayTokenA:o,displayTokenB:a,totalYield:s,yieldList:l,showBaseFee:r,showFeeTier:p,showTokenYield:d,yieldData:u}){return t.jsxs(V,{w:"1280px",p:"50px",h:"720px",aspectRatio:"16 / 9",alignItems:"start",gap:"0px",justifyContent:"start",zIndex:"-11",id:"yield_card",pos:"absolute",left:"-9999px",top:"-9999px",children:[t.jsx(i,{pos:"absolute",src:e,w:"100%",h:"100%",zIndex:"-11",top:"0",left:"0"}),t.jsxs(c,{w:"100%",justifyContent:"space-between",mb:"52px",children:[t.jsx(i,{h:"58px",w:"auto",src:`/images/share/${n}_logo.png`}),t.jsxs(V,{alignItems:"end",justifyContent:"start",gap:"0px",children:[t.jsx(H,{color:"primary_text",fontSize:"26px",letterSpacing:"2",lineHeight:"38px",children:"Snapshot by cetusbox.zone"}),t.jsx(H,{color:"primary_text",fontSize:"26px",letterSpacing:"2",lineHeight:"38px",children:B()})]})]}),t.jsxs(H,{fontSize:"84px",color:"primary_text",fontWeight:"500",letterSpacing:"4",children:[R(o?.symbol),"-",R(a?.symbol)]}),t.jsx(H,{fontSize:"33px",color:"card_text",mt:"58px",fontWeight:"500",letterSpacing:"2",children:"Total Yield (USD)"}),t.jsx(H,{color:"primary",fontWeight:"700",fontSize:"118px",letterSpacing:"7",mt:"20px",children:I(s)}),t.jsxs(c,{w:"100%",justifyContent:"space-between",flexWrap:"wrap",position:"absolute",bottom:"0",left:"0",p:"0 50px 50px",gap:"24px",children:[d&&l?.map(e=>t.jsx(g,{label:`Total ${R(e.token?.symbol)}`,value:F(e?.amount),wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}},e.token?.coinType)),p&&t.jsx(g,{label:"Fee Tier",value:P(z(u?.feeRate).div(h).toNumber()),wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}}),r&&t.jsx(g,{label:"BaseFee & BinStep",value:void 0!==u?.baseFeeRate?`${P(z(u?.baseFeeRate).mul(100).toNumber())} | ${u?.binStep??"--"}bps`:"--",wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}})]})]})}const Ee=["Total Yield Token","BaseFee & BinStep"],We=["Total Yield Token","Fee Tier"];function Ve({totalYield:n,feeYieldList:o,miningYieldList:a,farmingYieldList:s,loading:l,isDlmm:r,yieldData:p}){const d=r?"dlmm":"clmm",[u,m]=e.useState([]);e.useEffect(()=>{m("dlmm"===d?Ee:We)},[d]);const[x,f]=e.useState(),v=u.includes("Total Yield Token"),w=u.includes("Fee Tier"),Y=u.includes("BaseFee & BinStep"),{displayTokenA:L,displayTokenB:T,yieldList:k}=function({yieldData:t,feeYieldList:i,miningYieldList:n,farmingYieldList:o}){return{displayTokenA:t?.showReverse?t?.coinB:t?.coinA,displayTokenB:t?.showReverse?t?.coinA:t?.coinB,yieldList:e.useMemo(()=>{const e=new Map;return i.forEach(t=>{e.set(t.token?.coinType,{token:t?.token,amount:t?.amount,amountUSD:t?.amountUSD})}),n&&n?.length>0&&n.forEach(t=>{e.has(t.token?.coinType)||e.set(t.token?.coinType,{token:t?.token,amount:t?.amount,amountUSD:t?.amountUSD});const i=e.get(t.token?.coinType)?.amount,n=e.get(t.token?.coinType)?.amountUSD;e.set(t.token?.coinType,{token:t?.token,amount:z(i).plus(t?.amount).toNumber(),amountUSD:z(n).plus(t?.amountUSD).toNumber()})}),o&&o?.length>0&&o.forEach(t=>{e.has(t.token?.coinType)||e.set(t.token?.coinType,{token:t?.token,amount:t?.amount,amountUSD:t?.amountUSD});const i=e.get(t.token?.coinType)?.amount,n=e.get(t.token?.coinType)?.amountUSD;e.set(t.token?.coinType,{token:t?.token,amount:z(i).plus(t?.amount).toNumber(),amountUSD:z(n).plus(t?.amountUSD).toNumber()})}),Array.from(e.values())},[i,n,o])}}({yieldData:p,feeYieldList:o,miningYieldList:a,farmingYieldList:s}),C=(U=z(n).toNumber())>200?"massive_gain":U>20?"strong_gain":U>=5?"minor_gain":"flat";var U;const A=y(C);return e.useEffect(()=>{f(`/images/share/${C}_1.png`)},[C,p]),t.jsxs(b,{p:{base:"0px",lg:"22px 20px 20px"},border:"1px solid",borderColor:{base:"transparent",lg:"primary.10"},flex:"1",children:[t.jsxs(V,{gap:"0px",w:"100%",children:[t.jsx(S,{w:"100%",h:{base:"auto",lg:"280px"},aspectRatio:"16 / 9",loading:l,children:t.jsxs(V,{w:"100%",p:{base:"8px",lg:"20px"},minH:{base:"auto",lg:"280px"},aspectRatio:"16 / 9",alignItems:"start",gap:"0px",justifyContent:"start",bg:{base:`center / contain no-repeat url(${x})`,lg:`center / 100% 100% no-repeat url(${x})`},pos:"relative",zIndex:"-11",children:[t.jsxs(c,{w:"100%",justifyContent:"space-between",mb:{base:"6px",lg:"32px"},children:[t.jsx(c,{justifyContent:"start",gap:"8px",children:t.jsx(i,{h:"23px",w:"auto",src:`/images/share/${d}_logo.png`})}),t.jsxs(V,{alignItems:"end",justifyContent:"start",gap:"0px",children:[t.jsx(H,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:"Snapshot by cetusbox.zone"}),t.jsx(H,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:B()})]})]}),t.jsxs(H,{fontSize:"24px",color:"primary_text",fontWeight:"500",letterSpacing:"1",children:[R(L?.symbol),"-",R(T?.symbol)]}),t.jsx(H,{fontSize:"12px",color:"card_text",mt:{base:"20px",lg:"28px"},fontWeight:"500",children:"Total Yield (USD)"}),t.jsx(H,{fontSize:{base:"32px",lg:"46px"},color:"primary",mt:{base:"8px",lg:"12px"},fontWeight:"700",children:I(n)}),t.jsxs(c,{w:"100%",justifyContent:"space-between",flexWrap:"wrap",position:"absolute",bottom:"0",left:"0",p:{base:"0 8px 8px",lg:"0 20px 20px"},children:[v&&k?.map(e=>t.jsx(g,{label:`Total ${R(e.token?.symbol)}`,value:F(e?.amount),wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}},e.token?.coinType)),w&&t.jsx(g,{label:"Fee Tier",value:P(z(p?.feeRate).div(h).toNumber()),wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),Y&&t.jsx(g,{label:"BaseFee & BinStep",value:void 0!==p?.baseFeeRate?`${P(z(p?.baseFeeRate).mul(100).toNumber())} | ${p?.binStep??"--"}bps`:"--",wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}})]})]})}),t.jsxs(V,{w:"100%",mt:"20px",gap:"16px",children:[t.jsx(j,{data:"dlmm"===d?Ee:We,selected:u,handleSelectedChange:e=>m(e)}),x&&t.jsx(_,{imageUrls:A,currImageUrl:x,handleSelectedChange:f,loading:l})]}),t.jsx(D,{style:{mt:"28px"},card_id:"yield_card",filename:`${d}_${L?.symbol}_${T?.symbol}`})]}),t.jsx(Ne,{bgImageUrl:x,poolType:d,displayTokenA:L,displayTokenB:T,totalYield:n,yieldList:k,showBaseFee:Y,showFeeTier:w,showTokenYield:v,yieldData:p})]})}function He({totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:a}){const{poolYieldData:s,isDlmm:l,poolSearchLoading:r}=o(),p=s;return t.jsx(Ve,{totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:a,loading:r,isDlmm:l,yieldData:p})}function Ge(){const{poolSearchLoading:e,poolYieldData:i,isDlmm:n}=o(),a=i,s=a?.showReverse?a.coinB:a.coinA,l=a?.showReverse?a.coinA:a.coinB;return e?t.jsx(Je,{}):t.jsx(v,{tokenA:s,tokenB:l,feeDisplay:P(n?z(a?.baseFeeRate).mul(100).toNumber():z(a?.feeRate).div(h).toNumber()),bps:a?.binStep})}function Je(){return t.jsx(v,{tokenA:w.SUI,tokenB:w.USDC,feeDisplay:"0.1%",bps:25,isLoading:!0})}function qe(){const{totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:a}=function(){const{poolYieldData:e}=o(),t=e,{totalYield:i,feeYieldList:n,miningYieldList:a,farmingYieldList:s}=Ie(t);return{totalYield:i,feeYieldList:n,miningYieldList:a,farmingYieldList:s}}();return t.jsxs(V,{gap:{base:"12px",lg:"28px"},mt:{base:"4px",lg:"16px"},align:"flex-start",w:"100%",pt:{base:"8px",lg:"28px"},borderTop:"1px solid",borderColor:"primary.10",children:[t.jsx(Ge,{}),t.jsxs(G,{w:"100%",gap:{base:"16px",lg:"20px"},justify:"space-between",align:"flex-start",flexDir:{base:"column",lg:"row"},children:[t.jsx(Me,{totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:a}),t.jsx(He,{totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:a})]})]})}function Ke(){const{searchPoolAddress:i,searchWalletAddress:n,setSearchPoolAddress:a,setSearchWalletAddress:r,handleSearch:p,walletErrorString:c,poolErrorString:u,handleValueClick:m,poolSearchLoading:x}=s(),{poolYieldData:f,poolRecentSearchValues:g,clearPoolRecentSearchValues:h,removePoolRecentSearchValue:y,resetPoolInput:b}=o(),S=()=>p(i,n),j=f&&!("errorMessage"in f);e.useEffect(()=>()=>{b()},[b]);const{isApp:_}=d();return t.jsxs(t.Fragment,{children:[t.jsx(l,{walletInputOptions:{value:n,onEnter:S,onInputChange:r,errorSting:c,placeholder:"Wallet address here…"},poolInputOptions:{value:i,onEnter:S,onInputChange:a,errorSting:u,placeholder:"CLMM / DLMM pool address here…"},isLoading:x,handleEnter:S,wrapStyle:{flexDir:{base:"column",lg:"row"},gap:{base:"8px",lg:"14px"}}}),t.jsx(Y,{style:{mt:j?"0px":"16px"},direction:_?"column":j?"row":"column",values:g,handleClearAll:h,handleValueClick:m,handleDeleteValue:y}),x&&t.jsx(L,{w:"100%",h:"138px",children:t.jsx(O,{w:"16px",h:"16px",color:"primary",_hover:{"& svg":{fill:"primary"}}})}),j&&!x&&t.jsx(qe,{}),f&&"errorMessage"in f&&!x&&t.jsx(T,{style:{mt:"16px"},type:"fee"})]})}function Qe({totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:a}){const{positionSearching:s}=o();return t.jsx(Pe,{loading:s,totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:a})}function Xe({totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:a}){const{positionYieldData:s,isDlmm:l,positionSearching:r}=o(),p=s;return t.jsx(Ve,{totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:a,loading:r,isDlmm:l,yieldData:p})}function Ze(t){const{positionYieldData:i,currentPositionData:n}=o(),a=i,s=n,{suiClient:l}=M(),[r,p]=e.useState("");e.useEffect(()=>{(async e=>{if(a?.user)p(a.user);else try{const t=await l._client.getObject({id:e,options:{showOwner:!0,showContent:!0}});t?.data&&p(t.data.owner?.AddressOwner||"")}catch(t){}})(t||"")},[t]);const c=void 0!==s?.openActivateID&&void 0!==a?.coinA?.decimals&&void 0!==a?.coinB?.decimals?void 0!==a?.binStep?k.getPriceFromBinId(s.openActivateID,a.binStep,a.coinA.decimals,a.coinB.decimals):N.tickIndexToPrice(E(BigInt(s?.openActivateID)),a.coinA.decimals,a.coinB.decimals):void 0,d=a?.showReverse?a?.coinB:a?.coinA,u=a?.showReverse?a?.coinA:a?.coinB;return{addressOwner:r,openPrice:void 0!==c?a?.showReverse?k?.getReversePrice(c):c:void 0,displayTokenA:d,displayTokenB:u,data:"feeRate"in a?{...s,feeRate:a?.feeRate}:{...s,binStep:a?.binStep,baseFeeRate:a?.baseFeeRate}}}function et({positionId:e}){const{positionSearching:i}=o(),{addressOwner:n,openPrice:a,displayTokenA:s,displayTokenB:l,data:r}=Ze(e);return t.jsx(C,{loading:i,addressOwner:n,data:r,openPrice:a,displayTokenA:s,displayTokenB:l})}function tt(){const{totalYield:i,feeYieldList:n,miningYieldList:a,farmingYieldList:s}=function(){const{positionYieldData:t,currentPositionData:i}=o(),n=t,a=i,s=e.useMemo(()=>({...n,positions:n?.positions?.filter(e=>e?.positionID===a?.positionID)}),[a?.positionID,n]),{totalYield:l,feeYieldList:r,miningYieldList:p,farmingYieldList:c}=Ie(s);return{totalYield:l,feeYieldList:r,miningYieldList:p,farmingYieldList:c}}(),{currentPositionData:l}=o();return t.jsxs(V,{gap:{base:"12px",lg:"28px"},align:"flex-start",w:"100%",pt:{base:"8px",lg:"28px"},children:[t.jsx(et,{positionId:l?.positionID}),t.jsxs(G,{w:"100%",gap:{base:"16px",lg:"20px"},justify:"space-between",align:"flex-start",flexDir:{base:"column",lg:"row"},children:[t.jsx(Qe,{totalYield:i,feeYieldList:n,miningYieldList:a,farmingYieldList:s}),t.jsx(Xe,{totalYield:i,feeYieldList:n,miningYieldList:a,farmingYieldList:s})]})]})}function it(){const{activeTab:i,tabs:n,handleTabChange:a}=function(){const{positionYieldData:t,setCurrentPositionData:i}=o(),[n,a]=e.useState(),{isApp:s}=d(),l=t,r=l?.positions?.map(e=>({label:s?`#${$(e?.positionID)}`:`Position #${$(e?.positionID)}`,value:e?.positionID}));return e.useEffect(()=>{r&&r.length>0&&!n&&(a(r[0]),i(l.positions[0]))},[r]),{activeTab:n,tabs:r,handleTabChange:e=>{a(e);const t=l?.positions.find(t=>t.positionID===e.value);t&&i(t)}}}();return t.jsx(U,{activeTab:i,tabs:n,handleTabChange:a,children:t.jsx(tt,{},i?.value)})}function nt(){const{searchPositionId:i,setSearchPositionId:n,handleSearch:a,positionErrorString:s,positionSearching:l,handleValueClick:p}=r(),{positionYieldData:c,positionRecentSearchValues:u,clearPositionRecentSearchValues:m,removePositionRecentSearchValue:x,resetPositionInput:f}=o(),g=c&&!("errorMessage"in c);e.useEffect(()=>()=>{f()},[f]);const{isApp:h}=d();return t.jsxs(t.Fragment,{children:[t.jsx(W,{errorSting:s,placeholder:"CLMM / DLMM position or transaction address here…",value:i,onEnter:()=>a(i),onInputChange:n,isLoading:l}),t.jsx(Y,{style:{mt:g?"0px":"16px"},direction:h?"column":g?"row":"column",values:u,handleClearAll:m,handleValueClick:p,handleDeleteValue:x}),l&&t.jsx(L,{w:"100%",h:"138px",children:t.jsx(O,{w:"16px",h:"16px",color:"primary",_hover:{"& svg":{fill:"primary"}}})}),g&&!l&&t.jsx(it,{}),c&&"errorMessage"in c&&!l&&t.jsx(T,{style:{mt:"16px"},type:"fee"})]})}function ot(){const{poolYieldData:i,positionYieldData:a,searchTab:s,setSearchTab:l}=o(),r=i&&!("errorMessage"in i)||a&&!("errorMessage"in a);return e.useEffect(()=>()=>{l("pool")},[]),t.jsxs(V,{gap:"12px",w:{base:"100%",lg:r?"940px":"700px"},mt:{base:r?"20px":"80px",lg:r?"20px":"147px"},align:r?"flex-start":"center",children:[t.jsx(H,{color:"primary_text",fontSize:"20px",fontWeight:"500",children:"Yield"}),t.jsx(H,{mb:{base:"0px",lg:"8px"},color:"second_text",fontSize:"12px",lineHeight:"20px",children:"Track your yield from Cetus CLMM and DLMM, including claimed and unclaimed rewards. You can check an aggregate yield from pool or detailed yield from individual position. Generate a shareable yield card for easy reference."}),t.jsx(p,{}),t.jsx(n,{mt:"-4px"}),"pool"===s?t.jsx(Ke,{}):t.jsx(nt,{})]})}export{ot as default};
