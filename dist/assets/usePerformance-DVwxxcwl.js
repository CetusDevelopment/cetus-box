import{l as e,p as a,m as r,c as t,n as s,u as n,o as c,q as i}from"./suiClient-wWAkg6op.js";import{r as o}from"./index-CBgVo8fP.js";const u=e()(a(e=>({searchValue:"",setSearchValue:a=>{e({searchValue:a})},performanceData:void 0,setPerformanceData:a=>{e({performanceData:a})},positionData:void 0,setPositionData:a=>{e({positionData:a})},inputErrorString:void 0,setInputErrorString:a=>{e({inputErrorString:a})},searchLoading:!1,setSearchLoading:a=>{e({searchLoading:a})},getPositionLoading:!1,setGetPositionLoading:a=>{e({getPositionLoading:a})},recentSearchValues:[],setRecentSearchValues:a=>{e({recentSearchValues:a})},addRecentSearchValue:a=>{e(e=>{const t=r(a);return e.recentSearchValues.some(e=>r(e)===t)?e:{recentSearchValues:[a,...e.recentSearchValues]}})},removeRecentSearchValue:a=>{e(e=>({recentSearchValues:e.recentSearchValues.filter(e=>r(e)!==r(a))}))},clearRecentSearchValues:()=>{e({recentSearchValues:[]})},resetInput:()=>{e({searchValue:"",performanceData:void 0,inputErrorString:void 0,searchLoading:!1})}}),{name:"usePerformanceStore",partialize:e=>({recentSearchValues:e.recentSearchValues})}));function l(){const{inputErrorString:e,setInputErrorString:a,setSearchLoading:r,addRecentSearchValue:l,setPerformanceData:h,setSearchValue:d,searchValue:S,searchLoading:g,recentSearchValues:f,setRecentSearchValues:V,performanceData:p}=u(),{findSearchResult:m}=function(){const{fetchByApi:e}=t();return{findSearchResult:async a=>{try{const r=await e(s,"GET",{identifier:a});return r?.list&&r.list.length>0?{status:"success",data:r}:{status:"error",errorMessage:"missing data"}}catch(r){return null}}}}(),{addTokens:v}=n();o.useEffect(()=>{if(e&&S){(c(S)||i(S))&&a("")}S||a("")},[e,S]);const D=async e=>{if(e){if(c(e)||i(e)){a(""),r(!0);try{const a=await m(e);if(a&&"success"===a?.status){const r=a.data;h(r),l({search_value:e});const t=r.list[0]?.coinA,s=r.list[0]?.coinB,n=r.list?.map(e=>e.coinRewards).flat()||[];return v([t,s,...n]),a}{const e={errorMessage:"missing data"};return h(e),e}}catch(t){const e={errorMessage:"missing data"};return h(e),e}finally{r(!1)}}else a("Please enter a valid address")}};return{searchValue:S,setSearchValue:d,handleSearch:D,inputErrorString:e,searchLoading:g,handleValueClick:e=>{d(e.search_value),D(e.search_value);const a=f?.filter(a=>a?.search_value!==e?.search_value);V([e,...a])},hasPerformanceData:p&&!("errorMessage"in p)}}export{u as a,l as u};
