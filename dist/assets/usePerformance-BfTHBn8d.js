import{m as e,p as a,Z as r,n as t,d as s,o as n,q as c,r as o}from"./suiClient-DpGRkk4A.js";import{e as i}from"./index-Bi0RRSrW.js";const u=e()(a((e,a)=>({tokenMap:{},addTokens:t=>{const s=a().tokenMap;for(const e of t){const a=r(e.coinType,!1);s[a]||(e.coinType=a,s[a]=e)}e({tokenMap:{...s}})},getToken:e=>a().tokenMap[r(e,!1)]}),{name:"useTokenStore"})),l=e()(a(e=>({searchValue:"",setSearchValue:a=>{e({searchValue:a})},performanceData:void 0,setPerformanceData:a=>{e({performanceData:a})},positionData:void 0,setPositionData:a=>{e({positionData:a})},inputErrorString:void 0,setInputErrorString:a=>{e({inputErrorString:a})},searchLoading:!1,setSearchLoading:a=>{e({searchLoading:a})},getPositionLoading:!1,setGetPositionLoading:a=>{e({getPositionLoading:a})},recentSearchValues:[],setRecentSearchValues:a=>{e({recentSearchValues:a})},addRecentSearchValue:a=>{e(e=>{const r=t(a);return e.recentSearchValues.some(e=>t(e)===r)?e:{recentSearchValues:[a,...e.recentSearchValues]}})},removeRecentSearchValue:a=>{e(e=>({recentSearchValues:e.recentSearchValues.filter(e=>t(e)!==t(a))}))},clearRecentSearchValues:()=>{e({recentSearchValues:[]})},resetInput:()=>{e({searchValue:"",performanceData:void 0,inputErrorString:void 0,searchLoading:!1})}}),{name:"useTokenStore",partialize:e=>({recentSearchValues:e.recentSearchValues})}));function h(){const{inputErrorString:e,setInputErrorString:a,setSearchLoading:r,addRecentSearchValue:t,setPerformanceData:h,setSearchValue:d,searchValue:S,searchLoading:g,recentSearchValues:f,setRecentSearchValues:p,performanceData:V}=l(),{findSearchResult:m}=function(){const{fetchByApi:e}=s();return{findSearchResult:async a=>{try{const r=await e(n,"GET",{identifier:a});return r&&r?.list&&r.list.length>0?{status:"success",data:r}:{status:"error",error_message:"missing data"}}catch(r){return null}}}}(),{addTokens:v}=u();i.useEffect(()=>{if(e&&S){(c(S)||o(S))&&a("")}S||a("")},[e,S]);const k=async e=>{if(e){if(c(e)||o(e)){a(""),r(!0);try{const a=await m(e);if(a&&"success"===a?.status){const r=a.data;h(r),t({search_value:e});const s=r.list[0]?.coinA,n=r.list[0]?.coinB,c=r.list?.map(e=>e.coinRewards).flat()||[];return v([s,n,...c]),a}{const e={error_message:"missing data"};return h(e),e}}catch(s){const e={error_message:"missing data"};return h(e),e}finally{r(!1)}}else a("Please enter a valid address")}};return{searchValue:S,setSearchValue:d,handleSearch:k,inputErrorString:e,searchLoading:g,handleValueClick:e=>{d(e.search_value),k(e.search_value);const a=f?.filter(a=>a?.search_value!==e?.search_value);p([e,...a])},hasPerformanceData:V&&!("error_message"in V)}}export{l as a,u as b,h as u};
