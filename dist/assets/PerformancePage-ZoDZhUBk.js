import{r as e,j as t,B as a,I as n,g as s,u as r,f as l}from"./index-CXNoQfxr.js";import{a as i,D as o,u as p}from"./usePerformance-EXDZgkJK.js";import{u as c,H as x,C as d}from"./Icon-cdQY_hih.js";import{H as u,S as g,a as h,u as m,b as f,C as S,c as y,d as b,B as j,e as w,f as v,g as D,h as _,i as C,F as z,P,V as T,j as k,R as L,k as U,M as E,l as I,m as A}from"./PositionHeader-BuK_mp9k.js";import{b as V,z as B,f as $,u as R,c as W,G as M,d as O,e as H,t as F,g as N,h as q,i as Y,j as G,S as X,a as J,k as K,p as Q,m as Z,l as ee,n as te,s as ae,o as ne,q as se,r as re,v as le,T as ie}from"./suiClient-BTB45MoP.js";import{T as oe,V as pe,S as ce}from"./v-stack-2OAqoJZH.js";import"./button-CS7Uwb_6.js";import"./toaster-BDWjbpf3.js";function xe({total:e,currentPage:a,pageSize:n,onPageChange:s}){const r=Math.ceil(e/n);return t.jsxs(x,{gap:"8px",w:"100%",justifyContent:"center",children:[t.jsx(u,{w:"40px",h:"28px",borderRadius:"0px",onClick:()=>s(1),disabled:1===a,children:t.jsx(d,{name:"icon-icon_download",boxSize:"14px",rotate:"90deg",_hover:{fill:1===a?"second_text":"primary"}})}),t.jsx(u,{w:"40px",h:"28px",borderRadius:"0px",onClick:()=>s(a-1),disabled:1===a,children:t.jsx(d,{name:"icon-icon_arrow",boxSize:"16px",rotate:"225deg",_hover:{fill:1===a?"second_text":"primary"}})}),t.jsxs(oe,{fontSize:"12px",color:"primary_text",children:["1-",r," of ",a]}),t.jsx(u,{w:"40px",h:"28px",borderRadius:"0px",onClick:()=>s(a+1),disabled:a===r,children:t.jsx(d,{name:"icon-icon_arrow",boxSize:"16px",rotate:"45deg",_hover:{fill:a===r?"second_text":"primary"}})}),t.jsx(u,{w:"40px",h:"28px",borderRadius:"0px",onClick:()=>s(r),disabled:a===r,children:t.jsx(d,{name:"icon-icon_download",boxSize:"14px",rotate:"270deg",_hover:{fill:a===r?"second_text":"primary"}})})]})}const de={AddLiquidity:"Deposit",RemoveLiquidity:"Withdraw",CollectReward:"Claim Yield",OpenPosition:"Open Position",CollectFee:"Claim Yield"};function ue(){const{searchLoading:a,getPositionLoading:n}=i(),{total:s,currentPage:r,handlePageChange:l,pageSize:p,data:c}=function(){const{fetchByApi:t}=W(),{positionData:a,setGetPositionLoading:n}=i(),{addTokens:s}=R(),[r,l]=e.useState(),[p,c]=e.useState(0),[x,d]=e.useState(1),u=e.useRef(5),g=e.useEffectEvent(async(e,a=1)=>{n(!0);try{const r=await t(o,"GET",{position_id:e,offset:(a-1)*u?.current,limit:u?.current});if(r?.pool){const e=r?.showReverse?r?.coinB:r?.coinA,t=r?.showReverse?r?.coinA:r?.coinB,a=a=>a.coinType===e?.coinType?0:a.coinType===t?.coinType?1:2,n={...r,history:r?.history?.map(e=>({...e,eventData:e?.eventData?.sort((e,t)=>a(e)-a(t))??[]}))};l(n),c(r.totalEvent),s([r?.coinA,r?.coinB])}else l(void 0);n(!1)}catch(r){l(void 0),n(!1)}});e.useEffect(()=>{g(a?.positionID||"",x)},[a?.positionID,x]);const h=r?.history?.filter(e=>!["OpenPosition","ClosePosition"].includes(e?.eventType));return{total:p,eventRecord:r,currentPage:x,handlePageChange:e=>{d(e)},pageSize:u.current,data:h}}();return t.jsxs(pe,{w:"100%",alignItems:"start",gap:"0px",mt:{base:"8px",lg:"0px"},children:[t.jsx(oe,{color:"primary_text",fontSize:"14px",children:"Events"}),a||n?t.jsx(ge,{}):c?.map((e,a)=>t.jsx(he,{item:e,showBorder:a!==c.length-1},`${e?.tx}-${e?.eventType}`)),!a&&!!s&&s>0&&s>p&&t.jsx(xe,{total:s??0,currentPage:r,pageSize:p,onPageChange:l})]})}function ge(){return t.jsx(pe,{w:"100%",alignItems:"start",gap:"0px",children:[1,2,3,4,5].map(e=>t.jsxs(pe,{pt:"16px",pb:"16px",w:"100%",gap:"12px",borderBottom:"1px solid",borderColor:"primary.10",children:[t.jsxs(x,{w:"100%",justifyContent:"space-between",children:[t.jsx(g,{h:"20px",noOfLines:1,w:"100px"}),t.jsx(x,{gap:"2px",children:t.jsx(g,{h:"20px",noOfLines:1,w:"100px"})})]}),t.jsx(x,{w:"100%",children:t.jsxs(x,{gap:"16px",children:[t.jsxs(x,{children:[t.jsx(h,{size:"24px"}),t.jsx(g,{h:"32px",noOfLines:1,w:"60px"})]}),t.jsx(a,{w:"1px",h:"32px",bg:"primary.10"}),t.jsxs(x,{children:[t.jsx(h,{size:"24px"}),t.jsx(g,{h:"32px",noOfLines:1,w:"60px"})]})]})})]},e))})}function he(e){const{item:n,showBorder:s}=e,{getExplorerUrl:r}=m(),l=n.eventData?.filter(e=>e&&B(e?.rewardAmount).gt(0));return t.jsxs(pe,{pt:"16px",pb:"16px",w:"100%",gap:"12px",borderBottom:s?"1px solid":"none",borderColor:"primary.20",children:[t.jsxs(ce,{w:"100%",justifyContent:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},flexDir:{base:"column",lg:"row"},gap:{base:"2px",lg:"8px"},children:[t.jsx(oe,{bg:"second_text.10",pl:"8px",pr:"8px",h:"20px",lineHeight:"20px",color:"primary",fontSize:"12px",children:de[n?.eventType]}),t.jsx(M,{children:t.jsxs(u,{gap:"2px",onClick:()=>{window.open(r(n.tx,"tx"),"_blank")},bg:"transparent",h:"20px",_hover:{bg:"transparent","& p":{color:"primary"},"& svg":{fill:"primary"}},children:[t.jsx(oe,{color:"second_text",fontSize:"12px",children:O(n.timestamp)}),t.jsx(d,{name:"icon-icon_arrow",boxSize:"12px",_groupHover:{fill:"primary"}})]})})]}),t.jsx(x,{w:"100%",gap:"16px",children:l?.map((e,n)=>t.jsx(me,{rewardItem:e,children:l&&l.length-1!==n&&t.jsx(a,{w:"1px",h:"32px",bg:"primary.10"})},e.coinType))})]})}const me=({rewardItem:a,children:n})=>{const{getToken:s}=f(),[r,l]=e.useState(),i=e.useEffectEvent(async e=>{try{const t=await s(e);t&&l(t)}catch(t){}});return e.useEffect(()=>{i(a?.coinType)},[a?.coinType]),t.jsxs(t.Fragment,{children:[t.jsxs(x,{gap:"8px",pb:"4px",children:[t.jsx(S,{src:r?.logoURL||r?.icon,size:"24px"}),t.jsxs(pe,{alignItems:"start",gap:"4px",children:[t.jsxs(oe,{fontSize:"12px",color:"primary_text",children:[H(a?.rewardAmount)," ",F(r?.symbol)]}),t.jsxs(oe,{fontSize:"12px",color:"second_text",children:["(~$",H(a?.rewardUSD),")"]})]})]}),n]})};function fe(e){return e>50?"massive_gain":e>20?"strong_gain":e>5?"minor_gain":e>-5?"flat":e>-20?"minor_loss":e>-70?"strong_loss":"heavy_loss"}function Se({bgImageUrl:e,showOnCard:s,positionData:r,displayTokenA:l,displayTokenB:i,mainDisplay:o,color:p,pnlUSD:c,pnlPercentage:d,totalDepositUSD:u,showBaseFee:g}){return t.jsxs(pe,{id:"performance_card",w:"1280px",p:"50px",h:"720px",aspectRatio:"16 / 9",alignItems:"start",gap:"0px",justifyContent:"start",pos:"absolute",left:"-9999px",top:"-9999px",children:[t.jsx(n,{pos:"absolute",src:e,w:"100%",h:"100%",zIndex:"-11",top:"0",left:"0"}),t.jsxs(x,{w:"100%",justifyContent:"space-between",mb:"52px",children:[t.jsx(n,{src:"/images/share/dlmm_logo.png",h:"58px",w:"auto"}),t.jsxs(pe,{alignItems:"end",justifyContent:"start",gap:"0px",children:[t.jsx(oe,{color:"primary_text",fontSize:"26px",letterSpacing:"2",lineHeight:"38px",children:"Snapshot by cetusbox.zone"}),t.jsx(oe,{color:"primary_text",fontSize:"26px",letterSpacing:"2",lineHeight:"38px",children:N()})]})]}),s.includes("Duration")?t.jsxs(x,{justifyContent:"start",gap:"10px",mb:"24px",display:"flex",children:[t.jsx(oe,{color:"card_text",fontWeight:"500",fontSize:"33px",letterSpacing:"2",children:"Duration"}),t.jsx(oe,{color:"primary_text",fontSize:"33px",fontWeight:"500",letterSpacing:"2",children:q(r?.openPositionTimestamp||0,r?.closePositionTimestamp)})]}):t.jsx(a,{h:"33px",mb:"24px"}),t.jsxs(oe,{fontSize:"84px",color:"primary_text",fontWeight:"500",letterSpacing:"4",children:[F(l?.symbol),"-",F(i?.symbol)]}),t.jsx(oe,{fontSize:"33px",color:"card_text",mt:"58px",fontWeight:"500",letterSpacing:"2",children:"amount"===o?"Profit (USD)":"Profit (%)"}),t.jsx(oe,{fontWeight:"700",fontSize:"118px",letterSpacing:"7",color:p,mt:"20px",children:"amount"===o?c:d}),t.jsxs(x,{display:"flex",flexWrap:"wrap",w:"100%",justifyContent:"space-between",position:"absolute",bottom:"0",left:"0",p:"0 50px 50px",children:[s.includes("Total Deposit")&&t.jsx(y,{label:"Deposit",value:`$${H(u)}`,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}}),g&&t.jsx(y,{label:"Base fee",value:Y(B(r?.baseFeeRate).mul(100).toNumber()),wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}}),g&&t.jsx(y,{label:"Bin Step",value:r?.binStep||0,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}}),s.includes("pnl & amount")&&"amount"===o&&t.jsx(y,{label:"PNL",value:d,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}}),s.includes("pnl & amount")&&"pnl"===o&&t.jsx(y,{label:"Amount",value:c,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}})]})]})}function ye({totalDepositUSD:s,pnlUSD:r,pnlPercentage:l}){const{searchLoading:o,performanceData:p,positionData:c}=i(),[d,u]=e.useState("pnl"),[g,h]=e.useState(["Total Deposit","BaseFee & BinStep","Duration","pnl & amount"]),[m,f]=e.useState(),S=g.includes("BaseFee & BinStep"),C=[{label:"Total Deposit",value:"Total Deposit"},{label:"BaseFee & BinStep",value:"BaseFee & BinStep"},{label:"Duration",value:"Duration"},{label:"amount"===d?"%PnL":"$Amount",value:"pnl & amount"}],z=c?.showReverse?c?.coinB:c?.coinA,P=c?.showReverse?c?.coinA:c?.coinB,T=B(c?.pnlUSD).gte(0)?"primary":"primary_red",k=fe(B(c?.roi).mul(100).toNumber()),L=b(k);return e.useEffect(()=>{f(`/images/share/${k}_1.png`)},[k]),t.jsxs(j,{p:{base:"0px",lg:"22px 20px 20px"},border:"1px solid",borderColor:{base:"transparent",lg:"primary.10"},flex:"1",children:[t.jsxs(pe,{gap:"0px",w:"100%",children:[t.jsx(w,{w:"100%",aspectRatio:"16 / 9",h:{base:"auto",lg:"280px"},loading:o,children:t.jsxs(pe,{w:"100%",p:{base:"8px",lg:"20px"},h:{base:"auto",lg:"280px"},aspectRatio:"16 / 9",alignItems:"start",gap:"0px",justifyContent:"start",pos:"relative",children:[t.jsx(n,{pos:"absolute",src:m,w:"100%",h:"100%",zIndex:"-11",top:"0",left:"0"}),t.jsxs(x,{display:"flex",w:"100%",justifyContent:"space-between",mb:{base:"6px",lg:"24px"},children:[t.jsx(n,{h:"23px",w:"auto",src:"/images/share/dlmm_logo.png"}),t.jsxs(pe,{alignItems:"end",justifyContent:"start",gap:"0px",children:[t.jsx(oe,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:"Snapshot by cetusbox.zone"}),t.jsx(oe,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:N()})]})]}),g.includes("Duration")?t.jsxs(x,{justifyContent:"start",gap:"8px",mb:{base:"6px",lg:"12px"},display:"flex",children:[t.jsx(oe,{color:"card_text",fontWeight:"500",fontSize:"12px",children:"Duration"}),t.jsx(oe,{color:"primary_text",fontSize:"12px",fontWeight:"500",children:q(c?.openPositionTimestamp||0,c?.closePositionTimestamp)})]}):t.jsx(a,{h:"12px",mb:{base:"6px",lg:"20px"}}),t.jsxs(oe,{fontSize:"24px",color:"primary_text",fontWeight:"500",letterSpacing:"1",children:[F(z?.symbol),"-",F(P?.symbol)]}),t.jsx(oe,{fontSize:"12px",color:"card_text",mt:{base:"8px",lg:"24px"},fontWeight:"500",letterSpacing:"1",children:"amount"===d?"Profit (USD)":"Profit (%)"}),t.jsx(oe,{fontWeight:"700",fontSize:{base:"32px",lg:"46px"},color:T,mt:{base:"4px",lg:"8px"},children:"amount"===d?r:l}),t.jsxs(x,{display:"flex",flexWrap:"wrap",w:"100%",justifyContent:"space-between",position:"absolute",bottom:"0",left:"0",p:{base:"0 8px 8px",lg:"0 20px 20px"},children:[g.includes("Total Deposit")&&t.jsx(y,{label:"Deposit",value:`$${H(s)}`,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),S&&t.jsx(y,{label:"Base fee",value:Y(B(c?.baseFeeRate).mul(100).toNumber()),wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),S&&t.jsx(y,{label:"Bin Step",value:c?.binStep||0,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),g.includes("pnl & amount")&&"amount"===d&&t.jsx(y,{label:"PNL",value:l,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),g.includes("pnl & amount")&&"pnl"===d&&t.jsx(y,{label:"Amount",value:r,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}})]})]})}),t.jsxs(pe,{w:"100%",mt:"20px",gap:"16px",children:[t.jsx(be,{currType:d,handleMainDisplayChange:u}),t.jsx(v,{data:C,selected:g,handleSelectedChange:e=>{h(e)}}),m&&t.jsx(D,{imageUrls:L,currImageUrl:m,handleSelectedChange:f,loading:o})]}),t.jsx(_,{style:{mt:"28px"},card_id:"performance_card",filename:`dlmm_${z?.symbol}_${P?.symbol}`})]}),t.jsx(Se,{bgImageUrl:m,showOnCard:g,positionData:c,displayTokenA:z,displayTokenB:P,mainDisplay:d,color:T,pnlUSD:r,pnlPercentage:l,totalDepositUSD:s,showBaseFee:S})]})}function be(e){const{currType:a,handleMainDisplayChange:n}=e;return t.jsxs(x,{w:"100%",justifyContent:"space-between",children:[t.jsx(oe,{fontSize:"12px",color:"second_text",children:"Main Display"}),t.jsxs(x,{justifyContent:"end",children:[t.jsx(oe,{cursor:"pointer",fontSize:"12px",color:"amount"===a?"primary":"second_text",onClick:()=>n("amount"),children:"$Amount"}),t.jsx(C,{orientation:"vertical",height:"8px",borderColor:"second_text.50"}),t.jsx(oe,{cursor:"pointer",fontSize:"12px",color:"pnl"===a?"primary":"second_text",onClick:()=>n("pnl"),children:"%PnL"})]})]})}function je(){const{positionData:t}=i(),{suiClient:a}=G(),[n,s]=e.useState("");e.useEffect(()=>{(async e=>{if(t?.user)s(t.user);else try{const t=await a._client.getObject({id:e,options:{showOwner:!0}});t?.data&&s(t.data.owner?.AddressOwner||"")}catch(n){}})(t?.positionID||"")},[t?.positionID]);const r=void 0!==t?.openActivateID&&void 0!==t?.binStep&&void 0!==t?.coinA?.decimals&&void 0!==t?.coinB?.decimals?z.getPriceFromBinId(t.openActivateID,t.binStep,t.coinA.decimals,t.coinB.decimals):void 0,l=t?.showReverse?t?.coinB:t?.coinA,o=t?.showReverse?t?.coinA:t?.coinB;return{addressOwner:n,openPrice:void 0!==r?t?.showReverse?z?.getReversePrice(r):r:void 0,displayTokenA:l,displayTokenB:o,positionData:t}}function we(){const{searchLoading:e}=i(),{addressOwner:a,openPrice:n,displayTokenA:s,displayTokenB:r,positionData:l}=je();return t.jsx(P,{loading:e,addressOwner:a,data:l,openPrice:n,displayTokenA:s,displayTokenB:r})}function ve({totalDepositUSD:e,totalYieldUSD:a,totalWithdrawUSD:n,currentPositionUSD:s,pnlUSD:r,pnlPercentage:l}){const{searchLoading:o,positionData:p}=i(),c=B(p?.pnlUSD).gte(0)?"primary":"primary_red";return t.jsx(j,{p:{base:"16px",lg:"20px"},children:t.jsxs(pe,{w:"100%",alignItems:"start",gap:"10px",children:[t.jsx(oe,{color:"primary_text",fontSize:"14px",children:"Profit and Loss"}),t.jsx(j,{p:"0px",mt:"4px",bg:"secondary_background.10",borderColor:"transparent",children:t.jsxs(x,{h:"76px",w:"100%",justifyContent:"space-between",children:[t.jsx(x,{justifyContent:"center",w:"50%",children:t.jsx(T,{label:"$Amount",value:r,wrapStyle:{alignItems:"center",gap:"4px"},valueStyle:{fontSize:"16px",color:c},isLoading:o})}),t.jsx(x,{justifyContent:"center",w:"50%",children:t.jsx(T,{label:"%PnL",value:l,wrapStyle:{alignItems:"center",gap:"4px"},valueStyle:{fontSize:"16px",color:c},isLoading:o})})]})}),t.jsx(y,{label:"Current Position",value:`$${H(s)}`,wrapStyle:{mt:"6px"},isLoading:o}),t.jsx(y,{label:"Total Deposit",value:`$${H(e)}`,isLoading:o}),t.jsx(y,{label:"Total Yield",value:`$${H(a)}`,isLoading:o}),t.jsx(y,{label:"Total Withdrawal",value:`$${H(n)}`,isLoading:o})]})})}function De(){const{totalDepositUSD:e,totalYieldUSD:a,totalWithdrawUSD:n,currentPositionUSD:s,pnlUSD:r,pnlPercentage:l}=function(){const{positionData:e}=i(),t=B(e?.historicalData?.totalDepositAUSD).plus(e?.historicalData?.totalDepositBUSD).toString(),a=B(e?.historicalData?.totalClaimedFeeAUSD).plus(e?.historicalData?.totalClaimedFeeBUSD).plus(e?.historicalData?.totalClaimedRewards?.reduce((e,t)=>e.plus(t?.rewardUSD),B(0))).plus(e?.currentData?.unclaimedFeeAUSD)?.plus(e?.currentData?.unclaimedFeeBUSD)?.plus(e?.currentData?.unclaimedRewardsUSD?.reduce((e,t)=>e.plus(t?.unClaimedUSD),B(0))).toString();return{totalDepositUSD:t,totalYieldUSD:a,totalWithdrawUSD:B(e?.historicalData?.totalWithdrawAUSD).plus(e?.historicalData?.totalWithdrawBUSD).toString(),currentPositionUSD:B(e?.currentData?.coinAUSD).plus(e?.currentData?.coinBUSD).toString(),pnlUSD:$(e?.pnlUSD),pnlPercentage:$(B(e?.roi||0).times(100).toNumber(),"percentage")}}(),{isApp:o}=c();return t.jsxs(pe,{gap:"0px",w:"100%",mt:"20px",children:[t.jsx(we,{}),t.jsxs(ce,{flexDir:{base:"column",lg:"row"},mt:{base:"28px",lg:"18px"},gap:{base:"16px",lg:"20px"},w:"100%",justifyContent:{base:"center",lg:"space-between"},alignItems:{base:"center",lg:"start"},children:[t.jsxs(pe,{w:{base:"100%",lg:"380px"},minW:{base:"100%",lg:"380px"},gap:"20px",children:[t.jsx(ve,{totalDepositUSD:e,totalYieldUSD:a,totalWithdrawUSD:n,currentPositionUSD:s,pnlUSD:r,pnlPercentage:l}),!o&&t.jsx(ue,{})]}),t.jsx(ye,{totalDepositUSD:e,pnlUSD:r,pnlPercentage:l}),o&&t.jsx(ue,{})]})]})}function _e(){const{activeTab:a,tabs:n,handleTabChange:s}=function(){const{performanceData:t,setPositionData:a}=i(),[n,s]=e.useState(),{isApp:r}=c(),l=t,o=l?.list?.map(e=>({label:r?`#${V(e?.positionID)}`:`Position #${V(e?.positionID)}`,value:e?.positionID}));return e.useEffect(()=>{o&&o.length>0&&!n&&(s(o[0]),a(l.list[0]))},[o]),{activeTab:n,tabs:o,handleTabChange:e=>{s(e);const t=l?.list.find(t=>t.positionID===e.value);t&&a(t)}}}();return t.jsx(k,{activeTab:a,tabs:n,handleTabChange:s,children:t.jsx(De,{},a?.value)})}function Ce({children:a}){const{searchValue:n,setSearchValue:s,handleSearch:r,inputErrorString:l,searchLoading:o,handleValueClick:x,hasPerformanceData:d}=p(),{performanceData:u,recentSearchValues:g,clearRecentSearchValues:h,removeRecentSearchValue:m,resetInput:f}=i();e.useEffect(()=>()=>{f()},[f]);const{isApp:S}=c();return t.jsxs(pe,{gap:"12px",w:{base:"100%",lg:d?"940px":"520px"},mt:{base:d?"20px":"80px",lg:d?"32px":"147px"},children:[t.jsx(oe,{alignSelf:d?"start":"center",color:"primary_text",fontSize:"20px",fontWeight:"500",children:"Performance"}),t.jsx(oe,{mb:"8px",color:"second_text",fontSize:"12px",lineHeight:"20px",children:"Track your Cetus DLMM profits in style. Enter an NFT address, or any related transaction such as deposit, remove, or claim to view and share your performance."}),a,t.jsx(X,{errorSting:l,placeholder:"DLMM position or transaction address here…",value:n,onEnter:()=>r(n),onInputChange:s,isLoading:o}),t.jsx(L,{style:{mt:d?"0px":"16px"},direction:S?"column":d?"row":"column",values:g,handleClearAll:h,handleValueClick:x,handleDeleteValue:m}),o&&t.jsx(U,{h:"138px",children:t.jsx(J,{w:"16px",h:"16px",color:"primary",_hover:{"& svg":{fill:"primary"}}})}),d&&!o&&t.jsx(_e,{}),u&&"errorMessage"in u&&!o&&t.jsx(E,{style:{mt:"16px"},type:"performance"})]})}const ze=K()(Q(e=>({searchValue:"",setSearchValue:t=>{e({searchValue:t})},marginData:void 0,setMarginData:t=>{e({marginData:t})},inputErrorString:void 0,setInputErrorString:t=>{e({inputErrorString:t})},searchLoading:!1,setSearchLoading:t=>{e({searchLoading:t})},eventsLoading:!1,setEventsLoading:t=>{e({eventsLoading:t})},recentSearchValues:[],setRecentSearchValues:t=>{e({recentSearchValues:t})},addRecentSearchValue:t=>{e(e=>{const a=ee(t);return e.recentSearchValues.some(e=>ee(e)===a)?e:{recentSearchValues:[t,...e.recentSearchValues]}})},removeRecentSearchValue:t=>{e(e=>({recentSearchValues:e.recentSearchValues.filter(e=>ee(e)!==ee(t))}))},clearRecentSearchValues:()=>{e({recentSearchValues:[]})},totalEvent:0,setTotalEvent:t=>{e({totalEvent:t})},resetInput:()=>{e({searchValue:"",marginData:void 0,inputErrorString:void 0,searchLoading:!1,eventsLoading:!1,totalEvent:0})}}),{name:"useMarginStore",version:1,migrate:(e,t)=>{if(!e)return{recentSearchValues:[]};if(0===t||!("version"in e)){const t=e.recentSearchValues||[],a=Z(t);return{...e,recentSearchValues:a}}return e},partialize:e=>({recentSearchValues:e.recentSearchValues})}));function Pe(){const{fetchByApi:e}=W();return{findSearchResult:async(t,a)=>{try{const n=te(t)?{tx:t,limit:5,offset:a}:{position_id:t,limit:5,offset:a},s=await e("/v3/sui/margin_trading/pnl","GET",n);return s?.list&&s.list.length>0?{status:"success",data:ae(s)}:{status:"error",errorMessage:"missing data"}}catch(n){return null}}}}function Te({leverage:e,isLong:a,...n}){return t.jsx(x,{color:a?"primary":"primary_red",bg:a?"primary.10":"primary_red.10",p:"2px 4px",borderRadius:"8px",...n,children:`${a?"Long":"Short"} ${H(e)}x`})}function ke({bgImageUrl:e,showOnCard:s,openTimestamp:r,closeTimestamp:l,displayTokenA:i,displayTokenB:o,mainDisplay:p,color:c,pnlUSD:d,pnlPercentage:u,avgEntryPrice:g,marketPrice:h}){const{marginData:m}=ze(),f=m;return t.jsxs(pe,{id:"margin_trade_card",w:"1280px",p:"50px",h:"720px",aspectRatio:"16 / 9",alignItems:"start",gap:"0px",justifyContent:"start",pos:"absolute",left:"-9999px",top:"-9999px",children:[t.jsx(n,{pos:"absolute",src:e,w:"100%",h:"100%",zIndex:"-11",top:"0",left:"0"}),t.jsxs(x,{w:"100%",justifyContent:"space-between",mb:"52px",children:[t.jsx(n,{src:"/images/share/cetus_margin_logo.png",h:"58px",w:"auto"}),t.jsxs(pe,{alignItems:"end",justifyContent:"start",gap:"0px",children:[t.jsx(oe,{color:"primary_text",fontSize:"26px",letterSpacing:"2",lineHeight:"38px",children:"Snapshot by cetusbox.zone"}),t.jsx(oe,{color:"primary_text",fontSize:"26px",letterSpacing:"2",lineHeight:"38px",children:N()})]})]}),void 0!==r?t.jsxs(x,{justifyContent:"start",gap:"10px",mb:"24px",display:"flex",children:[t.jsx(oe,{color:"card_text",fontWeight:"500",fontSize:"33px",letterSpacing:"2",children:"Duration"}),t.jsx(oe,{color:"primary_text",fontSize:"33px",fontWeight:"500",letterSpacing:"2",children:q(r||0,l)})]}):t.jsx(a,{h:"74px",mb:"24px"}),t.jsx(Te,{leverage:f?.leverage,isLong:f?.isLong,fontSize:"42px",bg:"transparent",p:"0",mb:"24px"}),t.jsx(x,{children:t.jsxs(oe,{fontSize:"84px",color:"primary_text",fontWeight:"500",letterSpacing:"1",children:[F(i?.symbol),"-",F(o?.symbol)]})}),t.jsx(oe,{fontSize:"33px",color:"card_text",mt:"32px",fontWeight:"500",letterSpacing:"2",children:"amount"===p?"Profit (USD)":"Profit (%)"}),t.jsx(oe,{fontWeight:"700",fontSize:"118px",letterSpacing:"7",color:c,mt:"20px",children:"amount"===p?d:u}),t.jsxs(x,{display:"flex",flexWrap:"wrap",w:"100%",justifyContent:"space-between",position:"absolute",bottom:"0",left:"0",p:"0 50px 50px",children:[s.includes("Avg.Entry Price")&&t.jsx(y,{label:"Avg.Entry Price",value:`${se(g)}`,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"30px",letterSpacing:"2"},valueStyle:{fontSize:"30px",letterSpacing:"2"},skeletonStyle:{h:"30px",w:"200px"}}),s.includes("Market Price")&&t.jsx(y,{label:"Market Price",value:`${se(h)}`,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"30px",letterSpacing:"2"},valueStyle:{fontSize:"30px",letterSpacing:"2"},skeletonStyle:{h:"30px",w:"200px"}}),s.includes("pnl & amount")&&"amount"===p&&t.jsx(y,{label:"PNL",value:u,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"30px",letterSpacing:"2"},valueStyle:{fontSize:"30px",letterSpacing:"2"},skeletonStyle:{h:"30px",w:"200px"}}),s.includes("pnl & amount")&&"pnl"===p&&t.jsx(y,{label:"Amount",value:d,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}})]})]})}function Le(){const{searchLoading:s,marginData:r}=ze(),l=r,[i,o]=e.useState("pnl"),[p,c]=e.useState(["Avg.Entry Price","Market Price","pnl & amount"]),[d,u]=e.useState(),g=[{label:"Avg.Entry Price",value:"Avg.Entry Price"},{label:"Market Price",value:"Market Price"},{label:"amount"===i?"%PnL":"$Amount",value:"pnl & amount"}],h=l?.base,m=l?.quote,f=B(l?.pnl).gte(0)?"primary":"primary_red",S=fe(B(l?.pnlPercentage).mul(100).toNumber()),C=b(S);e.useEffect(()=>{u(`/images/share/${S}_1.png`)},[S]);const z=l?.openTime,P=l?.list?.find(e=>"close_position"===e?.type)?.timestamp,T=$(l?.pnl||0),k=$(B(l?.pnlPercentage).times(100).toNumber(),"percentage");return t.jsxs(j,{p:{base:"0px",lg:"22px 20px 20px"},border:"1px solid",borderColor:{base:"transparent",lg:"primary.10"},flex:"1",children:[t.jsxs(pe,{gap:"0px",w:"100%",children:[t.jsx(w,{w:"100%",aspectRatio:"16 / 9",h:{base:"auto",lg:"280px"},loading:s,children:t.jsxs(pe,{w:"100%",p:{base:"8px",lg:"20px"},h:{base:"auto",lg:"280px"},aspectRatio:"16 / 9",alignItems:"start",gap:"0px",justifyContent:"start",pos:"relative",children:[t.jsx(n,{pos:"absolute",src:d,w:"100%",h:"100%",zIndex:"-11",top:"0",left:"0"}),t.jsxs(x,{display:"flex",w:"100%",justifyContent:"space-between",mb:{base:"6px",lg:"24px"},children:[t.jsx(n,{h:"23px",w:"auto",src:"/images/share/cetus_margin_logo.png"}),t.jsxs(pe,{alignItems:"end",justifyContent:"start",gap:"0px",children:[t.jsx(oe,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:"Snapshot by cetusbox.zone"}),t.jsx(oe,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:N()})]})]}),void 0!==z?t.jsxs(x,{justifyContent:"start",gap:"8px",mb:{base:"6px",lg:"8px"},display:"flex",children:[t.jsx(oe,{color:"card_text",fontWeight:"500",fontSize:"12px",children:"Duration"}),t.jsx(oe,{color:"primary_text",fontSize:"12px",fontWeight:"500",children:q(z||0,P)})]}):t.jsx(a,{h:"12px",mb:{base:"6px",lg:"8px"}}),t.jsx(Te,{leverage:l?.leverage,isLong:l?.isLong,bg:"transparent",p:"0",mb:{base:"6px",lg:"8px"}}),t.jsx(x,{children:t.jsxs(oe,{fontSize:"24px",color:"primary_text",fontWeight:"500",letterSpacing:"1",children:[F(h?.symbol),"-",F(m?.symbol)]})}),t.jsx(oe,{fontSize:"12px",color:"card_text",mt:{base:"4px",lg:"12px"},fontWeight:"500",letterSpacing:"1",children:"amount"===i?"Profit (USD)":"Profit (%)"}),t.jsx(oe,{fontWeight:"700",fontSize:{base:"32px",lg:"46px"},color:f,mt:{base:"4px",lg:"8px"},children:"amount"===i?T:k}),t.jsxs(x,{display:"flex",flexWrap:"wrap",w:"100%",justifyContent:"space-between",position:"absolute",bottom:"0",left:"0",rowGap:{base:"2px",lg:"8px"},p:{base:"0 8px 8px",lg:"0 20px 20px"},children:[p.includes("Avg.Entry Price")&&t.jsx(y,{label:"Avg.Entry Price",value:`${se(l?.avgEntryPrice)}`,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),p.includes("Market Price")&&t.jsx(y,{label:"Market Price",value:`${se(l?.marketPrice)}`,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),p.includes("pnl & amount")&&"amount"===i&&t.jsx(y,{label:"PNL",value:k,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),p.includes("pnl & amount")&&"pnl"===i&&t.jsx(y,{label:"Amount",value:T,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}})]})]})}),t.jsxs(pe,{w:"100%",mt:"20px",gap:"16px",children:[t.jsx(Ue,{currType:i,handleMainDisplayChange:o}),t.jsx(v,{data:g,selected:p,handleSelectedChange:e=>{c(e)}}),d&&t.jsx(D,{imageUrls:C,currImageUrl:d,handleSelectedChange:u,loading:s})]}),t.jsx(_,{style:{mt:"28px"},card_id:"margin_trade_card",filename:`margin_trade_${h?.symbol}_${m?.symbol}`})]}),t.jsx(ke,{avgEntryPrice:l?.avgEntryPrice,marketPrice:l?.marketPrice,openTimestamp:z,closeTimestamp:P,bgImageUrl:d,showOnCard:p,displayTokenA:h,displayTokenB:m,mainDisplay:i,color:f,pnlUSD:T,pnlPercentage:k})]})}function Ue(e){const{currType:a,handleMainDisplayChange:n}=e;return t.jsxs(x,{w:"100%",justifyContent:"space-between",children:[t.jsx(oe,{fontSize:"12px",color:"second_text",children:"Main Display"}),t.jsxs(x,{justifyContent:"end",children:[t.jsx(oe,{cursor:"pointer",fontSize:"12px",color:"amount"===a?"primary":"second_text",onClick:()=>n("amount"),children:"$Amount"}),t.jsx(C,{orientation:"vertical",height:"8px",borderColor:"second_text.50"}),t.jsx(oe,{cursor:"pointer",fontSize:"12px",color:"pnl"===a?"primary":"second_text",onClick:()=>n("pnl"),children:"%PnL"})]})]})}const Ee=(Ie=e.useEffect,function(t,a){var n=e.useRef(!1);Ie(function(){return function(){n.current=!1}},[]),Ie(function(){if(n.current)return t();n.current=!0},a)});var Ie;function Ae(){const{searchLoading:a,eventsLoading:n}=ze(),{total:s,currentPage:r,handlePageChange:l,pageSize:i,data:o}=function(){const{marginData:t,setEventsLoading:a,setMarginData:n,setTotalEvent:s,totalEvent:r}=ze(),{findSearchResult:l}=Pe(),i=t,[o,p]=e.useState(1),c=e.useRef(5),x=e.useEffectEvent(async(e,t=1)=>{a(!0);try{const r=await l(e,(t-1)*c?.current);if(r&&"success"===r?.status){const e=r.data;n(e),s(e?.totalEvent||0)}a(!1)}catch(r){a(!1)}});Ee(()=>{i?.positionId&&x(i?.positionId||"",o)},[i?.positionId,o]);const d=i?.list;return{total:r,currentPage:o,handlePageChange:e=>{p(e)},pageSize:c.current,data:d}}();return t.jsxs(pe,{w:"100%",alignItems:"start",gap:"0px",mt:{base:"8px",lg:"0px"},children:[t.jsx(oe,{color:"primary_text",fontSize:"14px",children:"Events"}),a||n?t.jsx(Ve,{}):o?.map((e,a)=>t.jsx($e,{item:e,showBorder:a!==o.length-1},`${e?.tx}-${e?.type}`)),!a&&!!s&&s>0&&s>i&&t.jsx(xe,{total:s??0,currentPage:r,pageSize:i,onPageChange:l})]})}function Ve(){return t.jsx(pe,{w:"100%",alignItems:"start",gap:"0px",children:[1,2,3,4,5].map(e=>t.jsxs(pe,{pt:"16px",pb:"16px",w:"100%",gap:"12px",borderBottom:"1px solid",borderColor:"primary.10",children:[t.jsxs(x,{w:"100%",justifyContent:"space-between",children:[t.jsx(g,{h:"20px",noOfLines:1,w:"100px"}),t.jsx(x,{gap:"2px",children:t.jsx(g,{h:"20px",noOfLines:1,w:"100px"})})]}),t.jsx(x,{w:"100%",children:t.jsx(g,{h:"24px",noOfLines:1,w:"100px"})})]},e))})}const Be=e=>["open_position","close_position"].includes(e)?{color:"primary_blue",bg:"primary_blue.10"}:["increase_leverage","decrease_leverage","increase_size","decrease_size","top_up_collateral"].includes(e)?{color:"primary",bg:"primary.10"}:{color:"primary_yellow",bg:"primary_yellow.10"};function $e(e){const{item:a,showBorder:n}=e,{getExplorerUrl:s}=m();return t.jsxs(pe,{pt:"16px",pb:"16px",w:"100%",gap:"12px",borderBottom:n?"1px solid":"none",borderColor:"primary.20",children:[t.jsxs(ce,{w:"100%",justifyContent:{base:"center",lg:"space-between"},align:{base:"flex-start",lg:"center"},flexDir:{base:"column",lg:"row"},gap:{base:"2px",lg:"8px"},children:[t.jsx(oe,{...Be(a?.type),pl:"8px",pr:"8px",h:"20px",lineHeight:"20px",fontSize:"12px",whiteSpace:"nowrap",letterSpacing:"0.5px",children:re(a?.type)}),t.jsx(M,{children:t.jsxs(u,{gap:"2px",onClick:()=>{window.open(s(a.tx,"tx"),"_blank")},bg:"transparent",h:"20px",_hover:{bg:"transparent","& p":{color:"primary"},"& svg":{fill:"primary"}},children:[t.jsx(oe,{color:"second_text",fontSize:"12px",children:O(a.timestamp)}),t.jsx(d,{name:"icon-icon_arrow",boxSize:"12px",_groupHover:{fill:"primary"}})]})})]}),t.jsx(pe,{w:"100%",gap:"8px",align:"flex-start",children:a?.type?.includes("leverage")?t.jsxs(x,{children:[t.jsx(oe,{fontSize:"12px",color:"primary_text",children:void 0!==a?.oldLeverage?`${H(a?.oldLeverage)}x`:"--"}),t.jsx(d,{name:"icon-icon_arrow",boxSize:"10px",rotate:"45deg",color:"primary_text",_groupHover:{fill:"primary_text"}}),t.jsx(oe,{fontSize:"12px",color:"primary_text",children:void 0!==a?.newLeverage?`${H(a?.newLeverage)}x`:"--"})]}):a?.tokens?.map((e,a)=>t.jsxs(x,{gap:"8px",children:[t.jsx(S,{src:e?.icon,size:"24px"}),t.jsxs(oe,{fontSize:"12px",color:"primary_text",children:[H(e?.amount)," ",F(e?.symbol)]}),t.jsxs(oe,{fontSize:"12px",color:"second_text",children:["(~$",H(e?.amountUsd),")"]})]},`${e?.coinType}-${a}`))})]})}function Re(){const{getExplorerUrl:e}=m(),{searchLoading:a}=ze(),{baseToken:n,quoteToken:s,entryPrice:r,marketPrice:l,netValue:i,positionId:o,openTimestamp:p,isLong:c,leverage:d}=function(){const{marginData:e}=ze(),t=e,a=t?.base,n=t?.quote,s=t?.avgEntryPrice,r=t?.marketPrice,l=t?.netValue,i=t?.positionId,o=t?.openTime,p=t?.isLong,c=t?.leverage;return{baseToken:a,quoteToken:n,entryPrice:s,marketPrice:r,netValue:l,positionId:i,openTimestamp:o,isLong:p,leverage:c}}();return a?t.jsx(I,{}):t.jsxs(ce,{flexDir:{base:"column",lg:"row"},gap:"16px",w:"100%",justifyContent:"space-between",alignItems:{base:"start",lg:"end"},children:[t.jsxs(pe,{alignItems:"start",gap:{base:"8px",lg:"12px"},children:[t.jsxs(oe,{color:"second_text",fontSize:"12px",children:["Opened in: ",p?O(p):"-"]}),t.jsxs(x,{children:[t.jsx(A,{tokenA:n,tokenB:s,separator:"/"}),t.jsx(Te,{isLong:c,leverage:d})]})]}),t.jsxs(ce,{gap:{base:"12px",lg:"32px"},flexDir:{base:"column",lg:"row"},w:{base:"100%",lg:"auto"},children:[t.jsx(T,{wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},label:"Avg.Entry Price",value:r?se(r):"--"}),t.jsx(T,{wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},label:"Market Price",value:l?se(l||0):"--"}),t.jsx(T,{wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},label:"Size",value:i?le(i||0):"--"}),t.jsx(T,{wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},label:"Position ID",value:o,onClickLink:()=>{window.open(e(o,"nftAddress"),"_blank")}})]})]})}function We(){const{searchLoading:e,marginData:a}=ze(),n=a,s=B(n?.pnl).gte(0)?"primary":"primary_red",r=$(n?.pnl),l=$(B(n?.pnlPercentage||0).times(100).toNumber(),"percentage");return t.jsx(j,{p:{base:"16px",lg:"20px"},children:t.jsxs(pe,{w:"100%",alignItems:"start",gap:"10px",children:[t.jsx(oe,{color:"primary_text",fontSize:"14px",children:"Profit and Loss"}),t.jsx(j,{p:"0px",mt:"4px",bg:"secondary_background.10",borderColor:"transparent",children:t.jsxs(x,{h:"76px",w:"100%",justifyContent:"space-between",children:[t.jsx(x,{justifyContent:"center",w:"50%",children:t.jsx(T,{label:"$Amount",value:r,wrapStyle:{alignItems:"center",gap:"4px"},valueStyle:{fontSize:"16px",color:s},isLoading:e})}),t.jsx(x,{justifyContent:"center",w:"50%",children:t.jsx(T,{label:"%PnL",value:l,wrapStyle:{alignItems:"center",gap:"4px"},valueStyle:{fontSize:"16px",color:s},isLoading:e})})]})})]})})}function Me(){return t.jsxs(pe,{gap:"0px",w:"100%",mt:"20px",children:[t.jsx(Re,{}),t.jsxs(ce,{flexDir:{base:"column",lg:"row"},mt:{base:"28px",lg:"18px"},gap:{base:"16px",lg:"20px"},w:"100%",justifyContent:{base:"center",lg:"space-between"},alignItems:{base:"center",lg:"start"},children:[t.jsxs(pe,{w:{base:"100%",lg:"380px"},minW:{base:"100%",lg:"380px"},gap:"20px",children:[t.jsx(We,{}),t.jsx(Ae,{})]}),t.jsx(Le,{})]})]})}function Oe({children:a}){const{searchValue:n,setSearchValue:l,inputErrorString:i,searchLoading:o,handleValueClick:p,hasMarginData:x}=function(){const{inputErrorString:t,setInputErrorString:a,setSearchLoading:n,addRecentSearchValue:l,setMarginData:i,setSearchValue:o,searchValue:p,searchLoading:c,recentSearchValues:x,setRecentSearchValues:d,marginData:u,setTotalEvent:g}=ze(),{findSearchResult:h}=Pe(),{identifier:m}=s(),{addTokens:f}=R(),S=r();e.useEffect(()=>{t&&p&&(te(p)||ne(p))&&a(""),p||a("")},[t,p]);const y=async e=>{if(e)if(te(e)||ne(e)){a(""),n(!0);try{const t=await h(e,0);if(t&&"success"===t?.status){const a=t.data;i(a),l({searchValue:e});const n=a?.base,s=a?.quote;return f([n,s]),g(a?.totalEvent||0),t}{const e={errorMessage:"missing data"};return i(e),e}}catch(t){const e={errorMessage:"missing data"};return i(e),e}finally{n(!1)}}else a("Please enter a valid address")};return e.useEffect(()=>{m&&(o(m),y(m))},[m]),{searchValue:p,setSearchValue:o,handleSearch:y,inputErrorString:t,searchLoading:c,handleValueClick:e=>{o(e.searchValue),S(`/performance/margin/${e.searchValue}`);const t=x?.filter(t=>t?.searchValue!==e?.searchValue);d([e,...t])},hasMarginData:u&&!("errorMessage"in u)}}(),{marginData:d,recentSearchValues:u,clearRecentSearchValues:g,removeRecentSearchValue:h,resetInput:m}=ze(),f=r();e.useEffect(()=>()=>{m()},[m]);const{isApp:S}=c();return t.jsxs(pe,{gap:"12px",w:{base:"100%",lg:x?"940px":"520px"},mt:{base:x?"20px":"80px",lg:x?"32px":"147px"},children:[t.jsx(oe,{alignSelf:x?"start":"center",color:"primary_text",fontSize:"20px",fontWeight:"500",children:"Performance"}),t.jsx(oe,{mb:"8px",color:"second_text",fontSize:"12px",lineHeight:"20px",children:"Track your Cetus margin trading PnL in one place. Enter your position address or any related transaction such as open, close, modify to view and share your margin trading performance."}),a,t.jsx(X,{errorSting:i,placeholder:"Margin trading position ID or transaction tx here…",value:n,onEnter:()=>f(`/performance/margin/${n}`),onInputChange:l,isLoading:o}),t.jsx(L,{style:{mt:x?"0px":"16px"},direction:S?"column":x?"row":"column",values:u,handleClearAll:g,handleValueClick:p,handleDeleteValue:h}),o&&t.jsx(U,{h:"138px",children:t.jsx(J,{w:"16px",h:"16px",color:"primary",_hover:{"& svg":{fill:"primary"}}})}),x&&!o&&t.jsx(Me,{}),d&&"errorMessage"in d&&!o&&t.jsx(E,{style:{mt:"16px"},type:"margin"})]})}const He=K()(e=>({searchTab:"dlmm",setSearchTab:t=>{e({searchTab:t})},reset:()=>{e({searchTab:"dlmm"})}}));function Fe(){const{performanceTabs:n,searchTab:i,handleTabChange:o}=function(){const{searchTab:t,setSearchTab:a}=He(),{pathname:n}=l(),i=s(),o=r();return e.useEffect(()=>{n.startsWith("/performance/margin")?a("margin"):a("dlmm")},[n,i?.type]),{performanceTabs:[{label:"DLMM",value:"dlmm"},{label:"Margin",value:"margin"}],searchTab:t,handleTabChange:e=>{a(e.value),n.startsWith("/performance")&&o(`/performance/${e.value}`)}}}();return t.jsx(a,{w:"100%",borderBottom:"1px solid",borderColor:"primary.10",children:t.jsx(ie,{tabs:n,activeTab:i,onChange:o,wrapStyle:{w:"fit-content",overflowX:"auto",scrollbarGutter:"stable",scrollbarWidth:"none"}})})}function Ne(){const{searchTab:e}=He();return"margin"===e?t.jsx(Oe,{children:t.jsx(Fe,{})}):t.jsx(Ce,{children:t.jsx(Fe,{})})}export{Ne as default};
