import{aq as e,ar as a,as as r,at as t,Z as s,au as n,Y as c,r as i,av as o,aw as u}from"./index-DVV-kzpl.js";const l=e()(a(e=>({searchValue:"",setSearchValue:a=>{e({searchValue:a})},performanceData:void 0,setPerformanceData:a=>{e({performanceData:a})},positionData:void 0,setPositionData:a=>{e({positionData:a})},inputErrorString:void 0,setInputErrorString:a=>{e({inputErrorString:a})},searchLoading:!1,setSearchLoading:a=>{e({searchLoading:a})},getPositionLoading:!1,setGetPositionLoading:a=>{e({getPositionLoading:a})},recentSearchValues:[],setRecentSearchValues:a=>{e({recentSearchValues:a})},addRecentSearchValue:a=>{e(e=>{const r=t(a);return e.recentSearchValues.some(e=>t(e)===r)?e:{recentSearchValues:[a,...e.recentSearchValues]}})},removeRecentSearchValue:a=>{e(e=>({recentSearchValues:e.recentSearchValues.filter(e=>t(e)!==t(a))}))},clearRecentSearchValues:()=>{e({recentSearchValues:[]})},resetInput:()=>{e({searchValue:"",performanceData:void 0,inputErrorString:void 0,searchLoading:!1})}}),{name:"usePerformanceStore",version:1,migrate:(e,a)=>{if(!e)return{recentSearchValues:[]};if(0===a||!("version"in e)){const a=e.recentSearchValues||[],t=r(a);return{...e,recentSearchValues:t}}return e},partialize:e=>({recentSearchValues:e.recentSearchValues})}));function h(){const{inputErrorString:e,setInputErrorString:a,setSearchLoading:r,addRecentSearchValue:t,setPerformanceData:h,setSearchValue:d,searchValue:S,searchLoading:V,recentSearchValues:g,setRecentSearchValues:f,performanceData:p}=l(),{findSearchResult:m}=function(){const{fetchByApi:e}=s();return{findSearchResult:async a=>{try{const r=await e(n,"GET",{identifier:a});return r?.list&&r.list.length>0?{status:"success",data:r}:{status:"error",errorMessage:"missing data"}}catch(r){return null}}}}(),{addTokens:v}=c();i.useEffect(()=>{if(e&&S){(o(S)||u(S))&&a("")}S||a("")},[e,S]);const D=async e=>{if(e){if(o(e)||u(e)){a(""),r(!0);try{const a=await m(e);if(a&&"success"===a?.status){const r=a.data;h(r),t({searchValue:e});const s=r.list[0]?.coinA,n=r.list[0]?.coinB,c=r.list?.flatMap(e=>e.coinRewards)||[];return v([s,n,...c]),a}{const e={errorMessage:"missing data"};return h(e),e}}catch(s){const e={errorMessage:"missing data"};return h(e),e}finally{r(!1)}}else a("Please enter a valid address")}};return{searchValue:S,setSearchValue:d,handleSearch:D,inputErrorString:e,searchLoading:V,handleValueClick:e=>{d(e.searchValue),D(e.searchValue);const a=g?.filter(a=>a?.searchValue!==e?.searchValue);f([e,...a])},hasPerformanceData:p&&!("errorMessage"in p)}}export{l as a,h as u};
