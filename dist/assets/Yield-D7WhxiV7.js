import{Y as e,W as t,r as i,j as n,V as a,K as o,a0 as s,T as l,a7 as r,a6 as p,a8 as c,a1 as u,I as d,a9 as x,X as m,ab as g,ac as f,ax as h,ay as y,ae as b,af as S,ag as j,ah as _,ai as D,az as Y,aA as w,S as v,H as L,an as T,ao as k,R as C,ap as A,U,ak as z,aB as F,aC as R,al as B,Q as I,L as $}from"./index-B09DMUOa.js";import{b as P,H as O,u as M,G as N,a as E,Y as W}from"./usePositionYield-DLOrDOI1.js";import{u as V,C as H}from"./useGetTokens-U7iteBvJ.js";import{u as G}from"./suiClient-C7SRX5_O.js";var K="object"==typeof global&&global&&global.Object===Object&&global,Q="object"==typeof self&&self&&self.Object===Object&&self,X=K||Q||Function("return this")(),q=X.Symbol,J=Object.prototype,Z=J.hasOwnProperty,ee=J.toString,te=q?q.toStringTag:void 0;var ie=Object.prototype.toString;var ne=q?q.toStringTag:void 0;function ae(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ne&&ne in Object(e)?function(e){var t=Z.call(e,te),i=e[te];try{e[te]=void 0;var n=!0}catch(o){}var a=ee.call(e);return n&&(t?e[te]=i:delete e[te]),a}(e):function(e){return ie.call(e)}(e)}function oe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var se,le=X["__core-js_shared__"],re=(se=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||""))?"Symbol(src)_1."+se:"";var pe=Function.prototype.toString;var ce=/^\[object .+?Constructor\]$/,ue=Function.prototype,de=Object.prototype,xe=ue.toString,me=de.hasOwnProperty,ge=RegExp("^"+xe.call(me).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fe(e){if(!oe(e)||(t=e,re&&re in t))return!1;var t,i=function(e){if(!oe(e))return!1;var t=ae(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)?ge:ce;return i.test(function(e){if(null!=e){try{return pe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function he(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return fe(i)?i:void 0}function ye(e){return e!=e}function be(e,t){return!!(null==e?0:e.length)&&function(e,t,i){return t==t?function(e,t,i){for(var n=i-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}(e,t,i):function(e,t,i){for(var n=e.length,a=i+-1;++a<n;)if(t(e[a],a,e))return a;return-1}(e,ye,i)}(e,t,0)>-1}function Se(e,t){return e===t||e!=e&&t!=t}var je=he(Object,"create");var _e=Object.prototype.hasOwnProperty;var De=Object.prototype.hasOwnProperty;function Ye(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function we(e,t){for(var i=e.length;i--;)if(Se(e[i][0],t))return i;return-1}Ye.prototype.clear=function(){this.__data__=je?je(null):{},this.size=0},Ye.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ye.prototype.get=function(e){var t=this.__data__;if(je){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return _e.call(t,e)?t[e]:void 0},Ye.prototype.has=function(e){var t=this.__data__;return je?void 0!==t[e]:De.call(t,e)},Ye.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=je&&void 0===t?"__lodash_hash_undefined__":t,this};var ve=Array.prototype.splice;function Le(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Le.prototype.clear=function(){this.__data__=[],this.size=0},Le.prototype.delete=function(e){var t=this.__data__,i=we(t,e);return!(i<0)&&(i==t.length-1?t.pop():ve.call(t,i,1),--this.size,!0)},Le.prototype.get=function(e){var t=this.__data__,i=we(t,e);return i<0?void 0:t[i][1]},Le.prototype.has=function(e){return we(this.__data__,e)>-1},Le.prototype.set=function(e,t){var i=this.__data__,n=we(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this};var Te=he(X,"Map");function ke(e,t){var i,n,a=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?a["string"==typeof t?"string":"hash"]:a.map}function Ce(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Ce.prototype.clear=function(){this.size=0,this.__data__={hash:new Ye,map:new(Te||Le),string:new Ye}},Ce.prototype.delete=function(e){var t=ke(this,e).delete(e);return this.size-=t?1:0,t},Ce.prototype.get=function(e){return ke(this,e).get(e)},Ce.prototype.has=function(e){return ke(this,e).has(e)},Ce.prototype.set=function(e,t){var i=ke(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this};var Ae=he(X,"Set");function Ue(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Ce;++t<i;)this.add(e[t])}function ze(e,t){return e.has(t)}function Fe(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}Ue.prototype.add=Ue.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ue.prototype.has=function(e){return this.__data__.has(e)};var Re=Ae&&1/Fe(new Ae([,-0]))[1]==1/0?function(e){return new Ae(e)}:function(){};function Be(e){return e&&e.length?function(e,t,i){var n=-1,a=be,o=e.length,s=!0,l=[],r=l;if(o>=200){var p=Re(e);if(p)return Fe(p);s=!1,a=ze,r=new Ue}else r=l;e:for(;++n<o;){var c=e[n],u=c;if(c=0!==c?c:0,s&&u==u){for(var d=r.length;d--;)if(r[d]===u)continue e;l.push(c)}else a(r,u,i)||(r!==l&&r.push(u),l.push(c))}return l}(e):[]}function Ie(n){const{getToken:a}=V(),{getToken:o}=e(),s=n?.positions?.reduce((e,i)=>e.plus(i?.currentData?.unclaimedFeeAUSD??0).plus(i?.currentData?.unclaimedFeeBUSD??0).plus(i?.currentData?.unclaimedRewardsUSD?.reduce((e,t)=>e.plus(t?.unClaimedUSD),t(0))??0).plus(i?.currentData?.unclaimedFarmingUSD?.reduce((e,t)=>e.plus(t?.unClaimedUSD),t(0))??0).plus(i?.historicalData?.totalClaimedFeeAUSD).plus(i?.historicalData?.totalClaimedFeeBUSD).plus(i?.historicalData?.totalClaimedRewards?.reduce((e,t)=>e.plus(t?.rewardUSD),t(0))).plus(i?.historicalData?.totalClaimedFarming?.reduce((e,t)=>e.plus(t?.rewardUSD),t(0))??0),t(0)).toNumber(),l=[{token:n?.coinA,amount:n?.positions?.reduce((e,t)=>e.plus(t?.historicalData?.totalClaimedFeeAAmount)?.plus(t?.currentData?.unclaimedFeeAAmount??0),t(0)).toNumber(),amountUSD:n?.positions?.reduce((e,t)=>e.plus(t?.historicalData?.totalClaimedFeeAUSD)?.plus(t?.currentData?.unclaimedFeeAUSD??0),t(0)).toNumber()},{token:n?.coinB,amount:n?.positions?.reduce((e,t)=>e.plus(t?.historicalData?.totalClaimedFeeBAmount)?.plus(t?.currentData?.unclaimedFeeBAmount??0),t(0)).toNumber(),amountUSD:n?.positions?.reduce((e,t)=>e.plus(t?.historicalData?.totalClaimedFeeBUSD)?.plus(t?.currentData?.unclaimedFeeBUSD??0),t(0)).toNumber()}],r=n?.coinRewards?.map(e=>{const i=n?.positions?.reduce((i,n)=>i.plus(n?.historicalData?.totalClaimedRewards?.filter(t=>t?.coinType===e?.coinType)?.reduce((e,t)=>e.plus(t?.rewardAmount),t(0)))?.plus(n?.currentData?.unclaimedRewardsUSD?.filter(t=>t?.coinType===e?.coinType)?.reduce((e,t)=>e.plus(t?.unClaimedAmount),t(0))??0),t(0)).toNumber(),a=n?.positions?.reduce((i,n)=>i.plus(n?.historicalData?.totalClaimedRewards?.filter(t=>t?.coinType===e?.coinType)?.reduce((e,t)=>e.plus(t?.rewardUSD),t(0)))?.plus(n?.currentData?.unclaimedRewardsUSD?.filter(t=>t?.coinType===e?.coinType)?.reduce((e,t)=>e?.plus(t?.unClaimedUSD),t(0))??0),t(0)).toNumber();return i&&t(i).gt(0)?{token:e,amount:i,amountUSD:a}:null}).filter(e=>null!==e),p=Be(n?.positions?.flatMap(e=>(e?.currentData?.unclaimedFarmingUSD?.map(e=>e?.coinType)||[]).concat(e?.historicalData?.totalClaimedFarming?.map(e=>e?.coinType)||[]).flat()));i.useEffect(()=>{p?.map(async e=>{await a(e)})},[p]);const c=p?.map(e=>{const i=o(e),a=n?.positions?.reduce((e,n)=>e.plus(n?.currentData?.unclaimedFarmingUSD?.filter(e=>e?.coinType===i?.coinType)?.reduce((e,t)=>e.plus(t?.unClaimedAmount),t(0))??0).plus(n?.historicalData?.totalClaimedFarming?.filter(e=>e?.coinType===i?.coinType)?.reduce((e,t)=>e.plus(t?.rewardAmount),t(0))??0),t(0)).toNumber(),s=n?.positions?.reduce((e,n)=>e.plus(n?.currentData?.unclaimedFarmingUSD?.filter(e=>e?.coinType===i?.coinType)?.reduce((e,t)=>e.plus(t?.unClaimedUSD),t(0))??0).plus(n?.historicalData?.totalClaimedFarming?.filter(e=>e?.coinType===i?.coinType)?.reduce((e,t)=>e.plus(t?.rewardUSD),t(0))??0),t(0)).toNumber();return a&&t(a).gt(0)?{token:i,amount:a,amountUSD:s}:null}).filter(e=>null!==e);return{totalYield:s,feeYieldList:l,miningYieldList:r,farmingYieldList:c}}function $e({totalYield:e,feeYieldList:t,miningYieldList:i,farmingYieldList:p,loading:c}){return n.jsxs(a,{p:{base:"16px",lg:"20px"},gap:{base:"8px",lg:"12px"},w:{base:"100%",lg:"380px"},minW:{base:"100%",lg:"380px"},bg:"input_bg",border:"1px solid",borderColor:"primary.10",children:[n.jsxs(o,{w:"100%",justify:"space-between",children:[n.jsx(O,{fontSize:"14px",color:"primary_text",fontWeight:"500",children:"Total Yield"}),c?n.jsx(s,{loading:c,ml:"12px",noOfLines:1,rootProps:{h:"14px",flex:"0 0 100px"}}):n.jsx(l,{fontSize:"14px",color:"primary",fontWeight:"500",children:e&&Number(e)>0?`+$${r(e)}`:"$0"})]}),n.jsx(Pe,{title:"Total fees you earn",yieldList:t,loading:c}),i&&i?.length>0&&n.jsx(Pe,{title:"Total mining rewards you earn",yieldList:i,loading:c}),p&&p?.length>0&&n.jsx(Pe,{title:"Total farming rewards you earn",yieldList:p,loading:c}),n.jsx(l,{fontSize:"12px",lineHeight:"16px",color:"second_text",children:"For closed positions, only those closed within the past 3 months are tracked."})]})}const Pe=({title:e,yieldList:t,loading:i})=>n.jsxs(a,{w:"100%",p:{base:"8px",lg:"16px"},align:"flex-start",bg:"secondary_background.10",children:[n.jsx(l,{fontSize:"12px",color:"second_text",children:e}),i?(t&&0!==t?.length?t:[1,2])?.map((e,t)=>n.jsx(Oe,{},"object"==typeof e?e?.token?.coinType:t)):t?.map(e=>n.jsxs(o,{gap:"4px",children:[n.jsx(p,{src:e?.token?.logoURL,size:"16px"}),n.jsx(l,{fontSize:"12px",color:"primary_text",children:`${r(e?.amount||0)} ${c(e?.token?.symbol)}`}),n.jsxs(l,{fontSize:"12px",color:"second_text",children:["(~$",r(e?.amountUSD),")"]})]},e?.token?.coinType))]}),Oe=()=>n.jsxs(o,{gap:"4px",children:[n.jsx(u,{size:"16px"}),n.jsx(s,{noOfLines:1,h:"12px",w:"60px"}),n.jsx(s,{noOfLines:1,h:"12px",w:"60px"})]});function Me({totalYield:e,feeYieldList:t,miningYieldList:i,farmingYieldList:a}){const{poolSearchLoading:o}=P();return n.jsx($e,{loading:o,totalYield:e,feeYieldList:t,miningYieldList:i,farmingYieldList:a})}function Ne({bgImageUrl:e,poolType:i,displayTokenA:s,displayTokenB:p,totalYield:u,yieldList:y,showBaseFee:b,showFeeTier:S,showTokenYield:j,yieldData:_}){return n.jsxs(a,{w:"1280px",p:"50px",h:"720px",aspectRatio:"16 / 9",alignItems:"start",gap:"0px",justifyContent:"start",zIndex:"-11",id:"yield_card",pos:"absolute",left:"-9999px",top:"-9999px",children:[n.jsx(d,{pos:"absolute",src:e,w:"100%",h:"100%",zIndex:"-11",top:"0",left:"0"}),n.jsxs(o,{w:"100%",justifyContent:"space-between",mb:"52px",children:[n.jsx(d,{h:"58px",w:"auto",src:`/images/share/${i}_logo.png`}),n.jsxs(a,{alignItems:"end",justifyContent:"start",gap:"0px",children:[n.jsx(l,{color:"primary_text",fontSize:"26px",letterSpacing:"2",lineHeight:"38px",children:"Snapshot by cetusbox.zone"}),n.jsx(l,{color:"primary_text",fontSize:"26px",letterSpacing:"2",lineHeight:"38px",children:x()})]})]}),n.jsxs(l,{fontSize:"84px",color:"primary_text",fontWeight:"500",letterSpacing:"4",children:[c(s?.symbol),"-",c(p?.symbol)]}),n.jsx(l,{fontSize:"33px",color:"card_text",mt:"58px",fontWeight:"500",letterSpacing:"2",children:"Total Yield (USD)"}),n.jsx(l,{color:"primary",fontWeight:"700",fontSize:"118px",letterSpacing:"7",mt:"20px",children:m(u)}),n.jsxs(o,{w:"100%",justifyContent:"space-between",flexWrap:"wrap",position:"absolute",bottom:"0",left:"0",p:"0 50px 50px",gap:"24px",children:[j&&y?.map(e=>n.jsx(g,{label:`Total ${c(e.token?.symbol)}`,value:r(e?.amount),wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}},e.token?.coinType)),S&&n.jsx(g,{label:"Fee Tier",value:f(t(_?.feeRate).div(h).toNumber()),wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}}),b&&n.jsx(g,{label:"BaseFee & BinStep",value:void 0!==_?.baseFeeRate?`${f(t(_?.baseFeeRate).mul(100).toNumber())} | ${_?.binStep??"--"}bps`:"--",wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}})]})]})}const Ee=["Total Yield Token","BaseFee & BinStep"],We=["Total Yield Token","Fee Tier"];function Ve({totalYield:e,feeYieldList:s,miningYieldList:p,farmingYieldList:u,loading:Y,isDlmm:w,yieldData:v}){const L=w?"dlmm":"clmm",[T,k]=i.useState([]);i.useEffect(()=>{k("dlmm"===L?Ee:We)},[L]);const[C,A]=i.useState(),U=T.includes("Total Yield Token"),z=T.includes("Fee Tier"),F=T.includes("BaseFee & BinStep"),{displayTokenA:R,displayTokenB:B,yieldList:I}=function({yieldData:e,feeYieldList:n,miningYieldList:a,farmingYieldList:o}){return{displayTokenA:e?.showReverse?e?.coinB:e?.coinA,displayTokenB:e?.showReverse?e?.coinA:e?.coinB,yieldList:i.useMemo(()=>{const e=new Map;return n.forEach(t=>{e.set(t.token?.coinType,{token:t?.token,amount:t?.amount,amountUSD:t?.amountUSD})}),a&&a?.length>0&&a.forEach(i=>{e.has(i.token?.coinType)||e.set(i.token?.coinType,{token:i?.token,amount:i?.amount,amountUSD:i?.amountUSD});const n=e.get(i.token?.coinType)?.amount,a=e.get(i.token?.coinType)?.amountUSD;e.set(i.token?.coinType,{token:i?.token,amount:t(n).plus(i?.amount).toNumber(),amountUSD:t(a).plus(i?.amountUSD).toNumber()})}),o&&o?.length>0&&o.forEach(i=>{e.has(i.token?.coinType)||e.set(i.token?.coinType,{token:i?.token,amount:i?.amount,amountUSD:i?.amountUSD});const n=e.get(i.token?.coinType)?.amount,a=e.get(i.token?.coinType)?.amountUSD;e.set(i.token?.coinType,{token:i?.token,amount:t(n).plus(i?.amount).toNumber(),amountUSD:t(a).plus(i?.amountUSD).toNumber()})}),Array.from(e.values())},[n,a,o])}}({yieldData:v,feeYieldList:s,miningYieldList:p,farmingYieldList:u}),$=y(t(e).toNumber()),P=["flat","strong_loss"].includes($)?[`/images/share/${$}_1.png`,`/images/share/${$}_2.png`,`/images/share/${$}_3.png`,`/images/share/${$}_4.png`]:[`/images/share/${$}_1.png`,`/images/share/${$}_2.png`,`/images/share/${$}_3.png`];return i.useEffect(()=>{A(`/images/share/${$}_1.png`)},[$,v]),n.jsxs(b,{p:{base:"0px",lg:"22px 20px 20px"},border:"1px solid",borderColor:{base:"transparent",lg:"primary.10"},flex:"1",children:[n.jsxs(a,{gap:"0px",w:"100%",children:[n.jsx(S,{w:"100%",h:{base:"auto",lg:"280px"},aspectRatio:"16 / 9",loading:Y,children:n.jsxs(a,{w:"100%",p:{base:"8px",lg:"20px"},minH:{base:"auto",lg:"280px"},aspectRatio:"16 / 9",alignItems:"start",gap:"0px",justifyContent:"start",bg:{base:`center / contain no-repeat url(${C})`,lg:`center / 100% 100% no-repeat url(${C})`},pos:"relative",zIndex:"-11",children:[n.jsxs(o,{w:"100%",justifyContent:"space-between",mb:{base:"6px",lg:"32px"},children:[n.jsx(o,{justifyContent:"start",gap:"8px",children:n.jsx(d,{h:"23px",w:"auto",src:`/images/share/${L}_logo.png`})}),n.jsxs(a,{alignItems:"end",justifyContent:"start",gap:"0px",children:[n.jsx(l,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:"Snapshot by cetusbox.zone"}),n.jsx(l,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:x()})]})]}),n.jsxs(l,{fontSize:"24px",color:"primary_text",fontWeight:"500",letterSpacing:"1",children:[c(R?.symbol),"-",c(B?.symbol)]}),n.jsx(l,{fontSize:"12px",color:"card_text",mt:{base:"20px",lg:"28px"},fontWeight:"500",children:"Total Yield (USD)"}),n.jsx(l,{fontSize:{base:"32px",lg:"46px"},color:"primary",mt:{base:"8px",lg:"12px"},fontWeight:"700",children:m(e)}),n.jsxs(o,{w:"100%",justifyContent:"space-between",flexWrap:"wrap",position:"absolute",bottom:"0",left:"0",p:{base:"0 8px 8px",lg:"0 20px 20px"},children:[U&&I?.map(e=>n.jsx(g,{label:`Total ${c(e.token?.symbol)}`,value:r(e?.amount),wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}},e.token?.coinType)),z&&n.jsx(g,{label:"Fee Tier",value:f(t(v?.feeRate).div(h).toNumber()),wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),F&&n.jsx(g,{label:"BaseFee & BinStep",value:void 0!==v?.baseFeeRate?`${f(t(v?.baseFeeRate).mul(100).toNumber())} | ${v?.binStep??"--"}bps`:"--",wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}})]})]})}),n.jsxs(a,{w:"100%",mt:"20px",gap:"16px",children:[n.jsx(j,{data:"dlmm"===L?Ee:We,selected:T,handleSelectedChange:e=>k(e)}),C&&n.jsx(_,{imageUrls:P,currImageUrl:C,handleSelectedChange:A,loading:Y})]}),n.jsx(D,{style:{mt:"28px"},card_id:"yield_card",filename:`${L}_${R?.symbol}_${B?.symbol}`})]}),n.jsx(Ne,{bgImageUrl:C,poolType:L,displayTokenA:R,displayTokenB:B,totalYield:e,yieldList:I,showBaseFee:F,showFeeTier:z,showTokenYield:U,yieldData:v})]})}function He({totalYield:e,feeYieldList:t,miningYieldList:i,farmingYieldList:a}){const{poolYieldData:o,isDlmm:s,poolSearchLoading:l}=P(),r=o;return n.jsx(Ve,{totalYield:e,feeYieldList:t,miningYieldList:i,farmingYieldList:a,loading:l,isDlmm:s,yieldData:r})}function Ge(){const{poolSearchLoading:e,poolYieldData:i,isDlmm:a}=P(),o=i,s=o?.showReverse?o.coinB:o.coinA,l=o?.showReverse?o.coinA:o.coinB;return e?n.jsx(Ke,{}):n.jsx(Y,{tokenA:s,tokenB:l,feeDisplay:f(a?t(o?.baseFeeRate).mul(100).toNumber():t(o?.feeRate).div(h).toNumber()),bps:o?.binStep})}function Ke(){return n.jsx(Y,{tokenA:w.SUI,tokenB:w.USDC,feeDisplay:"0.1%",bps:25,isLoading:!0})}function Qe(){const{totalYield:e,feeYieldList:t,miningYieldList:i,farmingYieldList:o}=function(){const{poolYieldData:e}=P(),t=e,{totalYield:i,feeYieldList:n,miningYieldList:a,farmingYieldList:o}=Ie(t);return{totalYield:i,feeYieldList:n,miningYieldList:a,farmingYieldList:o}}();return n.jsxs(a,{gap:{base:"12px",lg:"28px"},mt:{base:"4px",lg:"16px"},align:"flex-start",w:"100%",pt:{base:"8px",lg:"28px"},borderTop:"1px solid",borderColor:"primary.10",children:[n.jsx(Ge,{}),n.jsxs(v,{w:"100%",gap:{base:"16px",lg:"20px"},justify:"space-between",align:"flex-start",flexDir:{base:"column",lg:"row"},children:[n.jsx(Me,{totalYield:e,feeYieldList:t,miningYieldList:i,farmingYieldList:o}),n.jsx(He,{totalYield:e,feeYieldList:t,miningYieldList:i,farmingYieldList:o})]})]})}function Xe(){const{searchPoolAddress:e,searchWalletAddress:t,setSearchPoolAddress:a,setSearchWalletAddress:o,handleSearch:s,walletErrorString:l,poolErrorString:r,handleValueClick:p,poolSearchLoading:c}=M(),{poolYieldData:u,poolRecentSearchValues:d,clearPoolRecentSearchValues:x,removePoolRecentSearchValue:m,resetPoolInput:g}=P(),f=()=>s(e,t),h=u&&!("errorMessage"in u);i.useEffect(()=>()=>{g()},[g]);const{isApp:y}=L();return n.jsxs(n.Fragment,{children:[n.jsx(N,{walletInputOptions:{value:t,onEnter:f,onInputChange:o,errorSting:l,placeholder:"Wallet address here…"},poolInputOptions:{value:e,onEnter:f,onInputChange:a,errorSting:r,placeholder:"CLMM / DLMM pool address here…"},isLoading:c,handleEnter:f,wrapStyle:{flexDir:{base:"column",lg:"row"},gap:{base:"8px",lg:"14px"}}}),n.jsx(T,{style:{mt:h?"0px":"16px"},direction:y?"column":h?"row":"column",values:d,handleClearAll:x,handleValueClick:p,handleDeleteValue:m}),c&&n.jsx(k,{w:"100%",h:"138px",children:n.jsx(C,{w:"16px",h:"16px",color:"primary",_hover:{"& svg":{fill:"primary"}}})}),h&&!c&&n.jsx(Qe,{}),u&&"errorMessage"in u&&!c&&n.jsx(A,{style:{mt:"16px"},type:"fee"})]})}function qe({totalYield:e,feeYieldList:t,miningYieldList:i,farmingYieldList:a}){const{positionSearching:o}=P();return n.jsx($e,{loading:o,totalYield:e,feeYieldList:t,miningYieldList:i,farmingYieldList:a})}function Je({totalYield:e,feeYieldList:t,miningYieldList:i,farmingYieldList:a}){const{positionYieldData:o,isDlmm:s,positionSearching:l}=P(),r=o;return n.jsx(Ve,{totalYield:e,feeYieldList:t,miningYieldList:i,farmingYieldList:a,loading:l,isDlmm:s,yieldData:r})}function Ze(e){const{positionYieldData:t,currentPositionData:n}=P(),a=t,o=n,{suiClient:s}=G(),[l,r]=i.useState("");i.useEffect(()=>{(async e=>{if(a?.user)r(a.user);else try{const t=await s._client.getObject({id:e,options:{showOwner:!0,showContent:!0}});t?.data&&r(t.data.owner?.AddressOwner||"")}catch(t){}})(e||"")},[e]);const p=void 0!==o?.openActivateID&&void 0!==a?.coinA?.decimals&&void 0!==a?.coinB?.decimals?void 0!==a?.binStep?z.getPriceFromBinId(o.openActivateID,a.binStep,a.coinA.decimals,a.coinB.decimals):F.tickIndexToPrice(R(BigInt(o?.openActivateID)),a.coinA.decimals,a.coinB.decimals):void 0,c=a?.showReverse?a?.coinB:a?.coinA,u=a?.showReverse?a?.coinA:a?.coinB;return{addressOwner:l,openPrice:void 0!==p?a?.showReverse?z?.getReversePrice(p):p:void 0,displayTokenA:c,displayTokenB:u,data:"feeRate"in a?{...o,feeRate:a?.feeRate}:{...o,binStep:a?.binStep,baseFeeRate:a?.baseFeeRate}}}function et({positionId:e}){const{positionSearching:t}=P(),{addressOwner:i,openPrice:a,displayTokenA:o,displayTokenB:s,data:l}=Ze(e);return n.jsx(B,{loading:t,addressOwner:i,data:l,openPrice:a,displayTokenA:o,displayTokenB:s})}function tt(){const{totalYield:e,feeYieldList:t,miningYieldList:o,farmingYieldList:s}=function(){const{positionYieldData:e,currentPositionData:t}=P(),n=e,a=t,o=i.useMemo(()=>({...n,positions:n?.positions?.filter(e=>e?.positionID===a?.positionID)}),[a?.positionID,n]),{totalYield:s,feeYieldList:l,miningYieldList:r,farmingYieldList:p}=Ie(o);return{totalYield:s,feeYieldList:l,miningYieldList:r,farmingYieldList:p}}(),{currentPositionData:l}=P();return n.jsxs(a,{gap:{base:"12px",lg:"28px"},align:"flex-start",w:"100%",pt:{base:"8px",lg:"28px"},children:[n.jsx(et,{positionId:l?.positionID}),n.jsxs(v,{w:"100%",gap:{base:"16px",lg:"20px"},justify:"space-between",align:"flex-start",flexDir:{base:"column",lg:"row"},children:[n.jsx(qe,{totalYield:e,feeYieldList:t,miningYieldList:o,farmingYieldList:s}),n.jsx(Je,{totalYield:e,feeYieldList:t,miningYieldList:o,farmingYieldList:s})]})]})}function it(){const{activeTab:e,tabs:t,handleTabChange:a}=function(){const{positionYieldData:e,setCurrentPositionData:t}=P(),[n,a]=i.useState(),{isApp:o}=L(),s=e,l=s?.positions?.map(e=>({label:o?`#${U(e?.positionID)}`:`Position #${U(e?.positionID)}`,value:e?.positionID}));return i.useEffect(()=>{l&&l.length>0&&!n&&(a(l[0]),t(s.positions[0]))},[l]),{activeTab:n,tabs:l,handleTabChange:e=>{a(e);const i=s?.positions.find(t=>t.positionID===e.value);i&&t(i)}}}();return n.jsx(H,{activeTab:e,tabs:t,handleTabChange:a,children:n.jsx(tt,{},e?.value)})}function nt(){const{searchPositionId:e,setSearchPositionId:t,handleSearch:a,positionErrorString:o,positionSearching:s,handleValueClick:l}=E(),{positionYieldData:r,positionRecentSearchValues:p,clearPositionRecentSearchValues:c,removePositionRecentSearchValue:u,resetPositionInput:d}=P(),x=r&&!("errorMessage"in r);i.useEffect(()=>()=>{d()},[d]);const{isApp:m}=L();return n.jsxs(n.Fragment,{children:[n.jsx(I,{errorSting:o,placeholder:"CLMM / DLMM position or transaction address here…",value:e,onEnter:()=>a(e),onInputChange:t,isLoading:s}),n.jsx(T,{style:{mt:x?"0px":"16px"},direction:m?"column":x?"row":"column",values:p,handleClearAll:c,handleValueClick:l,handleDeleteValue:u}),s&&n.jsx(k,{w:"100%",h:"138px",children:n.jsx(C,{w:"16px",h:"16px",color:"primary",_hover:{"& svg":{fill:"primary"}}})}),x&&!s&&n.jsx(it,{}),r&&"errorMessage"in r&&!s&&n.jsx(A,{style:{mt:"16px"},type:"fee"})]})}function at(){const{poolYieldData:e,positionYieldData:t,searchTab:o,setSearchTab:s}=P(),r=e&&!("errorMessage"in e)||t&&!("errorMessage"in t);return i.useEffect(()=>()=>{s("pool")},[]),n.jsxs(a,{gap:"12px",w:{base:"100%",lg:r?"940px":"700px"},mt:{base:r?"20px":"80px",lg:r?"20px":"147px"},align:r?"flex-start":"center",children:[n.jsx(l,{color:"primary_text",fontSize:"20px",fontWeight:"500",children:"Yield"}),n.jsx(l,{mb:{base:"0px",lg:"8px"},color:"second_text",fontSize:"12px",lineHeight:"20px",children:"Track your yield from Cetus CLMM and DLMM, including claimed and unclaimed rewards. You can check an aggregate yield from pool or detailed yield from individual position. Generate a shareable yield card for easy reference."}),n.jsx(W,{}),n.jsx($,{mt:"-4px"}),"pool"===o?n.jsx(Xe,{}):n.jsx(nt,{})]})}export{at as default};
