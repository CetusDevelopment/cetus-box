import{c as e,S as r}from"./v-stack-wpQ1XMEo.js";import{j as a,r as s}from"./index-DjgbpSHW.js";import{u as t,H as o,C as l}from"./useSize-By1lzbFp.js";import{S as n,a as c,m as i,p as d,n as u,u as h,d as p,v as S,C as g,w as m}from"./suiClient-DkjIMpb0.js";const{withContext:f}=e({key:"heading"}),v=f("h2");function y({walletInputOptions:e,poolInputOptions:s,wrapStyle:i={},enterStyle:d={},isLoading:u,handleEnter:h,onFocus:p,onBlur:S}){const g=u||!e?.value||!s?.value,{isApp:m}=t();return a.jsxs(r,{gap:"4px",w:"full",...i,children:[a.jsx(n,{showEnter:!1,...e,onFocus:p,onBlur:S}),a.jsx(n,{showEnter:!1,...s,onFocus:p,onBlur:S}),a.jsx(o,{onClick:h,cursor:g?"not-allowed":"pointer",bg:{base:g?"primary.60":"primary",lg:"primary.60"},_hover:g?void 0:{bg:"primary"},opacity:g?.6:1,flex:{base:"0 0 32px",lg:"0 0 44px"},h:{base:"32px",lg:"44px"},justify:"center",align:"center",borderRadius:"0px",...d,children:u?a.jsx(c,{w:"16px",h:"16px"}):a.jsx(l,{name:"icon-icon_search",boxSize:m?"12px":"16px",color:"primary_bg",_hover:{fill:"primary_bg"}})})]})}v.displayName="Heading";const w=i()(d(e=>({searchWalletAddress:"",setSearchWalletAddress:r=>{e({searchWalletAddress:r})},searchPoolAddress:"",setSearchPoolAddress:r=>{e({searchPoolAddress:r})},isDlmm:!1,setIsDlmm:r=>{e({isDlmm:r})},yieldData:void 0,setYieldData:r=>{e({yieldData:r})},walletErrorString:void 0,setWalletErrorString:r=>{e({walletErrorString:r})},poolErrorString:void 0,setPoolErrorString:r=>{e({poolErrorString:r})},searchLoading:!1,setSearchLoading:r=>{e({searchLoading:r})},recentSearchValues:[],setRecentSearchValues:r=>{e({recentSearchValues:r})},addRecentSearchValue:r=>{e(e=>{const a=u(r);return e.recentSearchValues.some(e=>u(e)===a)?e:{recentSearchValues:[r,...e.recentSearchValues]}})},removeRecentSearchValue:r=>{e(e=>({recentSearchValues:e.recentSearchValues.filter(e=>u(e)!==u(r))}))},clearRecentSearchValues:()=>{e({recentSearchValues:[]})},resetInput:()=>{e({searchWalletAddress:"",searchPoolAddress:"",yieldData:void 0,walletErrorString:void 0,poolErrorString:void 0,searchLoading:!1})}}),{name:"useYieldStore",partialize:e=>({recentSearchValues:e.recentSearchValues})}));function _(){const{walletErrorString:e,setWalletErrorString:r,poolErrorString:a,setPoolErrorString:t,setSearchLoading:o,recentSearchValues:l,addRecentSearchValue:n,setRecentSearchValues:c,setYieldData:i,setSearchPoolAddress:d,setSearchWalletAddress:f,searchPoolAddress:v,searchWalletAddress:y,searchLoading:_}=w(),{findSearchResult:E}=function(){const{fetchByApi:e}=p(),{suiClient:r}=h(),{setIsDlmm:a}=w();return{findSearchResult:async(s,t)=>{let o;try{const e=await r._client.getObject({id:t,options:{showType:!0,showContent:!0}}),a=e?.data?.content;o=!("moveObject"!==a?.dataType||!a.fields?.bin_manager)}catch(l){try{const r=await e(S,"GET",{wallet_address:s,pool:t});if(r&&r?.pool)return a(!0),{status:"success",data:r};{const r=await e(g,"GET",{wallet_address:s,pool:t});return r&&r?.pool?(a(!1),{status:"success",data:r}):{status:"error",error_message:"missing data"}}}catch(n){return{status:"error",error_message:"missing data"}}}a(o);try{const r=await e(o?S:g,"GET",{wallet_address:s,pool:t});return r&&r?.pool?{status:"success",data:r}:{status:"error",error_message:"missing data"}}catch(l){return null}}}}();s.useEffect(()=>{a&&(v?m(v)?t(""):t("Please enter a valid address"):t(""))},[v,a]),s.useEffect(()=>{e&&(y?m(y)?r(""):r("Please enter a valid address"):r(""))},[y,e]);const x=async(e,a)=>{if(e?m(e)?t(""):t("Please enter a valid address"):t(""),a?m(a)?r(""):r("Please enter a valid address"):r(""),e&&a){if(m(a)&&m(e)){o(!0);try{const r=await E(a,e);if(r&&"success"===r.status){const s=r.data;return i(s),n({search_value:a,sub_search_value:e}),r}{const e={error_message:"missing data"};return i(e),e}}catch(s){const e={error_message:"missing data"};return i(e),e}finally{o(!1)}}}};return{searchPoolAddress:v,searchWalletAddress:y,setSearchPoolAddress:d,setSearchWalletAddress:f,handleSearch:x,walletErrorString:e,poolErrorString:a,searchLoading:_,handleValueClick:e=>{f(e?.search_value),d(e?.sub_search_value??""),x(e?.sub_search_value??"",e?.search_value);const r=l?.filter(r=>u(r)!==u(e));c([e,...r])}}}export{y as G,v as H,w as a,_ as u};
