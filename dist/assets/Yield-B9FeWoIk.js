import{r as e,j as t,I as i,B as n}from"./index-CBgVo8fP.js";import{b as o,S as a,C as s,a as l,c as r,J as p,B as c,d,e as u,f as m,g as x,k as g,l as f,R as h,j as y,M as b,F as S,P as j,i as _}from"./PositionHeader-BOy4VhWg.js";import{u as D,z as Y,e as w,t as v,g as L,f as T,i as k,r as C,a as U,b as z,k as A,U as F,s as R,S as B}from"./suiClient-wWAkg6op.js";import{H as I,u as $}from"./useSize-v-qm-NHg.js";import{b as P,H as O,u as M,G as N,a as E,Y as W}from"./usePositionYield-DyhsIrp7.js";import{V,T as H,S as G}from"./v-stack-B6LixqQq.js";import"./toaster-CmZBT2Kx.js";import"./button-Ci4GxCdz.js";var J="object"==typeof global&&global&&global.Object===Object&&global,q="object"==typeof self&&self&&self.Object===Object&&self,K=J||q||Function("return this")(),Q=K.Symbol,X=Object.prototype,Z=X.hasOwnProperty,ee=X.toString,te=Q?Q.toStringTag:void 0;var ie=Object.prototype.toString;var ne=Q?Q.toStringTag:void 0;function oe(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ne&&ne in Object(e)?function(e){var t=Z.call(e,te),i=e[te];try{e[te]=void 0;var n=!0}catch(a){}var o=ee.call(e);return n&&(t?e[te]=i:delete e[te]),o}(e):function(e){return ie.call(e)}(e)}function ae(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var se,le=K["__core-js_shared__"],re=(se=/[^.]+$/.exec(le&&le.keys&&le.keys.IE_PROTO||""))?"Symbol(src)_1."+se:"";var pe=Function.prototype.toString;var ce=/^\[object .+?Constructor\]$/,de=Function.prototype,ue=Object.prototype,me=de.toString,xe=ue.hasOwnProperty,ge=RegExp("^"+me.call(xe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function fe(e){if(!ae(e)||(t=e,re&&re in t))return!1;var t,i=function(e){if(!ae(e))return!1;var t=oe(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}(e)?ge:ce;return i.test(function(e){if(null!=e){try{return pe.call(e)}catch(t){}try{return e+""}catch(t){}}return""}(e))}function he(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return fe(i)?i:void 0}function ye(e){return e!=e}function be(e,t){return!!(null==e?0:e.length)&&function(e,t,i){return t==t?function(e,t,i){for(var n=i-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t,i):function(e,t,i){for(var n=e.length,o=i+-1;++o<n;)if(t(e[o],o,e))return o;return-1}(e,ye,i)}(e,t,0)>-1}function Se(e,t){return e===t||e!=e&&t!=t}var je=he(Object,"create");var _e=Object.prototype.hasOwnProperty;var De=Object.prototype.hasOwnProperty;function Ye(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function we(e,t){for(var i=e.length;i--;)if(Se(e[i][0],t))return i;return-1}Ye.prototype.clear=function(){this.__data__=je?je(null):{},this.size=0},Ye.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ye.prototype.get=function(e){var t=this.__data__;if(je){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return _e.call(t,e)?t[e]:void 0},Ye.prototype.has=function(e){var t=this.__data__;return je?void 0!==t[e]:De.call(t,e)},Ye.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=je&&void 0===t?"__lodash_hash_undefined__":t,this};var ve=Array.prototype.splice;function Le(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Le.prototype.clear=function(){this.__data__=[],this.size=0},Le.prototype.delete=function(e){var t=this.__data__,i=we(t,e);return!(i<0)&&(i==t.length-1?t.pop():ve.call(t,i,1),--this.size,!0)},Le.prototype.get=function(e){var t=this.__data__,i=we(t,e);return i<0?void 0:t[i][1]},Le.prototype.has=function(e){return we(this.__data__,e)>-1},Le.prototype.set=function(e,t){var i=this.__data__,n=we(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this};var Te=he(K,"Map");function ke(e,t){var i,n,o=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?o["string"==typeof t?"string":"hash"]:o.map}function Ce(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Ce.prototype.clear=function(){this.size=0,this.__data__={hash:new Ye,map:new(Te||Le),string:new Ye}},Ce.prototype.delete=function(e){var t=ke(this,e).delete(e);return this.size-=t?1:0,t},Ce.prototype.get=function(e){return ke(this,e).get(e)},Ce.prototype.has=function(e){return ke(this,e).has(e)},Ce.prototype.set=function(e,t){var i=ke(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this};var Ue=he(K,"Set");function ze(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Ce;++t<i;)this.add(e[t])}function Ae(e,t){return e.has(t)}function Fe(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}ze.prototype.add=ze.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ze.prototype.has=function(e){return this.__data__.has(e)};var Re=Ue&&1/Fe(new Ue([,-0]))[1]==1/0?function(e){return new Ue(e)}:function(){};function Be(e){return e&&e.length?function(e,t,i){var n=-1,o=be,a=e.length,s=!0,l=[],r=l;if(a>=200){var p=Re(e);if(p)return Fe(p);s=!1,o=Ae,r=new ze}else r=l;e:for(;++n<a;){var c=e[n],d=c;if(c=0!==c?c:0,s&&d==d){for(var u=r.length;u--;)if(r[u]===d)continue e;l.push(c)}else o(r,d,i)||(r!==l&&r.push(d),l.push(c))}return l}(e):[]}function Ie(t){const{getToken:i}=o(),{getToken:n}=D(),a=t?.positions?.reduce((e,t)=>e.plus(t?.currentData?.unclaimedFeeAUSD??0).plus(t?.currentData?.unclaimedFeeBUSD??0).plus(t?.currentData?.unclaimedRewardsUSD?.reduce((e,t)=>e.plus(t?.unClaimedUSD),Y(0))??0).plus(t?.currentData?.unclaimedFarmingUSD?.reduce((e,t)=>e.plus(t?.unClaimedUSD),Y(0))??0).plus(t?.historicalData?.totalClaimedFeeAUSD).plus(t?.historicalData?.totalClaimedFeeBUSD).plus(t?.historicalData?.totalClaimedRewards?.reduce((e,t)=>e.plus(t?.rewardUSD),Y(0))).plus(t?.historicalData?.totalClaimedFarming?.reduce((e,t)=>e.plus(t?.rewardUSD),Y(0))??0),Y(0)).toNumber(),s=[{token:t?.coinA,amount:t?.positions?.reduce((e,t)=>e.plus(t?.historicalData?.totalClaimedFeeAAmount)?.plus(t?.currentData?.unclaimedFeeAAmount??0),Y(0)).toNumber(),amountUSD:t?.positions?.reduce((e,t)=>e.plus(t?.historicalData?.totalClaimedFeeAUSD)?.plus(t?.currentData?.unclaimedFeeAUSD??0),Y(0)).toNumber()},{token:t?.coinB,amount:t?.positions?.reduce((e,t)=>e.plus(t?.historicalData?.totalClaimedFeeBAmount)?.plus(t?.currentData?.unclaimedFeeBAmount??0),Y(0)).toNumber(),amountUSD:t?.positions?.reduce((e,t)=>e.plus(t?.historicalData?.totalClaimedFeeBUSD)?.plus(t?.currentData?.unclaimedFeeBUSD??0),Y(0)).toNumber()}],l=t?.coinRewards?.map(e=>{const i=t?.positions?.reduce((t,i)=>t.plus(i?.historicalData?.totalClaimedRewards?.filter(t=>t?.coinType===e?.coinType)?.reduce((e,t)=>e.plus(t?.rewardAmount),Y(0)))?.plus(i?.currentData?.unclaimedRewardsUSD?.filter(t=>t?.coinType===e?.coinType)?.reduce((e,t)=>e.plus(t?.unClaimedAmount),Y(0))??0),Y(0)).toNumber(),n=t?.positions?.reduce((t,i)=>t.plus(i?.historicalData?.totalClaimedRewards?.filter(t=>t?.coinType===e?.coinType)?.reduce((e,t)=>e.plus(t?.rewardUSD),Y(0)))?.plus(i?.currentData?.unclaimedRewardsUSD?.filter(t=>t?.coinType===e?.coinType)?.reduce((e,t)=>e?.plus(t?.unClaimedUSD),Y(0))??0),Y(0)).toNumber();return i&&Y(i).gt(0)?{token:e,amount:i,amountUSD:n}:null}).filter(e=>null!==e),r=Be(t?.positions?.flatMap(e=>(e?.currentData?.unclaimedFarmingUSD?.map(e=>e?.coinType)||[]).concat(e?.historicalData?.totalClaimedFarming?.map(e=>e?.coinType)||[]).flat()));e.useEffect(()=>{r?.map(async e=>{await i(e)})},[r]);const p=r?.map(e=>{const i=n(e),o=t?.positions?.reduce((e,t)=>e.plus(t?.currentData?.unclaimedFarmingUSD?.filter(e=>e?.coinType===i?.coinType)?.reduce((e,t)=>e.plus(t?.unClaimedAmount),Y(0))??0).plus(t?.historicalData?.totalClaimedFarming?.filter(e=>e?.coinType===i?.coinType)?.reduce((e,t)=>e.plus(t?.rewardAmount),Y(0))??0),Y(0)).toNumber(),a=t?.positions?.reduce((e,t)=>e.plus(t?.currentData?.unclaimedFarmingUSD?.filter(e=>e?.coinType===i?.coinType)?.reduce((e,t)=>e.plus(t?.unClaimedUSD),Y(0))??0).plus(t?.historicalData?.totalClaimedFarming?.filter(e=>e?.coinType===i?.coinType)?.reduce((e,t)=>e.plus(t?.rewardUSD),Y(0))??0),Y(0)).toNumber();return o&&Y(o).gt(0)?{token:i,amount:o,amountUSD:a}:null}).filter(e=>null!==e);return{totalYield:a,feeYieldList:s,miningYieldList:l,farmingYieldList:p}}function $e({totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:o,loading:s}){return t.jsxs(V,{p:{base:"16px",lg:"20px"},gap:{base:"8px",lg:"12px"},w:{base:"100%",lg:"380px"},minW:{base:"100%",lg:"380px"},bg:"input_bg",border:"1px solid",borderColor:"primary.10",children:[t.jsxs(I,{w:"100%",justify:"space-between",children:[t.jsx(O,{fontSize:"14px",color:"primary_text",fontWeight:"500",children:"Total Yield"}),s?t.jsx(a,{loading:s,ml:"12px",noOfLines:1,rootProps:{h:"14px",flex:"0 0 100px"}}):t.jsx(H,{fontSize:"14px",color:"primary",fontWeight:"500",children:e&&Number(e)>0?`+$${w(e)}`:"$0"})]}),t.jsx(Pe,{title:"Total fees you earn",yieldList:i,loading:s}),n&&n?.length>0&&t.jsx(Pe,{title:"Total mining rewards you earn",yieldList:n,loading:s}),o&&o?.length>0&&t.jsx(Pe,{title:"Total farming rewards you earn",yieldList:o,loading:s}),t.jsx(H,{fontSize:"12px",lineHeight:"16px",color:"second_text",children:"For closed positions, only those closed within the past 3 months are tracked."})]})}const Pe=({title:e,yieldList:i,loading:n})=>t.jsxs(V,{w:"100%",p:{base:"8px",lg:"16px"},align:"flex-start",bg:"secondary_background.10",children:[t.jsx(H,{fontSize:"12px",color:"second_text",children:e}),n?(i&&0!==i?.length?i:[1,2])?.map((e,i)=>t.jsx(Oe,{},"object"==typeof e?e?.token?.coinType:i)):i?.map(e=>t.jsxs(I,{gap:"4px",children:[t.jsx(s,{src:e?.token?.logoURL,size:"16px"}),t.jsx(H,{fontSize:"12px",color:"primary_text",children:`${w(e?.amount||0)} ${v(e?.token?.symbol)}`}),t.jsxs(H,{fontSize:"12px",color:"second_text",children:["(~$",w(e?.amountUSD),")"]})]},e?.token?.coinType))]}),Oe=()=>t.jsxs(I,{gap:"4px",children:[t.jsx(l,{size:"16px"}),t.jsx(a,{noOfLines:1,h:"12px",w:"60px"}),t.jsx(a,{noOfLines:1,h:"12px",w:"60px"})]});function Me({totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:o}){const{poolSearchLoading:a}=P();return t.jsx($e,{loading:a,totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:o})}function Ne({bgImageUrl:e,poolType:n,displayTokenA:o,displayTokenB:a,totalYield:s,yieldList:l,showBaseFee:c,showFeeTier:d,showTokenYield:u,yieldData:m}){return t.jsxs(V,{w:"1280px",p:"50px",h:"720px",aspectRatio:"16 / 9",alignItems:"start",gap:"0px",justifyContent:"start",zIndex:"-11",id:"yield_card",pos:"absolute",left:"-9999px",top:"-9999px",children:[t.jsx(i,{pos:"absolute",src:e,w:"100%",h:"100%",zIndex:"-11",top:"0",left:"0"}),t.jsxs(I,{w:"100%",justifyContent:"space-between",mb:"52px",children:[t.jsx(i,{h:"58px",w:"auto",src:`/images/share/${n}_logo.png`}),t.jsxs(V,{alignItems:"end",justifyContent:"start",gap:"0px",children:[t.jsx(H,{color:"primary_text",fontSize:"26px",letterSpacing:"2",lineHeight:"38px",children:"Snapshot by cetusbox.zone"}),t.jsx(H,{color:"primary_text",fontSize:"26px",letterSpacing:"2",lineHeight:"38px",children:L()})]})]}),t.jsxs(H,{fontSize:"84px",color:"primary_text",fontWeight:"500",letterSpacing:"4",children:[v(o?.symbol),"-",v(a?.symbol)]}),t.jsx(H,{fontSize:"33px",color:"card_text",mt:"58px",fontWeight:"500",letterSpacing:"2",children:"Total Yield (USD)"}),t.jsx(H,{color:"primary",fontWeight:"700",fontSize:"118px",letterSpacing:"7",mt:"20px",children:T(s)}),t.jsxs(I,{w:"100%",justifyContent:"space-between",flexWrap:"wrap",position:"absolute",bottom:"0",left:"0",p:"0 50px 50px",gap:"24px",children:[u&&l?.map(e=>t.jsx(r,{label:`Total ${v(e.token?.symbol)}`,value:w(e?.amount),wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}},e.token?.coinType)),d&&t.jsx(r,{label:"Fee Tier",value:k(Y(m?.feeRate).div(p).toNumber()),wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}}),c&&t.jsx(r,{label:"BaseFee & BinStep",value:void 0!==m?.baseFeeRate?`${k(Y(m?.baseFeeRate).mul(100).toNumber())} | ${m?.binStep??"--"}bps`:"--",wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}})]})]})}const Ee=["Total Yield Token","BaseFee & BinStep"],We=["Total Yield Token","Fee Tier"];function Ve({totalYield:n,feeYieldList:o,miningYieldList:a,farmingYieldList:s,loading:l,isDlmm:g,yieldData:f}){const h=g?"dlmm":"clmm",[y,b]=e.useState([]);e.useEffect(()=>{b("dlmm"===h?Ee:We)},[h]);const[S,j]=e.useState(),_=y.includes("Total Yield Token"),D=y.includes("Fee Tier"),U=y.includes("BaseFee & BinStep"),{displayTokenA:z,displayTokenB:A,yieldList:F}=function({yieldData:t,feeYieldList:i,miningYieldList:n,farmingYieldList:o}){return{displayTokenA:t?.showReverse?t?.coinB:t?.coinA,displayTokenB:t?.showReverse?t?.coinA:t?.coinB,yieldList:e.useMemo(()=>{const e=new Map;return i.forEach(t=>{e.set(t.token?.coinType,{token:t?.token,amount:t?.amount,amountUSD:t?.amountUSD})}),n&&n?.length>0&&n.forEach(t=>{e.has(t.token?.coinType)||e.set(t.token?.coinType,{token:t?.token,amount:t?.amount,amountUSD:t?.amountUSD});const i=e.get(t.token?.coinType)?.amount,n=e.get(t.token?.coinType)?.amountUSD;e.set(t.token?.coinType,{token:t?.token,amount:Y(i).plus(t?.amount).toNumber(),amountUSD:Y(n).plus(t?.amountUSD).toNumber()})}),o&&o?.length>0&&o.forEach(t=>{e.has(t.token?.coinType)||e.set(t.token?.coinType,{token:t?.token,amount:t?.amount,amountUSD:t?.amountUSD});const i=e.get(t.token?.coinType)?.amount,n=e.get(t.token?.coinType)?.amountUSD;e.set(t.token?.coinType,{token:t?.token,amount:Y(i).plus(t?.amount).toNumber(),amountUSD:Y(n).plus(t?.amountUSD).toNumber()})}),Array.from(e.values())},[i,n,o])}}({yieldData:f,feeYieldList:o,miningYieldList:a,farmingYieldList:s}),R=C(Y(n).toNumber()),B=["flat","strong_loss"].includes(R)?[`/images/share/${R}_1.png`,`/images/share/${R}_2.png`,`/images/share/${R}_3.png`,`/images/share/${R}_4.png`]:[`/images/share/${R}_1.png`,`/images/share/${R}_2.png`,`/images/share/${R}_3.png`];return e.useEffect(()=>{j(`/images/share/${R}_1.png`)},[R,f]),t.jsxs(c,{p:{base:"0px",lg:"22px 20px 20px"},border:"1px solid",borderColor:{base:"transparent",lg:"primary.10"},flex:"1",children:[t.jsxs(V,{gap:"0px",w:"100%",children:[t.jsx(d,{w:"100%",h:{base:"auto",lg:"280px"},aspectRatio:"16 / 9",loading:l,children:t.jsxs(V,{w:"100%",p:{base:"8px",lg:"20px"},minH:{base:"auto",lg:"280px"},aspectRatio:"16 / 9",alignItems:"start",gap:"0px",justifyContent:"start",bg:{base:`center / contain no-repeat url(${S})`,lg:`center / 100% 100% no-repeat url(${S})`},pos:"relative",zIndex:"-11",children:[t.jsxs(I,{w:"100%",justifyContent:"space-between",mb:{base:"6px",lg:"32px"},children:[t.jsx(I,{justifyContent:"start",gap:"8px",children:t.jsx(i,{h:"23px",w:"auto",src:`/images/share/${h}_logo.png`})}),t.jsxs(V,{alignItems:"end",justifyContent:"start",gap:"0px",children:[t.jsx(H,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:"Snapshot by cetusbox.zone"}),t.jsx(H,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:L()})]})]}),t.jsxs(H,{fontSize:"24px",color:"primary_text",fontWeight:"500",letterSpacing:"1",children:[v(z?.symbol),"-",v(A?.symbol)]}),t.jsx(H,{fontSize:"12px",color:"card_text",mt:{base:"20px",lg:"28px"},fontWeight:"500",children:"Total Yield (USD)"}),t.jsx(H,{fontSize:{base:"32px",lg:"46px"},color:"primary",mt:{base:"8px",lg:"12px"},fontWeight:"700",children:T(n)}),t.jsxs(I,{w:"100%",justifyContent:"space-between",flexWrap:"wrap",position:"absolute",bottom:"0",left:"0",p:{base:"0 8px 8px",lg:"0 20px 20px"},children:[_&&F?.map(e=>t.jsx(r,{label:`Total ${v(e.token?.symbol)}`,value:w(e?.amount),wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}},e.token?.coinType)),D&&t.jsx(r,{label:"Fee Tier",value:k(Y(f?.feeRate).div(p).toNumber()),wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),U&&t.jsx(r,{label:"BaseFee & BinStep",value:void 0!==f?.baseFeeRate?`${k(Y(f?.baseFeeRate).mul(100).toNumber())} | ${f?.binStep??"--"}bps`:"--",wrapStyle:{justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}})]})]})}),t.jsxs(V,{w:"100%",mt:"20px",gap:"16px",children:[t.jsx(u,{data:"dlmm"===h?Ee:We,selected:y,handleSelectedChange:e=>b(e)}),S&&t.jsx(m,{imageUrls:B,currImageUrl:S,handleSelectedChange:j,loading:l})]}),t.jsx(x,{style:{mt:"28px"},card_id:"yield_card",filename:`${h}_${z?.symbol}_${A?.symbol}`})]}),t.jsx(Ne,{bgImageUrl:S,poolType:h,displayTokenA:z,displayTokenB:A,totalYield:n,yieldList:F,showBaseFee:U,showFeeTier:D,showTokenYield:_,yieldData:f})]})}function He({totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:o}){const{poolYieldData:a,isDlmm:s,poolSearchLoading:l}=P(),r=a;return t.jsx(Ve,{totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:o,loading:l,isDlmm:s,yieldData:r})}function Ge(){const{poolSearchLoading:e,poolYieldData:i,isDlmm:n}=P(),o=i,a=o?.showReverse?o.coinB:o.coinA,s=o?.showReverse?o.coinA:o.coinB;return e?t.jsx(Je,{}):t.jsx(g,{tokenA:a,tokenB:s,feeDisplay:k(n?Y(o?.baseFeeRate).mul(100).toNumber():Y(o?.feeRate).div(p).toNumber()),bps:o?.binStep})}function Je(){return t.jsx(g,{tokenA:f.SUI,tokenB:f.USDC,feeDisplay:"0.1%",bps:25,isLoading:!0})}function qe(){const{totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:o}=function(){const{poolYieldData:e}=P(),t=e,{totalYield:i,feeYieldList:n,miningYieldList:o,farmingYieldList:a}=Ie(t);return{totalYield:i,feeYieldList:n,miningYieldList:o,farmingYieldList:a}}();return t.jsxs(V,{gap:{base:"12px",lg:"28px"},mt:{base:"4px",lg:"16px"},align:"flex-start",w:"100%",pt:{base:"8px",lg:"28px"},borderTop:"1px solid",borderColor:"primary.10",children:[t.jsx(Ge,{}),t.jsxs(G,{w:"100%",gap:{base:"16px",lg:"20px"},justify:"space-between",align:"flex-start",flexDir:{base:"column",lg:"row"},children:[t.jsx(Me,{totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:o}),t.jsx(He,{totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:o})]})]})}function Ke(){const{searchPoolAddress:i,searchWalletAddress:n,setSearchPoolAddress:o,setSearchWalletAddress:a,handleSearch:s,walletErrorString:l,poolErrorString:r,handleValueClick:p,poolSearchLoading:c}=M(),{poolYieldData:d,poolRecentSearchValues:u,clearPoolRecentSearchValues:m,removePoolRecentSearchValue:x,resetPoolInput:g}=P(),f=()=>s(i,n),S=d&&!("errorMessage"in d);e.useEffect(()=>()=>{g()},[g]);const{isApp:j}=$();return t.jsxs(t.Fragment,{children:[t.jsx(N,{walletInputOptions:{value:n,onEnter:f,onInputChange:a,errorSting:l,placeholder:"Wallet address here…"},poolInputOptions:{value:i,onEnter:f,onInputChange:o,errorSting:r,placeholder:"CLMM / DLMM pool address here…"},isLoading:c,handleEnter:f,wrapStyle:{flexDir:{base:"column",lg:"row"},gap:{base:"8px",lg:"14px"}}}),t.jsx(h,{style:{mt:S?"0px":"16px"},direction:j?"column":S?"row":"column",values:u,handleClearAll:m,handleValueClick:p,handleDeleteValue:x}),c&&t.jsx(y,{w:"100%",h:"138px",children:t.jsx(U,{w:"16px",h:"16px",color:"primary",_hover:{"& svg":{fill:"primary"}}})}),S&&!c&&t.jsx(qe,{}),d&&"errorMessage"in d&&!c&&t.jsx(b,{style:{mt:"16px"},type:"fee"})]})}function Qe({totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:o}){const{positionSearching:a}=P();return t.jsx($e,{loading:a,totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:o})}function Xe({totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:o}){const{positionYieldData:a,isDlmm:s,positionSearching:l}=P(),r=a;return t.jsx(Ve,{totalYield:e,feeYieldList:i,miningYieldList:n,farmingYieldList:o,loading:l,isDlmm:s,yieldData:r})}function Ze(t){const{positionYieldData:i,currentPositionData:n}=P(),o=i,a=n,{suiClient:s}=A(),[l,r]=e.useState("");e.useEffect(()=>{(async e=>{if(o?.user)r(o.user);else try{const t=await s._client.getObject({id:e,options:{showOwner:!0,showContent:!0}});t?.data&&r(t.data.owner?.AddressOwner||"")}catch(t){}})(t||"")},[t]);const p=void 0!==a?.openActivateID&&void 0!==o?.coinA?.decimals&&void 0!==o?.coinB?.decimals?void 0!==o?.binStep?S.getPriceFromBinId(a.openActivateID,o.binStep,o.coinA.decimals,o.coinB.decimals):F.tickIndexToPrice(R(BigInt(a?.openActivateID)),o.coinA.decimals,o.coinB.decimals):void 0,c=o?.showReverse?o?.coinB:o?.coinA,d=o?.showReverse?o?.coinA:o?.coinB;return{addressOwner:l,openPrice:void 0!==p?o?.showReverse?S?.getReversePrice(p):p:void 0,displayTokenA:c,displayTokenB:d,data:"feeRate"in o?{...a,feeRate:o?.feeRate}:{...a,binStep:o?.binStep,baseFeeRate:o?.baseFeeRate}}}function et({positionId:e}){const{positionSearching:i}=P(),{addressOwner:n,openPrice:o,displayTokenA:a,displayTokenB:s,data:l}=Ze(e);return t.jsx(j,{loading:i,addressOwner:n,data:l,openPrice:o,displayTokenA:a,displayTokenB:s})}function tt(){const{totalYield:i,feeYieldList:n,miningYieldList:o,farmingYieldList:a}=function(){const{positionYieldData:t,currentPositionData:i}=P(),n=t,o=i,a=e.useMemo(()=>({...n,positions:n?.positions?.filter(e=>e?.positionID===o?.positionID)}),[o?.positionID,n]),{totalYield:s,feeYieldList:l,miningYieldList:r,farmingYieldList:p}=Ie(a);return{totalYield:s,feeYieldList:l,miningYieldList:r,farmingYieldList:p}}(),{currentPositionData:s}=P();return t.jsxs(V,{gap:{base:"12px",lg:"28px"},align:"flex-start",w:"100%",pt:{base:"8px",lg:"28px"},children:[t.jsx(et,{positionId:s?.positionID}),t.jsxs(G,{w:"100%",gap:{base:"16px",lg:"20px"},justify:"space-between",align:"flex-start",flexDir:{base:"column",lg:"row"},children:[t.jsx(Qe,{totalYield:i,feeYieldList:n,miningYieldList:o,farmingYieldList:a}),t.jsx(Xe,{totalYield:i,feeYieldList:n,miningYieldList:o,farmingYieldList:a})]})]})}function it(){const{activeTab:i,tabs:n,handleTabChange:o}=function(){const{positionYieldData:t,setCurrentPositionData:i}=P(),[n,o]=e.useState(),{isApp:a}=$(),s=t,l=s?.positions?.map(e=>({label:a?`#${z(e?.positionID)}`:`Position #${z(e?.positionID)}`,value:e?.positionID}));return e.useEffect(()=>{l&&l.length>0&&!n&&(o(l[0]),i(s.positions[0]))},[l]),{activeTab:n,tabs:l,handleTabChange:e=>{o(e);const t=s?.positions.find(t=>t.positionID===e.value);t&&i(t)}}}();return t.jsx(_,{activeTab:i,tabs:n,handleTabChange:o,children:t.jsx(tt,{},i?.value)})}function nt(){const{searchPositionId:i,setSearchPositionId:n,handleSearch:o,positionErrorString:a,positionSearching:s,handleValueClick:l}=E(),{positionYieldData:r,positionRecentSearchValues:p,clearPositionRecentSearchValues:c,removePositionRecentSearchValue:d,resetPositionInput:u}=P(),m=r&&!("errorMessage"in r);e.useEffect(()=>()=>{u()},[u]);const{isApp:x}=$();return t.jsxs(t.Fragment,{children:[t.jsx(B,{errorSting:a,placeholder:"CLMM / DLMM position or transaction address here…",value:i,onEnter:()=>o(i),onInputChange:n,isLoading:s}),t.jsx(h,{style:{mt:m?"0px":"16px"},direction:x?"column":m?"row":"column",values:p,handleClearAll:c,handleValueClick:l,handleDeleteValue:d}),s&&t.jsx(y,{w:"100%",h:"138px",children:t.jsx(U,{w:"16px",h:"16px",color:"primary",_hover:{"& svg":{fill:"primary"}}})}),m&&!s&&t.jsx(it,{}),r&&"errorMessage"in r&&!s&&t.jsx(b,{style:{mt:"16px"},type:"fee"})]})}function ot(){const{poolYieldData:i,positionYieldData:o,searchTab:a,setSearchTab:s}=P(),l=i&&!("errorMessage"in i)||o&&!("errorMessage"in o);return e.useEffect(()=>()=>{s("pool")},[]),t.jsxs(V,{gap:"12px",w:{base:"100%",lg:l?"940px":"700px"},mt:{base:l?"20px":"80px",lg:l?"20px":"147px"},align:l?"flex-start":"center",children:[t.jsx(H,{color:"primary_text",fontSize:"20px",fontWeight:"500",children:"Yield"}),t.jsx(H,{mb:{base:"0px",lg:"8px"},color:"second_text",fontSize:"12px",lineHeight:"20px",children:"Track your yield from Cetus CLMM and DLMM, including claimed and unclaimed rewards. You can check an aggregate yield from pool or detailed yield from individual position. Generate a shareable yield card for easy reference."}),t.jsx(W,{}),t.jsx(n,{mt:"-4px"}),"pool"===a?t.jsx(Ke,{}):t.jsx(nt,{})]})}export{ot as default};
