import{j as e,B as t,e as n,I as a}from"./index-Bi0RRSrW.js";import{H as s,S as o,a as i,E as l,C as r,b as p,B as c,c as x,d,e as u,f as g,g as h,F as b,h as f,M as m,R as S,i as y,j}from"./index-BFWTxG_O.js";import{b as w,z as D,f as v,u as C,Z as z,R as _,c as U,d as k,D as T,G as P,e as B,g as A,t as L,h as I,i as $,j as R,k as W,l as E,S as O,a as F}from"./suiClient-DpGRkk4A.js";import{H as M,u as V,C as N}from"./useSize-DNUjQ0WX.js";import{V as H,T as Y,S as G}from"./v-stack-D45uzlHn.js";import{a as X,b as Z,u as q}from"./usePerformance-BfTHBn8d.js";import"./toaster-Bqg4J1u9.js";import"./button-CifcysxZ.js";function J({tabs:n,activeTab:a,onChange:s,wrapStyle:o={},tabStyle:i={}}){const l=e=>"string"==typeof a?a===e.value:a?.value===e.value;return e.jsx(M,{gap:{base:"20px",lg:"40px"},...o,children:n.map(n=>e.jsxs(H,{flex:"1",cursor:"pointer",align:"center",onClick:()=>s(n),gap:"12px",...i,children:[e.jsx(Y,{whiteSpace:"nowrap",fontSize:"12px",fontWeight:"500",textShadow:l(n)?"0px 0px 10px rgba(103,255,164,0.3)":"none",color:l(n)?"primary_text":"second_text",children:n.label}),e.jsx(t,{w:"40px",h:"2px",borderRadius:"4px",bg:l(n)?"primary":"transparent"})]},n?.key||n?.value))})}function K({total:t,currentPage:n,pageSize:a,onPageChange:o}){const i=Math.ceil(t/a);return e.jsxs(M,{gap:"8px",w:"100%",justifyContent:"center",children:[e.jsx(s,{w:"40px",h:"28px",borderRadius:"0px",onClick:()=>o(1),disabled:1===n,children:e.jsx(N,{name:"icon-icon_download",boxSize:"14px",rotate:"90deg",_hover:{fill:1===n?"second_text":"primary"}})}),e.jsx(s,{w:"40px",h:"28px",borderRadius:"0px",onClick:()=>o(n-1),disabled:1===n,children:e.jsx(N,{name:"icon-icon_arrow",boxSize:"16px",rotate:"225deg",_hover:{fill:1===n?"second_text":"primary"}})}),e.jsxs(Y,{fontSize:"12px",color:"primary_text",children:["1-",i," of ",n]}),e.jsx(s,{w:"40px",h:"28px",borderRadius:"0px",onClick:()=>o(n+1),disabled:n===i,children:e.jsx(N,{name:"icon-icon_arrow",boxSize:"16px",rotate:"45deg",_hover:{fill:n===i?"second_text":"primary"}})}),e.jsx(s,{w:"40px",h:"28px",borderRadius:"0px",onClick:()=>o(i),disabled:n===i,children:e.jsx(N,{name:"icon-icon_download",boxSize:"14px",rotate:"270deg",_hover:{fill:n===i?"second_text":"primary"}})})]})}function Q(){return{getExplorerUrl:(e,t="account",n="SuiVision")=>{let a;return a="SuiVision"==n?`https://suivision.xyz/${te(t)}/${e}`:`https://suiscan.xyz/mainnet/${ee(t)}/${e}`,a}}}const ee=e=>{switch(e){case"account":return"address";case"token":case"poolAddress":case"nftAddress":case"package":default:return"object";case"tx":return"tx";case"coin":return"coin"}},te=e=>{switch(e){case"account":return"account";case"token":case"poolAddress":case"nftAddress":default:return"object";case"tx":return"txblock";case"coin":return"coin";case"package":return"package"}};function ne(){const{suiClient:e}=C(),{addTokens:t,getToken:n}=Z();return{getToken:async a=>{try{if(!a)return;const s=n(a);if(s)return s;const o=z(a,!1),i=await(async n=>{try{const a=await e.fetchCoinMetadata(n);if(a){_.isSuiCoin(n)&&(a.iconUrl="https://archive.cetus.zone/assets/image/sui/sui.png");const e=U(a,n);return t([e]),e}}catch(a){}})(o);return i}catch(s){return}}}}function ae(){const{searchLoading:t,getPositionLoading:a}=X(),{total:s,currentPage:o,handlePageChange:i,pageSize:l,data:r}=function(){const{fetchByApi:e}=k(),{positionData:t,setGetPositionLoading:a}=X(),{addTokens:s}=Z(),[o,i]=n.useState(),[l,r]=n.useState(0),[p,c]=n.useState(1),x=n.useRef(5),d=n.useEffectEvent(async(t,n=1)=>{a(!0);try{const o=await e(T,"GET",{position_id:t,offset:(n-1)*x?.current,limit:x?.current});if(o&&o?.pool){const e=o?.showReverse?o?.coinB:o?.coinA,t=o?.showReverse?o?.coinA:o?.coinB,n=n=>n.coinType===e?.coinType?0:n.coinType===t?.coinType?1:2,a={...o,history:o?.history?.map(e=>({...e,eventData:e?.eventData?.sort((e,t)=>n(e)-n(t))??[]}))};i(a),r(o.totalEvent),s([o?.coinA,o?.coinB])}else i(void 0);a(!1)}catch(o){i(void 0),a(!1)}});n.useEffect(()=>{d(t?.positionID||"",p)},[t?.positionID,p]);const u=o?.history?.filter(e=>!["OpenPosition","ClosePosition"].includes(e?.eventType));return{total:l,eventRecord:o,currentPage:p,handlePageChange:e=>{c(e)},pageSize:x.current,data:u}}();return e.jsxs(H,{w:"100%",alignItems:"start",gap:"0px",mt:{base:"8px",lg:"0px"},children:[e.jsx(Y,{color:"primary_text",fontSize:"14px",children:"Events"}),t||a?e.jsx(se,{}):r?.map((t,n)=>e.jsx(oe,{item:t,showBorder:n!==r.length-1},`${t?.tx}-${t?.eventType}`)),!t&&!!s&&s>0&&s>l&&e.jsx(K,{total:s??0,currentPage:o,pageSize:l,onPageChange:i})]})}function se(){return e.jsx(H,{w:"100%",alignItems:"start",gap:"0px",children:[1,2,3,4,5].map(n=>e.jsxs(H,{pt:"16px",pb:"16px",w:"100%",gap:"12px",borderBottom:"1px solid",borderColor:"primary.10",children:[e.jsxs(M,{w:"100%",justifyContent:"space-between",children:[e.jsx(o,{h:"20px",noOfLines:1,w:"100px"}),e.jsx(M,{gap:"2px",children:e.jsx(o,{h:"20px",noOfLines:1,w:"100px"})})]}),e.jsx(M,{w:"100%",children:e.jsxs(M,{gap:"16px",children:[e.jsxs(M,{children:[e.jsx(i,{size:"24px"}),e.jsx(o,{h:"32px",noOfLines:1,w:"60px"})]}),e.jsx(t,{w:"1px",h:"32px",bg:"primary.10"}),e.jsxs(M,{children:[e.jsx(i,{size:"24px"}),e.jsx(o,{h:"32px",noOfLines:1,w:"60px"})]})]})})]},n))})}function oe(n){const{item:a,showBorder:o}=n,{getExplorerUrl:i}=Q(),r=a.eventData?.filter(e=>e&&D(e?.rewardAmount).gt(0));return e.jsxs(H,{pt:"16px",pb:"16px",w:"100%",gap:"12px",borderBottom:o?"1px solid":"none",borderColor:"primary.20",children:[e.jsxs(M,{w:"100%",justifyContent:"space-between",children:[e.jsx(Y,{bg:"second_text.10",pl:"8px",pr:"8px",h:"20px",lineHeight:"20px",color:"primary",fontSize:"12px",children:l[a?.eventType]}),e.jsx(P,{children:e.jsxs(s,{gap:"2px",onClick:()=>{window.open(i(a.tx,"tx"),"_blank")},bg:"transparent",h:"20px",_hover:{bg:"transparent","& p":{color:"primary"},"& svg":{fill:"primary"}},children:[e.jsx(Y,{color:"second_text",fontSize:"12px",children:B(a.timestamp)}),e.jsx(N,{name:"icon-icon_arrow",boxSize:"12px",_groupHover:{fill:"primary"}})]})})]}),e.jsx(M,{w:"100%",gap:"16px",children:r?.map((n,a)=>e.jsx(ie,{rewardItem:n,children:r&&r.length-1!==a&&e.jsx(t,{w:"1px",h:"32px",bg:"primary.10"})},n.coinType))})]})}const ie=({rewardItem:t,children:a})=>{const{getToken:s}=ne(),[o,i]=n.useState(),l=n.useEffectEvent(async e=>{try{const t=await s(e);t&&i(t)}catch(t){}});return n.useEffect(()=>{l(t?.coinType)},[t?.coinType]),e.jsxs(e.Fragment,{children:[e.jsxs(M,{gap:"8px",pb:"4px",children:[e.jsx(r,{src:o?.logoURL,size:"24px"}),e.jsxs(H,{alignItems:"start",gap:"4px",children:[e.jsxs(Y,{fontSize:"12px",color:"primary_text",children:[A(t?.rewardAmount)," ",L(o?.symbol)]}),e.jsxs(Y,{fontSize:"12px",color:"second_text",children:["(~$",A(t?.rewardUSD),")"]})]})]}),a]})};function le({bgImageUrl:n,showOnCard:s,positionData:o,displayTokenA:i,displayTokenB:l,mainDisplay:r,color:c,pnlUSD:x,pnlPercentage:d,totalDepositUSD:u,showBaseFee:g}){return e.jsxs(H,{id:"performance_card",w:"1280px",p:"50px",h:"720px",aspectRatio:"16 / 9",alignItems:"start",gap:"0px",justifyContent:"start",pos:"absolute",left:"-9999px",top:"-9999px",children:[e.jsx(a,{pos:"absolute",src:n,w:"100%",h:"100%",zIndex:"-11",top:"0",left:"0"}),e.jsxs(M,{w:"100%",justifyContent:"space-between",mb:"52px",children:[e.jsx(a,{src:"/images/share/dlmm_logo.png",h:"58px",w:"auto"}),e.jsxs(H,{alignItems:"end",justifyContent:"start",gap:"0px",children:[e.jsx(Y,{color:"primary_text",fontSize:"26px",letterSpacing:"2",lineHeight:"38px",children:"Snapshot by cetusbox.zone"}),e.jsx(Y,{color:"primary_text",fontSize:"26px",letterSpacing:"2",lineHeight:"38px",children:I()})]})]}),s.includes("Duration")?e.jsxs(M,{justifyContent:"start",gap:"10px",mb:"24px",display:"flex",children:[e.jsx(Y,{color:"card_text",fontWeight:"500",fontSize:"33px",letterSpacing:"2",children:"Duration"}),e.jsx(Y,{color:"primary_text",fontSize:"33px",fontWeight:"500",letterSpacing:"2",children:$(o?.openPositionTimestamp||0,o?.closePositionTimestamp)})]}):e.jsx(t,{h:"33px",mb:"24px"}),e.jsxs(Y,{fontSize:"84px",color:"primary_text",fontWeight:"500",letterSpacing:"4",children:[L(i?.symbol),"-",L(l?.symbol)]}),e.jsx(Y,{fontSize:"33px",color:"card_text",mt:"58px",fontWeight:"500",letterSpacing:"2",children:"amount"===r?"Profit (USD)":"Profit (%)"}),e.jsx(Y,{fontWeight:"700",fontSize:"118px",letterSpacing:"7",color:c,mt:"20px",children:"amount"===r?x:d}),e.jsxs(M,{display:"flex",flexWrap:"wrap",w:"100%",justifyContent:"space-between",position:"absolute",bottom:"0",left:"0",p:"0 50px 50px",children:[s.includes("Total Deposit")&&e.jsx(p,{label:"Deposit",value:`$${A(u)}`,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}}),g&&e.jsx(p,{label:"Base fee",value:R(D(o?.baseFeeRate).mul(100).toNumber()),wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}}),g&&e.jsx(p,{label:"Bin Step",value:o?.binStep||0,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}}),s.includes("pnl & amount")&&"amount"===r&&e.jsx(p,{label:"PNL",value:d,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}}),s.includes("pnl & amount")&&"pnl"===r&&e.jsx(p,{label:"Amount",value:x,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:"33px",letterSpacing:"2"},valueStyle:{fontSize:"33px",letterSpacing:"2"},skeletonStyle:{h:"33px",w:"200px"}})]})]})}function re({totalDepositUSD:s,pnlUSD:o,pnlPercentage:i}){const{searchLoading:l,performanceData:r,positionData:h}=X(),[b,f]=n.useState("pnl"),[m,S]=n.useState(["Total Deposit","BaseFee & BinStep","Duration","pnl & amount"]),[y,j]=n.useState(),w=m.includes("BaseFee & BinStep"),v=[{label:"Total Deposit",value:"Total Deposit"},{label:"BaseFee & BinStep",value:"BaseFee & BinStep"},{label:"Duration",value:"Duration"},{label:"amount"===b?"$Amount":"%PnL",value:"pnl & amount"}],C=h?.showReverse?h?.coinB:h?.coinA,z=h?.showReverse?h?.coinA:h?.coinB,_=D(h?.pnlUSD).gte(0)?"primary":"primary_red",U=W(D(h?.roi).mul(100).toNumber()),k=["flat","strong_loss"].includes(U)?[`/images/share/${U}_1.png`,`/images/share/${U}_2.png`,`/images/share/${U}_3.png`,`/images/share/${U}_4.png`]:[`/images/share/${U}_1.png`,`/images/share/${U}_2.png`,`/images/share/${U}_3.png`];return n.useEffect(()=>{j(`/images/share/${U}_1.png`)},[U]),e.jsxs(c,{p:{base:"0px",lg:"22px 20px 20px"},border:"1px solid",borderColor:{base:"transparent",lg:"primary.10"},flex:"1",children:[e.jsxs(H,{gap:"0px",w:"100%",children:[e.jsx(x,{w:"100%",aspectRatio:"16 / 9",h:{base:"auto",lg:"280px"},loading:l,children:e.jsxs(H,{w:"100%",p:{base:"8px",lg:"20px"},h:{base:"auto",lg:"280px"},aspectRatio:"16 / 9",alignItems:"start",gap:"0px",justifyContent:"start",pos:"relative",children:[e.jsx(a,{pos:"absolute",src:y,w:"100%",h:"100%",zIndex:"-11",top:"0",left:"0"}),e.jsxs(M,{display:"flex",w:"100%",justifyContent:"space-between",mb:{base:"6px",lg:"24px"},children:[e.jsx(a,{h:"23px",w:"auto",src:"/images/share/dlmm_logo.png"}),e.jsxs(H,{alignItems:"end",justifyContent:"start",gap:"0px",children:[e.jsx(Y,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:"Snapshot by cetusbox.zone"}),e.jsx(Y,{color:"primary_text",fontSize:"10px",lineHeight:"15px",children:I()})]})]}),m.includes("Duration")?e.jsxs(M,{justifyContent:"start",gap:"8px",mb:{base:"6px",lg:"12px"},display:"flex",children:[e.jsx(Y,{color:"card_text",fontWeight:"500",fontSize:"12px",children:"Duration"}),e.jsx(Y,{color:"primary_text",fontSize:"12px",fontWeight:"500",children:$(h?.openPositionTimestamp||0,h?.closePositionTimestamp)})]}):e.jsx(t,{h:"12px",mb:{base:"6px",lg:"20px"}}),e.jsxs(Y,{fontSize:"24px",color:"primary_text",fontWeight:"500",letterSpacing:"1",children:[L(C?.symbol),"-",L(z?.symbol)]}),e.jsx(Y,{fontSize:"12px",color:"card_text",mt:{base:"8px",lg:"24px"},fontWeight:"500",letterSpacing:"1",children:"amount"===b?"Profit (USD)":"Profit (%)"}),e.jsx(Y,{fontWeight:"700",fontSize:{base:"32px",lg:"46px"},color:_,mt:{base:"4px",lg:"8px"},children:"amount"===b?o:i}),e.jsxs(M,{display:"flex",flexWrap:"wrap",w:"100%",justifyContent:"space-between",position:"absolute",bottom:"0",left:"0",p:{base:"0 8px 8px",lg:"0 20px 20px"},children:[m.includes("Total Deposit")&&e.jsx(p,{label:"Deposit",value:`$${A(s)}`,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),w&&e.jsx(p,{label:"Base fee",value:R(D(h?.baseFeeRate).mul(100).toNumber()),wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),w&&e.jsx(p,{label:"Bin Step",value:h?.binStep||0,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),m.includes("pnl & amount")&&"amount"===b&&e.jsx(p,{label:"PNL",value:i,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}}),m.includes("pnl & amount")&&"pnl"===b&&e.jsx(p,{label:"Amount",value:o,wrapStyle:{display:"flex",justifyContent:"center",w:"unset"},labelStyle:{fontSize:{base:"10px",lg:"12px"}},valueStyle:{fontSize:{base:"10px",lg:"12px"}},skeletonStyle:{h:{base:"10px",lg:"20px"},w:{base:"36px",lg:"48px"}}})]})]})}),e.jsxs(H,{w:"100%",mt:"20px",gap:"16px",children:[e.jsx(pe,{currType:b,handleMainDisplayChange:f}),e.jsx(d,{data:v,selected:m,handleSelectedChange:e=>{S(e)}}),y&&e.jsx(u,{imageUrls:k,currImageUrl:y,handleSelectedChange:j,loading:l})]}),e.jsx(g,{style:{mt:"28px"},card_id:"performance_card",filename:`dlmm_${C?.symbol}_${z?.symbol}`})]}),e.jsx(le,{bgImageUrl:y,showOnCard:m,positionData:h,displayTokenA:C,displayTokenB:z,mainDisplay:b,color:_,pnlUSD:o,pnlPercentage:i,totalDepositUSD:s,showBaseFee:w})]})}function pe(t){const{currType:n,handleMainDisplayChange:a}=t;return e.jsxs(M,{w:"100%",justifyContent:"space-between",children:[e.jsx(Y,{fontSize:"12px",color:"second_text",children:"Main Display"}),e.jsxs(M,{justifyContent:"end",children:[e.jsx(Y,{cursor:"pointer",fontSize:"12px",color:"amount"===n?"primary":"second_text",onClick:()=>a("amount"),children:"$Amount"}),e.jsx(h,{orientation:"vertical",height:"8px",borderColor:"second_text.50"}),e.jsx(Y,{cursor:"pointer",fontSize:"12px",color:"pnl"===n?"primary":"second_text",onClick:()=>a("pnl"),children:"%PnL"})]})]})}function ce(t){const{isCancelBubble:n=!0,address:a,hasUnderline:s=!0,onClickLink:o,addressAbridgeStyle:i,subStringLengthStart:l=6,subStringLengthEnd:r=4,...p}=t;return e.jsx(Y,{cursor:"pointer",color:"primary_text",fontSize:"12px",_hover:{textDecoration:s?"underline":"none"},onClick:e=>{n&&E(e),o()},...p,children:w(a,i,l,r)})}function xe({label:t,value:n,wrapStyle:a={},labelStyle:s={},valueStyle:i={},skeletonStyle:l={},isLoading:r,onClickLink:p}){return e.jsxs(H,{gap:"8px",alignItems:"end",...a,children:[e.jsx(Y,{fontSize:"12px",color:"second_text",...s,children:t}),r?e.jsx(o,{h:"20px",noOfLines:1,w:"48px",...l}):p?e.jsx(ce,{address:n??"",onClickLink:p,hasUnderline:!0,fontSize:"12px",color:"primary_text",fontWeight:"600",...i}):e.jsx(Y,{fontSize:"12px",color:"primary_text",fontWeight:"600",...i,children:n})]})}function de(){const{positionData:e}=X(),{suiClient:t}=C(),[a,s]=n.useState("");n.useEffect(()=>{(async e=>{try{const n=await t._client.getObject({id:e,options:{showOwner:!0}});n&&n?.data&&s(n.data.owner?.AddressOwner||"")}catch(n){}})(e?.positionID||"")},[e?.positionID]);const o=void 0!==e?.openActivateID&&void 0!==e?.binStep&&void 0!==e?.coinA?.decimals&&void 0!==e?.coinB?.decimals?b.getPriceFromBinId(e.openActivateID,e.binStep,e.coinA.decimals,e.coinB.decimals):void 0,i=e?.showReverse?e?.coinB:e?.coinA,l=e?.showReverse?e?.coinA:e?.coinB;return{addressOwner:a,openPrice:void 0!==o?e?.showReverse?b?.getReversePrice(o):o:void 0,displayTokenA:i,displayTokenB:l,positionData:e}}function ue(){const{searchLoading:t,performanceData:n}=X(),{getExplorerUrl:a}=Q(),{addressOwner:s,openPrice:o,displayTokenA:i,displayTokenB:l,positionData:r}=de();return t?e.jsx(ge,{}):e.jsxs(G,{flexDir:{base:"column",lg:"row"},gap:"16px",w:"100%",justifyContent:"space-between",alignItems:{base:"start",lg:"end"},children:[e.jsxs(H,{alignItems:"start",gap:{base:"8px",lg:"12px"},children:[e.jsxs(Y,{color:"second_text",fontSize:"12px",children:["Open in:"," ",r?.openPositionTimestamp?B(r.openPositionTimestamp):"-"]}),e.jsx(f,{tokenA:i,tokenB:l,feeDisplay:R(D(r?.baseFeeRate).mul(100).toNumber()),bps:r?.binStep})]}),e.jsxs(G,{gap:{base:"12px",lg:"32px"},flexDir:{base:"column",lg:"row"},w:{base:"100%",lg:"auto"},children:[e.jsx(xe,{wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},label:"Open Price",value:`${A(o||0)} ${L(l?.symbol)} per ${L(i?.symbol)}`}),e.jsx(xe,{wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},label:"Duration",value:$(r?.openPositionTimestamp||0,r?.closePositionTimestamp)}),e.jsx(xe,{wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},label:"NFT Address",value:r?.positionID||"-",onClickLink:()=>{window.open(a(r?.positionID,"nftAddress"),"_blank")}}),s&&e.jsx(xe,{wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},label:"Owned By",value:s,onClickLink:()=>{window.open(a(s,"account"),"_blank")}})]})]})}function ge(){return e.jsxs(G,{flexDir:{base:"column",lg:"row"},gap:"16px",w:"100%",justifyContent:"space-between",alignItems:{base:"start",lg:"end"},children:[e.jsxs(H,{alignItems:"start",gap:{base:"8px",lg:"12px"},children:[e.jsx(o,{h:"20px",noOfLines:1,w:"100px"}),e.jsx(f,{tokenA:m.SUI,tokenB:m.USDC,feeDisplay:"0.1%",bps:25,isLoading:!0})]}),e.jsxs(G,{gap:{base:"12px",lg:"32px"},flexDir:{base:"column",lg:"row"},w:{base:"100%",lg:"auto"},children:[e.jsx(xe,{label:"Open Price",value:"2.4931 USDC per SUl",wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}},isLoading:!0}),e.jsx(xe,{label:"Duration",value:"10d 23h 12m",isLoading:!0,wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}}}),e.jsx(xe,{label:"NFT Address",value:"0x12…34YTGu",isLoading:!0,wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}}}),e.jsx(xe,{label:"Owned By",value:"0x12…34YTGu",isLoading:!0,wrapStyle:{flexDir:{base:"row",lg:"column"},w:{base:"100%",lg:"auto"},justify:{base:"space-between",lg:"center"}}})]})]})}function he({totalDepositUSD:t,totalYieldUSD:n,totalWithdrawUSD:a,currentPositionUSD:s,pnlUSD:o,pnlPercentage:i}){const{searchLoading:l,positionData:r}=X(),x=D(r?.pnlUSD).gte(0)?"primary":"primary_red";return e.jsx(c,{p:{base:"16px",lg:"20px"},children:e.jsxs(H,{w:"100%",alignItems:"start",gap:"10px",children:[e.jsx(Y,{color:"primary_text",fontSize:"14px",children:"Profit and Loss"}),e.jsx(c,{p:"0px",mt:"4px",bg:"secondary_background.10",borderColor:"transparent",children:e.jsxs(M,{h:"76px",w:"100%",justifyContent:"space-between",children:[e.jsx(M,{justifyContent:"center",w:"50%",children:e.jsx(xe,{label:"$Amount",value:o,wrapStyle:{alignItems:"center",gap:"4px"},valueStyle:{fontSize:"16px",color:x},isLoading:l})}),e.jsx(M,{justifyContent:"center",w:"50%",children:e.jsx(xe,{label:"%PnL",value:i,wrapStyle:{alignItems:"center",gap:"4px"},valueStyle:{fontSize:"16px",color:x},isLoading:l})})]})}),e.jsx(p,{label:"Current Position",value:`$${A(s)}`,wrapStyle:{mt:"6px"},isLoading:l}),e.jsx(p,{label:"Total Deposit",value:`$${A(t)}`,isLoading:l}),e.jsx(p,{label:"Total Yield",value:`$${A(n)}`,isLoading:l}),e.jsx(p,{label:"Total Withdrawal",value:`$${A(a)}`,isLoading:l})]})})}function be(){const{totalDepositUSD:t,totalYieldUSD:n,totalWithdrawUSD:a,currentPositionUSD:s,pnlUSD:o,pnlPercentage:i}=function(){const{positionData:e}=X(),t=D(e?.historicalData?.totalDepositAUSD).plus(e?.historicalData?.totalDepositBUSD).toString(),n=D(e?.historicalData?.totalClaimedFeeAUSD).plus(e?.historicalData?.totalClaimedFeeBUSD).plus(e?.historicalData?.totalClaimedRewards?.reduce((e,t)=>e.plus(t?.rewardUSD),D(0))).plus(e?.currentData?.unclaimedFeeAUSD)?.plus(e?.currentData?.unclaimedFeeBUSD)?.plus(e?.currentData?.unclaimedRewardsUSD?.reduce((e,t)=>e.plus(t?.uUnClaimedUSD),D(0))).toString();return{totalDepositUSD:t,totalYieldUSD:n,totalWithdrawUSD:D(e?.historicalData?.totalWithdrawAUSD).plus(e?.historicalData?.totalWithdrawBUSD).toString(),currentPositionUSD:D(e?.currentData?.coinAUSD).plus(e?.currentData?.coinBUSD).toString(),pnlUSD:v(e?.pnlUSD),pnlPercentage:v(D(e?.pnlUSD).div(t).times(100).toNumber(),"percentage")}}(),{isApp:l}=V();return e.jsxs(H,{gap:"0px",w:"100%",mt:"20px",children:[e.jsx(ue,{}),e.jsxs(G,{flexDir:{base:"column",lg:"row"},mt:{base:"28px",lg:"18px"},gap:{base:"16px",lg:"20px"},w:"100%",justifyContent:{base:"center",lg:"space-between"},alignItems:{base:"center",lg:"start"},children:[e.jsxs(H,{w:{base:"100%",lg:"380px"},minW:{base:"100%",lg:"380px"},gap:"20px",children:[e.jsx(he,{totalDepositUSD:t,totalYieldUSD:n,totalWithdrawUSD:a,currentPositionUSD:s,pnlUSD:o,pnlPercentage:i}),!l&&e.jsx(ae,{})]}),e.jsx(re,{totalDepositUSD:t,pnlUSD:o,pnlPercentage:i}),l&&e.jsx(ae,{})]})]})}function fe(){const{activeTab:a,tabs:s,handleTabChange:o}=function(){const{performanceData:e,setPositionData:t}=X(),[a,s]=n.useState(),{isApp:o}=V(),i=e,l=i?.list?.map(e=>({label:o?`#${w(e?.positionID)}`:`Position #${w(e?.positionID)}`,value:e?.positionID}));return n.useEffect(()=>{l&&l.length>0&&!a&&(s(l[0]),t(i.list[0]))},[l]),{activeTab:a,tabs:l,handleTabChange:e=>{s(e);const n=i?.list.find(t=>t.positionID===e.value);n&&t(n)}}}();return a&&e.jsxs(H,{w:"100%",mt:{base:"4px",lg:"16px"},children:[s&&s?.length>1?e.jsx(t,{w:"100%",borderBottom:"1px solid",borderColor:"primary.10",children:e.jsx(J,{tabs:s,activeTab:a,onChange:o,wrapStyle:{w:"fit-content",overflowX:"auto",scrollbarGutter:"stable",scrollbarWidth:"thin"}})}):e.jsx(t,{w:"100%",borderBottom:"1px solid",borderColor:"primary.10"}),e.jsx(be,{},a?.value)]})}function me(){const{searchValue:t,setSearchValue:a,handleSearch:s,inputErrorString:o,searchLoading:i,handleValueClick:l,hasPerformanceData:r}=q(),{performanceData:p,recentSearchValues:c,clearRecentSearchValues:x,removeRecentSearchValue:d,resetInput:u}=X();n.useEffect(()=>()=>{u()},[u]);const{isApp:g}=V();return e.jsxs(H,{gap:"12px",w:{base:"100%",lg:r?"940px":"520px"},mt:{base:r?"40px":"100px",lg:r?"20px":"147px"},children:[e.jsx(Y,{alignSelf:r?"start":"center",color:"primary_text",fontSize:"20px",fontWeight:"500",children:"DLMM Performance"}),e.jsx(Y,{mb:"8px",color:"second_text",fontSize:"12px",lineHeight:"20px",children:"Track your Cetus DLMM profits in style. Enter an NFT address, or any related transaction such as deposit, remove, or claim to view and share your performance."}),e.jsx(O,{errorSting:o,placeholder:"DLMM position or transaction address here…",value:t,onEnter:()=>s(t),onInputChange:a,isLoading:i}),e.jsx(S,{style:{mt:r?"0px":"16px"},direction:g?"column":r?"row":"column",values:c,handleClearAll:x,handleValueClick:l,handleDeleteValue:d}),i&&e.jsx(y,{h:"138px",children:e.jsx(F,{w:"16px",h:"16px",color:"primary",_hover:{"& svg":{fill:"primary"}}})}),r&&!i&&e.jsx(fe,{}),p&&"error_message"in p&&!i&&e.jsx(j,{style:{mt:"16px"},type:"performance"})]})}export{me as default};
