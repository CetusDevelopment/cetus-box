import{c as e,S as r}from"./v-stack-BY_1ISyr.js";import{j as a,e as s}from"./index-ybds6jRs.js";import{H as t,C as o}from"./useSize-Dvc3rk6B.js";import{S as l,a as n,c,p as i,u as d,b as u,f as h,C as S,g as p}from"./suiClient-flJkUD6N.js";const{withContext:g}=e({key:"heading"}),m=g("h2");function f({walletInputOptions:e,poolInputOptions:s,wrapStyle:c={},enterStyle:i={},isLoading:d,handleEnter:u,onFocus:h,onBlur:S}){const p=d||!e?.value||!s?.value;return a.jsxs(r,{gap:"4px",w:"full",...c,children:[a.jsx(l,{showEnter:!1,...e,onFocus:h,onBlur:S}),a.jsx(l,{showEnter:!1,...s,onFocus:h,onBlur:S}),a.jsx(t,{onClick:u,cursor:p?"not-allowed":"pointer",bg:{base:p?"primary.60":"primary",lg:"primary.60"},_hover:p?void 0:{bg:"primary"},opacity:p?.6:1,flex:{base:"0 0 32px",lg:"0 0 44px"},h:{base:"32px",lg:"44px"},justify:"center",align:"center",borderRadius:"0px",...i,children:d?a.jsx(n,{w:"16px",h:"16px"}):a.jsx(o,{name:"icon-icon_search",boxSize:"16px",color:"primary_bg",_hover:{fill:"primary_bg"}})})]})}m.displayName="Heading";const _=e=>`${e.search_value}::${e.sub_search_value??""}`,v=c()(i(e=>({searchWalletAddress:"",setSearchWalletAddress:r=>{e({searchWalletAddress:r})},searchPoolAddress:"",setSearchPoolAddress:r=>{e({searchPoolAddress:r})},isDlmm:!1,setIsDlmm:r=>{e({isDlmm:r})},yieldData:void 0,setYieldData:r=>{e({yieldData:r})},walletErrorString:void 0,setWalletErrorString:r=>{e({walletErrorString:r})},poolErrorString:void 0,setPoolErrorString:r=>{e({poolErrorString:r})},searchLoading:!1,setSearchLoading:r=>{e({searchLoading:r})},recentSearchValues:[],setRecentSearchValues:r=>{e({recentSearchValues:r})},addRecentSearchValue:r=>{e(e=>{const a=_(r);return e.recentSearchValues.some(e=>_(e)===a)?e:{recentSearchValues:[r,...e.recentSearchValues]}})},removeRecentSearchValue:r=>{e(e=>({recentSearchValues:e.recentSearchValues.filter(e=>_(e)!==_(r))}))},clearRecentSearchValues:()=>{e({recentSearchValues:[]})},resetInput:()=>{e({searchWalletAddress:"",searchPoolAddress:"",yieldData:void 0,walletErrorString:void 0,poolErrorString:void 0,searchLoading:!1})}}),{name:"useYieldStore",partialize:e=>({recentSearchValues:e.recentSearchValues})}));function y(){const{walletErrorString:e,setWalletErrorString:r,poolErrorString:a,setPoolErrorString:t,setSearchLoading:o,recentSearchValues:l,addRecentSearchValue:n,setRecentSearchValues:c,setYieldData:i,setSearchPoolAddress:g,setSearchWalletAddress:m,searchPoolAddress:f,searchWalletAddress:_,searchLoading:y}=v(),{findSearchResult:w}=function(){const{fetchByApi:e}=u(),{suiClient:r}=d(),{setIsDlmm:a}=v();return{findSearchResult:async(s,t)=>{let o;try{const e=await r._client.getObject({id:t,options:{showType:!0,showContent:!0}}),a=e?.data?.content;o=!("moveObject"!==a?.dataType||!a.fields?.bin_manager)}catch(l){try{const r=await e(h,"GET",{wallet_address:s,pool:t});if(r&&r?.pool)return a(!0),{status:"success",data:r};{const r=await e(S,"GET",{wallet_address:s,pool:t});return r&&r?.pool?(a(!1),{status:"success",data:r}):{status:"error",error_message:"missing data"}}}catch(n){return{status:"error",error_message:"missing data"}}}a(o);try{const r=await e(o?h:S,"GET",{wallet_address:s,pool:t});return r&&r?.pool?{status:"success",data:r}:{status:"error",error_message:"missing data"}}catch(l){return null}}}}();s.useEffect(()=>{a&&(f?p(f)?t(""):t("Please enter a valid address"):t(""))},[f,a]),s.useEffect(()=>{e&&(_?p(_)?r(""):r("Please enter a valid address"):r(""))},[_,e]);const E=async(e,a)=>{if(e?p(e)?t(""):t("Please enter a valid address"):t(""),a?p(a)?r(""):r("Please enter a valid address"):r(""),e&&a){if(p(a)&&p(e)){o(!0);try{const r=await w(a,e);if(r&&"success"===r.status){const s=r.data;return i(s),n({search_value:a,sub_search_value:e}),r}{const e={error_message:"missing data"};return i(e),e}}catch(s){const e={error_message:"missing data"};return i(e),e}finally{o(!1)}}}};return{searchPoolAddress:f,searchWalletAddress:_,setSearchPoolAddress:g,setSearchWalletAddress:m,handleSearch:E,walletErrorString:e,poolErrorString:a,searchLoading:y,handleValueClick:e=>{m(e?.search_value),g(e?.sub_search_value??""),E(e?.sub_search_value??"",e?.search_value);const r=l?.filter(r=>r!==e);c([e,...r])}}}export{f as G,m as H,v as a,y as u};
